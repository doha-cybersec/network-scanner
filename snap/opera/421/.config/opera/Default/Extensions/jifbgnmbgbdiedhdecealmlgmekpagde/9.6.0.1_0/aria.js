!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="a35e9d63-f467-4deb-923c-72695acedde5",e._sentryDebugIdIdentifier="sentry-dbid-a35e9d63-f467-4deb-923c-72695acedde5")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"61c9bec51b8cfba94bad8e2d644b4f9e292d91be"},_global.SENTRY_BUILD_INFO={deps:["@babel/core","@babel/plugin-proposal-decorators","@babel/plugin-syntax-decorators","@babel/plugin-transform-runtime","@babel/preset-env","@babel/preset-react","@babel/preset-typescript","@braintree/sanitize-url","@cards-manager-client/cards-manager-client","@chromatic-com/storybook","@floating-ui/react","@playwright/test","@redux-devtools/cli","@redux-devtools/core","@redux-devtools/remote","@redux-devtools/utils","@reduxjs/toolkit","@sentry/browser","@sentry/webpack-plugin","@storybook/addon-essentials","@storybook/addon-interactions","@storybook/addon-links","@storybook/addon-onboarding","@storybook/addon-styling-webpack","@storybook/addon-webpack5-compiler-babel","@storybook/addon-webpack5-compiler-swc","@storybook/blocks","@storybook/components","@storybook/manager-api","@storybook/preview-api","@storybook/react","@storybook/react-webpack5","@storybook/test","@storybook/theming","@storybook/types","@tailwindcss/container-queries","@testing-library/dom","@testing-library/jest-dom","@testing-library/react","@testing-library/user-event","@types/chrome","@types/crypto-js","@types/diff","@types/dotenv-webpack","@types/lodash-es","@types/mustache","@types/node","@types/node-fetch","@types/pako","@types/react","@types/react-dom","@types/react-window","@types/remove-markdown","@types/styled-components","@types/turndown","@types/unist","@types/uuid","@types/webpack","@types/webpack-bundle-analyzer","@types/webpack-dev-server","@types/zip-webpack-plugin","@typescript-eslint/eslint-plugin","@typescript-eslint/parser","@uidotdev/usehooks","@vitejs/plugin-react","@vitest/coverage-v8","@vitest/ui","autoprefixer","axios","babel-loader","base64-arraybuffer","bezier-easing","classnames","clean-webpack-plugin","copy-webpack-plugin","crypto-js","css-loader","css-minimizer-webpack-plugin","date-fns","dedent","diff","dotenv","dotenv-webpack","eslint","eslint-config-prettier","eslint-plugin-filenames-simple","eslint-plugin-jsx-a11y","eslint-plugin-notice","eslint-plugin-prettier","eslint-plugin-react","eslint-plugin-react-hooks","eslint-plugin-storybook","eslint-webpack-plugin","file-type","firebase","fork-ts-checker-webpack-plugin","form-data","html-to-image","html-webpack-plugin","husky","i18next","i18next-browser-languagedetector","immer","immutable","jsdom","katex","lint-staged","lodash-es","lowlight","madge","marked","mdast-builder","memoize-one","node-fetch","node-polyfill-webpack-plugin","pako","postcss","postcss-import","postcss-loader","prettier","prettier-plugin-tailwindcss","react","react-devtools","react-dom","react-i18next","react-markdown","react-redux","react-router-dom","react-virtualized-auto-sizer","react-window","redux","redux-persist","redux-saga","rehype-external-links","rehype-highlight","rehype-katex","rehype-minify-whitespace","remark","remark-gfm","remark-math","remove-markdown","reselect","sse.js","storybook","storybook-addon-data-theme-switcher","style-loader","tailwindcss","tailwindcss-animated","terser-webpack-plugin","ts-node","tsx","typed-redux-saga","typesafe-actions","typescript","unist-util-visit","usehooks-ts","uuid","vite","vite-tsconfig-paths","vitest","webext-redux","webpack","webpack-bundle-analyzer","webpack-cli","webpack-dev-server","webpack-merge","zip-webpack-plugin"],depsVersions:{react:19,vite:6,webpack:5},nodeVersion:22},(()=>{"use strict";var e,t,r,n={5223:(e,t,r)=>{r.d(t,{$n:()=>n.$n,Eg:()=>a.E,K0:()=>n.K0,WE:()=>o.W});r(92028);var n=r(20437),a=(r(75447),r(94943),r(28058),r(64450),r(32094),r(39080),r(67874)),o=(r(50530),r(9403),r(93671),r(62488),r(99752),r(27285));r(94168)},33164:(e,t,r)=>{r.d(t,{A_Q:()=>n.A_,Alu:()=>i.Al,BFY:()=>n.BF,Bjx:()=>n.Bj,Bq9:()=>n.Bq,CQm:()=>a.CQ,CnH:()=>n.Cn,F0S:()=>o.F0S,H49:()=>o.H49,HIC:()=>s.HI,IMM:()=>n.IM,IU7:()=>n.px,Jhb:()=>s.Jh,Jy3:()=>a.Jy,KEW:()=>o.KEW,Ldp:()=>a.Ld,MF1:()=>a.MF,MmC:()=>o.MmC,N8m:()=>o.N8m,Nat:()=>n.N,O66:()=>o.O66,OKp:()=>o.OKp,OuW:()=>o.OuW,PkH:()=>n.Pk,Pz_:()=>a.Pz,Q6S:()=>a.Q6,QB_:()=>o.QB_,QG1:()=>n.QG,Qdo:()=>i.Qd,Qny:()=>a.Qn,RYO:()=>o.RYO,Roh:()=>o.Roh,S5G:()=>s.S5,S67:()=>o.S67,SHh:()=>o.SHh,Srk:()=>o.Srk,UmG:()=>o.UmG,Unf:()=>a.Un,V$G:()=>o.V$G,V7e:()=>a.V7,VP8:()=>n.VP,VUi:()=>n.VU,VuX:()=>i.Vu,Vwo:()=>a.Vw,WJ2:()=>o.WJ2,Xt$:()=>n.Xt,YAT:()=>n.YA,YD0:()=>a.YD,YEi:()=>n.YE,YSl:()=>o.YSl,YZA:()=>o.YZA,Ybv:()=>n.FQ,Yei:()=>o.Yei,Ypc:()=>o.Ypc,Z8g:()=>o.Z8g,ZW$:()=>s.ZW,a2f:()=>n.a2,aA9:()=>o.aA9,aDm:()=>a.aD,aEJ:()=>o.aEJ,aO$:()=>s.aO,b7R:()=>n.b7,bAj:()=>o.bAj,bHd:()=>a.bH,c36:()=>o.c36,cHZ:()=>o.cHZ,cdv:()=>a.cd,dA0:()=>o.dA0,dWt:()=>o.dWt,dX1:()=>o.dX1,dkL:()=>s.dk,dny:()=>o.dny,eF0:()=>n.eF,er1:()=>o.er1,fJU:()=>n.fJ,gHd:()=>n.gH,gLM:()=>o.gLM,gSi:()=>n.gS,ghs:()=>o.ghs,h_I:()=>n.h_,hiN:()=>o.hiN,iHc:()=>a.iH,ib4:()=>n.ib,idg:()=>o.idg,jei:()=>o.jei,k6f:()=>s.k6,kNA:()=>s.kN,kbM:()=>a.kb,lyu:()=>o.lyu,m7K:()=>n.m7,m9w:()=>o.m9w,mUe:()=>a.mU,moF:()=>o.moF,muu:()=>o.muu,pPn:()=>o.pPn,q1m:()=>o.q1m,rA6:()=>o.rA6,rQr:()=>o.rQr,roK:()=>n.ro,slU:()=>o.slU,tIb:()=>o.tIb,tXi:()=>n.tX,tbh:()=>o.tbh,tdZ:()=>n.td,two:()=>n.tw,uHm:()=>o.uHm,uTj:()=>o.uTj,ues:()=>a.ue,utQ:()=>a.ut,vgK:()=>n.vg,w$l:()=>s.w$,wAg:()=>n.wA,wvn:()=>o.wvn,xGn:()=>s.xG,xjH:()=>o.xjH,y7t:()=>s.y7,yI1:()=>o.yI1,zA_:()=>o.zA_,zKC:()=>i.zK,zXF:()=>a.zX,zdr:()=>a.zd});var n=r(56140),a=r(35231),o=r(37623),s=r(97025),i=(r(51347),r(98610))},39520:(e,t,r)=>{r.d(t,{B9:()=>a.B,Fw:()=>o.F,I5:()=>n.I,M5:()=>s.M5,Q3:()=>s.Q3,U1:()=>s.U1,V4:()=>s.V4,_b:()=>s._b,dd:()=>s.dd,qW:()=>s.qW,vt:()=>s.vt});r(12397);var n=r(60917),a=(r(34397),r(99173)),o=(r(31898),r(41891)),s=r(79993)},47312:(e,t,r)=>{r.d(t,{$S:()=>A,CZ:()=>v,Cu:()=>u.Cu,FE:()=>d.FE,Jt:()=>M,N0:()=>N,Nu:()=>u.Nu,O_:()=>u.O_,Ug:()=>f.U,WW:()=>D,XM:()=>C,Yl:()=>l.Yl,Zr:()=>p.Zr,aS:()=>I,cF:()=>E,f1:()=>g,fF:()=>O,fX:()=>T,hF:()=>j,lL:()=>b,s8:()=>l.s8,t4:()=>u.t4,vj:()=>_,wR:()=>w,xM:()=>k,xW:()=>h,zJ:()=>d.zJ});var n=r(10467),a=r(3453),o=r(54756),s=r.n(o),i=r(79993),c=r(41809),l=r(68427),u=r(83258),d=r(13535),f=(r(33528),r(14957)),p=r(58815),m=(r(3149),r(94697),r(96763)),v=function(e){window.open(e,"_blank").opener=null},h=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(function(e){return"string"==typeof e&&""!==e}).join(" ")},x=0,g=function(){return(new Date).getTime().toString()+Math.floor(100*Math.random()).toString()+(++x).toString()},b=function(){var e=new Date;return"conversation-".concat(e.getTime())},y=function(e){return String(e).padStart(2,"0")},j=function(){var e=-(new Date).getTimezoneOffset(),t=Math.abs(e);return 0===e?"Z":[e>0?"+":"-",y(Math.floor(t/60)),":",y(t%60)].join("")};function w(e){return new Promise(function(t){return setTimeout(t,e)})}function k(e,t){return new Promise(function(r,n){setTimeout(function(){n(new Error(t||"Operation timeout after ".concat(e,"ms")))},e)})}var C=function(e){if(!e.length)return"";try{var t=new URL(e).hostname;return t.startsWith("www.")?t.replace("www.",""):t}catch(t){return m.error("Error during processing url:",e,t.message||t),""}},O=function(e){if(!e.includes("/"))return e;var t=e.split("/"),r=(0,a.A)(t,3),n=r[1];return r[2]||n||e};function _(e){return Object.entries(e)}function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256;return"".concat("https://www.google.com/s2/favicons","?domain=").concat(e,"&sz=").concat(t)}function A(e){try{var t=new URL(e);return"http:"!==t.protocol&&"https:"!==t.protocol?(m.warn("Wrong protocol for cache storage. Replacing on HTTPS protocol..."),"https://".concat(t.pathname).concat(t.search)):t.toString()}catch(e){return m.error("Build url for cache storage failed, cause:",e),""}}function E(e,t){return S.apply(this,arguments)}function S(){return(S=(0,n.A)(s().mark(function e(t,r){var n,a;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,caches.open(t);case 1:return n=e.sent,e.prev=2,e.next=3,n.match(r);case 3:return e.abrupt("return",e.sent);case 4:return e.prev=4,a=e.catch(2),m.error("Get response from cache:",n,"failed, cause:",a),e.abrupt("return");case 5:case"end":return e.stop()}},e,null,[[2,4]])}))).apply(this,arguments)}function I(e,t,r){return P.apply(this,arguments)}function P(){return(P=(0,n.A)(s().mark(function e(t,r,n){var a,o;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,caches.open(t);case 1:if(a=e.sent,e.prev=2,!n){e.next=4;break}return e.next=3,a.put(r,n);case 3:e.next=5;break;case 4:return e.next=5,a.add(r);case 5:e.next=7;break;case 6:return e.prev=6,o=e.catch(2),e.abrupt("return",o);case 7:case"end":return e.stop()}},e,null,[[2,6]])}))).apply(this,arguments)}function M(e){try{var t=new URL(e).pathname.split("/");return t[t.length-1]}catch(e){return m.error("Get file name error:",e),""}}function D(e){return e.filter(function(e){var t=e.image_original_size_url;return e.status===c.N8.FINISHED&&t},[]).map(function(e){var t=e.name,r=e.image_original_size_url,n=e.image_thumbnail_url;return{name:null!=t?t:M(r),thumbnailUrl:n||"",type:i.vt.UPLOADED_FILE,url:r}})}var T=function(e){return"".concat(c.j9,"?q=").concat(encodeURIComponent(e))}},68204:(e,t,r)=>{var n=r(5338),a=(r(77053),r(8951),r(26791),r(67345)),o=r(96540),s=r(33164),i=r(53478),c=r(68012),l=function(e){var t=e.children,r=(0,c.A$)().loggerService,n=(0,s.YAT)().handleAriaOpened,a=(0,s.slU)().setLocalModelsServiceStatus,l=(0,o.useCallback)(function(e){var t=e?"RUNNING":"UNAVAILABLE";r.info("LOCAL MODELS SERVICE STATUS CHANGED TO",t),a(t)},[a]);return(0,o.useEffect)(function(){return(0,i.Cp)(l),n(!0),(0,i.mF)().then(l),function(){n(!1),(0,i.y_)(l)}},[]),t},u=r(10467),d=r(54756),f=r.n(d),p=r(47312),m=r(84976),v=r(47767),h=r(41809),x=r(92901),g=r(23029),b=r(64467),y=r(77490),j=(0,x.A)(function e(t){var r=this;(0,g.A)(this,e),(0,b.A)(this,"handle",function(e){var t,n;switch(e.data.message.cmd){case"already-logged-in":r.storeCommandsOverrides.authStateChanged({details:{email:e.data.message.email,fullname:e.data.message.fullname,picture:null!==(t=e.data.message.picture)&&void 0!==t?t:"",username:e.data.message.username},productionOnly:!1,status:"loggedIn",autoAcceptConsent:!0}),chrome.runtime.sendMessage({cmd:"use-mock-auth",token:null!==(n=e.data.message.token)&&void 0!==n?n:""});break;case"use-oa-auth":r.storeCommandsOverrides.authStateChanged({details:void 0,productionOnly:!0,status:"notLoggedIn"});break;default:r.loggerService.error("Unknown command")}}),this.loggerService=new y.g({name:"External Command Service",env:(0,p.t4)()}),this.storeCommandsOverrides=t}),w=r(78291),k=r(87713),C=r(74848);function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach(function(t){(0,b.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}const N=function(e){var t=e.shadowEffectClasses,r=e.shadowEffectGradient,n=e.shapesClasses;return(0,C.jsx)("div",{className:(0,p.xW)("absolute inset-x-0 top-0 z-0 h-full",(0,c.sh)({logoShapeWrapper:{operaGx:"bg-color-legacy-other-7"}},"logoShapeWrapper")),children:(0,C.jsxs)("svg",{viewBox:"0 0 740 9999",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-full",children:[(0,C.jsx)("g",{filter:"url(#filter0_f_105_16361)",children:(0,C.jsx)("path",{className:r?void 0:(0,p.xW)(t),fill:r?"url(#shadowEffectGradient)":"",d:"M548.289 227.337C495.446 284.283 428.281 339.83 394.016 314.141C359.751 288.453 357.634 181.159 321.187 108.499C284.526 36.3634 213.159 -1.32313 197.871 -66.0695C181.995 -130.477 221.986 -221.42 277.215 -309.883C332.445 -398.346 402.325 -483.99 481.389 -515.44C560.24 -546.366 648.112 -523.807 680.114 -450.196C712.327 -377.108 688.294 -253.152 679.09 -160.239C669.509 -67.5116 674.169 -5.48844 657.263 54.0797C640.356 113.648 601.296 171.1 548.289 227.337Z"})}),(0,C.jsx)("path",{d:"M488.116 -105.991H473.215C441.051 -105.991 420.922 -67.3482 436.952 -36.3732L617.226 311.988C633.21 342.878 673.257 343.111 689.532 312.409L769.54 161.483C777.245 146.95 777.254 128.92 769.565 114.377L736.581 51.9915C684.835 -45.8804 590.296 -105.991 488.116 -105.991Z",className:(0,p.xW)(n)}),(0,C.jsx)("path",{d:"M460.066 250.178L386.785 110.562C371.807 82.025 334.572 82.0112 319.576 110.537L5.59781 707.812C-1.45194 721.223 -1.43095 737.796 5.65275 751.184L78.8125 889.461C93.84 917.864 130.946 917.83 145.931 889.4L460.03 293.463C467.077 280.092 467.091 263.562 460.066 250.178Z",className:(0,p.xW)(n)}),(0,C.jsxs)("defs",{children:[(0,C.jsxs)("filter",{id:"filter0_f_105_16361",x:"84.3606",y:"-638.911",width:"722.013",height:"1069.5",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,C.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,C.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,C.jsx)("feGaussianBlur",{stdDeviation:"55",result:"effect1_foregroundBlur_105_16361"})]}),r&&(0,C.jsx)("linearGradient",_(_({id:"shadowEffectGradient"},null==r?void 0:r.gradientProps),{},{children:r.gradientColorsProps.map(function(e,t){var r;return(0,C.jsx)("stop",_({},e),null!==(r=e.id)&&void 0!==r?r:"shadow-effect-gradient-color-".concat(t))})}))]})]})})};var A=r(65300);const E=function(){var e=(0,w.Bd)().t,t=(0,c.D6)(),r=t.product,n=t.productName,a=(0,i.xS)(),o={privateModeAvailability:{operaOne:"text-color-legacy-text-1",operaGx:"text-color-legacy-text-1",operaAir:"text-color-legacy-text-2"},productDescription:{operaOne:"mb-aria-7",operaGx:" mb-aria-7",operaAir:"mb-aria-6"},productName:{operaOne:"mt-aria-3 mb-1",operaGx:"mt-aria-3 mb-1",operaAir:"my-aria-3"},switchModeButton:{operaOne:"mt-aria-5 px-aria-4 rounded-aria-radius-3 justify-center",operaGx:"mt-aria-5 rounded min-w-36 !justify-start",operaAir:"mt-aria-6 justify-center px-aria-6"},wrapper:{operaOne:"bg-color-legacy-level-1",operaGx:"bg-color-legacy-level-0"},bgShapeShadowEffectClasses:{operaGx:"fill-[--color-legacy-other-7]",operaOne:"fill-[--aria-bg-shape-shadow-color]"},bgShapesClasses:{operaGx:"fill-[--color-legacy-other-7]",operaOne:"fill-[--aria-bg-shape-fill-color]"}},s=(0,c.sh)(o,"switchModeButton"),l=(0,c.sh)(o,["bgShapesClasses","bgShapeShadowEffectClasses"]);return(0,C.jsxs)("div",{id:"private_mode",className:(0,p.xW)("relative box-border flex min-h-screen flex-col overflow-hidden px-aria-12",(0,c.sh)(o,"wrapper")),children:[(0,C.jsx)(N,{shadowEffectClasses:l.bgShapeShadowEffectClasses,shapesClasses:l.bgShapesClasses,shadowEffectGradient:r===A.Yt.GX?{gradientColorsProps:[{id:"start-color",offset:"60.83%",stopColor:"var(--color-legacy-secondary-4)"},{id:"stop-color",offset:"76.63%",stopColor:"var(--color-legacy-secondary-4)"}],gradientProps:{gradientTransform:"rotate(102)"}}:void 0}),(0,C.jsx)("div",{className:"flex basis-64"}),(0,C.jsxs)("div",{className:"z-1 flex flex-col",children:[(0,C.jsx)("div",{className:(0,p.xW)("text-header-xxl !uppercase text-color-legacy-text-1",(0,c.sh)(o,"productName")),children:n}),(0,C.jsx)("div",{className:(0,p.xW)("text-header-xl !uppercase text-color-legacy-text-1",(0,c.sh)(o,"productDescription")),children:e("onboarding_description".concat(r===A.Yt.GX?"_opera_gx":""))}),(0,C.jsxs)("div",{className:(0,p.xW)("text-body-l",(0,c.sh)(o,"privateModeAvailability")),children:[e("private_mode_availability",{productName:n}),a&&" ".concat(e("private_mode_help",{productName:n}))]}),a&&(0,C.jsx)(k.$n,{className:(0,p.xW)("box-border flex !h-10 w-fit items-center rounded border-none bg-buttons-primary-bg py-aria-3 text-color-legacy-text-5",s),onClick:function(){(0,i.qT)(),(0,i.dD)()},type:"primary",children:e("private_mode_button_title")})]})]})};var S=r(56022),I=r(8996),P=function(){var e=(0,S.jL)();return{handleResolveCloudModels:(0,o.useCallback)(function(){e(I.O.request())},[e])}};const M=function(){var e=(0,c.D6)().product,t=(0,s.hiN)().userCapabilities,r=(0,s.QB_)().fetchedCloudModels,n=P().handleResolveCloudModels,a=!(null==t||!t.has_internal_access);(0,o.useEffect)(function(){[A.Yt.One,A.Yt.GX].includes(e)&&a&&0===(null==r?void 0:r.length)&&n()},[t])},D=r.p+"assets/d7a6c05a1e25e642f6ab.svg";var T=function(){var e=(0,w.Bd)().t,t=(0,c.D6)().product,r={bgShapeShadowEffectClasses:{operaGx:"fill-[--color-legacy-other-7]",operaOne:"fill-[--aria-bg-shape-shadow-color]"},bgShapesClasses:{operaGx:"fill-[--color-legacy-other-7]",operaOne:"fill-[--aria-bg-shape-fill-color]"},wrapper:{operaOne:"bg-color-legacy-level-1",operaGx:"bg-color-legacy-level-0"}},n=(0,c.sh)(r,["bgShapesClasses","bgShapeShadowEffectClasses"]);return(0,C.jsxs)("div",{id:"oops_view",className:(0,p.xW)("relative box-border flex min-h-screen flex-col overflow-hidden px-aria-12",(0,c.sh)(r,"wrapper")),children:[(0,C.jsx)(N,{shadowEffectClasses:n.bgShapeShadowEffectClasses,shapesClasses:n.bgShapesClasses,shadowEffectGradient:t===A.Yt.GX?{gradientColorsProps:[{id:"start-color",offset:"60.83%",stopColor:"var(--color-legacy-secondary-4)"},{id:"stop-color",offset:"76.63%",stopColor:"var(--color-legacy-secondary-4)"}],gradientProps:{gradientTransform:"rotate(102)"}}:void 0}),(0,C.jsxs)("div",{className:"z-1 mt-60 flex flex-col gap-8 text-color-legacy-text-1",children:[(0,C.jsx)("div",{children:(0,C.jsx)("p",{className:"text-header-xxl my-0",children:e("ooops")})}),(0,C.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[(0,C.jsx)("img",{className:"h-8 w-8",src:D,alt:"error icon"}),(0,C.jsxs)("div",{className:"text-body-l flex w-full flex-col justify-center gap-1",children:[(0,C.jsx)("p",{className:"my-0",children:e("your_ai_chat_got_tired_and_stopped_working")}),(0,C.jsx)("p",{className:"my-0",children:e("please_try_refreshing")})]})]}),(0,C.jsx)("div",{className:"mt-8",children:(0,C.jsx)(k.$n,{onClick:function(){return window.location.reload()},type:"tertiary",children:e("refresh")})})]})]})},R=(0,C.jsx)(T,{}),L=r(55182),U=r(79993),B=r(46942),F=r.n(B),H=function(e){var t=e.children,r=(0,v.Zp)(),n=(0,c.D6)(),a=n.view,i=n.product,l=n.isPrivateMode,u=(0,s.VUi)().remoteConfig;!function(){var e=(0,c.D6)(),t=e.isDarkTheme,r=e.product,n=(0,s.roK)().setDarkThemeEnabled;(0,o.useEffect)(function(){n(t)},[r,n,t])}();var d=!u;(0,o.useEffect)(function(){l&&r({pathname:"/".concat(h.p4.PRIVATE_MODE)})},[l]);var f=F()("h-full w-full",i===A.Yt.One&&"opera-one",a===A.Ss.Tab?"tab-view":"sidebar-view","transparent");return d?(0,C.jsx)("div",{className:f}):(0,C.jsx)("div",{className:f,children:t})},z=r(39520),W=r(49924),G=r(60557),V=r(45887),Y=r(3028),K=new Map;globalThis.setInterval(function(){return K.clear()},18e5);var $=function(e,t){if(K.has(e))return K.get(e);var r=function(e,t){return{id:e.id,serverId:e.server_id,sender:e.sender,content:e.message.trim(),displayText:e.displayText,countryCode:e.countryCode||"",richResponse:e.rich_response,files:e.files,links:e.links,extraContent:t===V.He.Chat?{imagesList:e.images_list,gamesList:e.games_list,shoppingList:e.shopping_list,sources:e.sources,suggestions:e.suggestions,followUpQuestions:e.follow_up_questions}:void 0,isAudioAvailable:e.audioAvailable||!1,isRetryDisabled:e.isRetryDisabled||!1,isErrorMessage:e.error||!1,errorMessage:e.errorMessage,isAborted:e.aborted||!1,isLongMemory:e.new_facts_remembered||!1,related_images:e.related_images,skills:e.skills}}(e,t);return K.set(e,r),r},q=function(e,t){var r=e.map(function(e){return $(e,t)});return(0,Y.KC)(r)},Q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:V.He.Chat;return{id:e.id,version:1,type:t,serverId:e.server_id,label:e.label,model:e.model,modelSelection:e.modelSelection,groups:q(e.data,t),isPageContextEnabled:e.isPageContextEnabled,createdAt:(null==e?void 0:e.createdAt)||X(e),updatedAt:X(e)}},X=function(e){try{return new Date(e.lastMessageTime).getTime()}catch(e){return 0}};const Z=r.p+"assets/aefa77da23f4e6f4dc41.svg",J=r.p+"assets/6a438c94a6e424a20e54.svg",ee=r.p+"assets/f473fde3fbdcc284fba7.svg";var te=r(4365),re=r(54695);const ne=r.p+"assets/45bedce139d9c6bc7189.svg",ae=r.p+"assets/d6f572a9a81d9cc2bcf5.svg";var oe=r(83854),se={focus:"Focus",set_value:"Set Value",click:"Click",press_enter:"Press Enter",select:"Select",go_back:"Go Back",go_to_url:"Go to URL",search_google:"Search Google",done:"Ok",human_interaction:"Human Interaction",ask_human:"Ask Human",switch_tab:"Switch Tab",click_visual:"Mouse Click",close_tab:"Close Tab",mouse_click:"Mouse Click",send_keys:"Press Key",send_text:"Type Text",send_rich_text:"Write Text"},ie=function(e){return(e||[]).map(function(e){return{id:e.step_id,label:se[e.action.type],description:e.expected_outcome,iconUrl:ue(e.action.type)}})},ce=function(e,t){switch(e){case V.S5.NEEDS_USER_INTERACTION:return[{label:"Continue",action:t.continueOperator,iconUrl:re}];case V.S5.IN_PROGRESS:return[{label:"Stop",action:t.cancelOperator,iconUrl:te}];default:return[]}},le=function(e){switch(e){case V.S5.ERROR:return ae;case V.S5.NEEDS_USER_INTERACTION:return Z;default:return ne}},ue=function(e){switch(e){case"click":default:return J;case"send_rich_text":case"done":return ne;case"focus":case"human_interaction":case"set_value":return ee}},de=r(89394),fe=r(68901),pe=r(96763),me=function(){var e=(0,s.tIb)(),t=e.activeConversation,r=e.activeConversationStatus,n=e.executedSteps,a=e.operatorV2Status,i=(0,s.YZA)(),c=i.handleOperatorV2Canceled,l=i.handleUpdateOperatorV2Canceled,u=(0,s.dny)().handleConversationStatusChanged,d=function(e,t){switch(e){case oe.T.IN_PROGRESS:return[h.PD.ASK_USER,h.PD.NEED_USER_INTERACTION].includes(t)?V.S5.NEEDS_USER_INTERACTION:V.S5.IN_PROGRESS;case oe.T.FINISHED:return V.S5.FINISHED;case oe.T.ERROR:case oe.T.CANCELLED:default:return V.S5.ERROR}}(a,r),f=(0,o.useCallback)(function(){try{a===oe.T.IN_PROGRESS&&(c(),l(),u(fe.P.ERROR))}catch(e){pe.error("Can not cancel the request",e)}},[a,c,l,u]);return{activeConversation:t,executedSteps:(0,o.useMemo)(function(){return(0,de.A)(n||[]).reverse()},[n]),operatorStatus:a,operation:d,cancelOperation:f}},ve=r(98632),he=r(60125),xe=r(5553);function ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(r),!0).forEach(function(t){(0,b.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ge(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var ye=function(){return(0,x.A)(function e(){(0,g.A)(this,e)},[{key:"sendFeedback",value:(e=(0,u.A)(f().mark(function e(t,r){var n,a,o,s,i,c,l,u,d,p,m;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,opr.operaIdentityPrivate.getAccessToken.asPromise(!1);case 1:return n=e.sent,a=n.error,o=n.token,e.next=2,(0,he.rJ)();case 2:if(s=e.sent,"OK"!==a||!o||!s){e.next=5;break}return i=fetch,c=t,l=be({Authorization:"Bearer ".concat(o),"Content-Type":"application/json","X-Aria-Encryption-Key":s},(0,xe.J)()),u=JSON,d=be,p=be({},r),e.next=3,(0,he.H2)();case 3:return m=u.stringify.call(u,d(p,e.sent)),e.next=4,i(c,{headers:l,method:"POST",body:m}).then(function(e){var t=e.ok,r=e.statusText;return t?Promise.resolve(r):Promise.reject(r)});case 4:return e.abrupt("return",e.sent);case 5:return e.abrupt("return",Promise.reject("Authorization error"));case 6:case"end":return e.stop()}},e)})),function(t,r){return e.apply(this,arguments)})}]);var e}(),je=(0,o.createContext)(null),we=je.Provider,ke=r(33808),Ce=r(3453),Oe=r(56822),_e=r(53954),Ne=r(85501),Ae=r(65579),Ee=r(96763);function Se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(r),!0).forEach(function(t){(0,b.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Se(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Pe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Pe=function(){return!!e})()}var Me=function(e){function t(e){var r,n,a,o;return(0,g.A)(this,t),n=this,a=t,a=(0,_e.A)(a),(r=(0,Oe.A)(n,Pe()?Reflect.construct(a,o||[],(0,_e.A)(n).constructor):a.apply(n,o))).baseUrl=h.Sc[e].HTTP,r.readerPlayer=new Audio,r.readerPlayer.addEventListener("pause",function(){r.dispatchEvent(new CustomEvent("readingStop"))}),r}return(0,Ne.A)(t,e),(0,x.A)(t,[{key:"buildCachedRequestUrl",value:function(e,t){return"".concat(t,"?messageId=").concat(e)}},{key:"getAriaVoiceCacheStorage",value:(s=(0,u.A)(f().mark(function e(){return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,window.caches.open(h.Oy);case 1:return e.abrupt("return",e.sent);case 2:case"end":return e.stop()}},e)})),function(){return s.apply(this,arguments)})},{key:"getCachedData",value:(o=(0,u.A)(f().mark(function e(t){var r,n,a,o;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,this.getAriaVoiceCacheStorage();case 1:return r=e.sent,e.next=2,r.match(t);case 2:if(!(n=e.sent)){e.next=4;break}return e.next=3,n.json();case 3:return a=e.sent,o=a.content_base64_chunks,e.abrupt("return",o);case 4:return e.abrupt("return",[]);case 5:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"storeDataInCache",value:(a=(0,u.A)(f().mark(function e(t,r){var n;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,this.getAriaVoiceCacheStorage();case 1:return n=e.sent,e.next=2,n.put(t,r.clone());case 2:case"end":return e.stop()}},e,this)})),function(e,t){return a.apply(this,arguments)})},{key:"getMessageReaderVoiceSource",value:(n=(0,u.A)(f().mark(function e(t,r){var n,a,o,s,i,c,l,u,d;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.buildCachedRequestUrl(t,"".concat(this.baseUrl,"/").concat(h.r5.endpointTextToSpeech)),e.next=1,this.getCachedData(n);case 1:if(!(a=e.sent).length){e.next=2;break}return e.abrupt("return",a);case 2:return l=Ie,u={conversation_id:r,gender:"female",message_id:t},e.next=3,(0,he.H2)();case 3:return o=l(u,e.sent),e.prev=4,e.next=5,(0,p.FE)("".concat(this.baseUrl,"/").concat(h.r5.endpointTextToSpeech),{method:"POST",body:o},"needsAuth","noParse");case 5:if(!(s=e.sent).ok){e.next=8;break}return e.next=6,this.storeDataInCache(n,s);case 6:return e.next=7,s.json();case 7:i=e.sent,c=i.content_base64_chunks,a=c;case 8:return e.abrupt("return",a);case 9:return e.prev=9,d=e.catch(4),Ee.error("Fetch audio chunks error:",d),e.abrupt("return",[]);case 10:case"end":return e.stop()}},e,this,[[4,9]])})),function(e,t){return n.apply(this,arguments)})},{key:"read",value:(r=(0,u.A)(f().mark(function e(t){var r,n;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,Ce.A)(t,1),n=r[0],this.readerPlayer.src="data:audio/ogg;base64,"+n,e.next=1,this.readerPlayer.play();case 1:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"stopRead",value:function(){this.readerPlayer.pause()}}]);var r,n,a,o,s}((0,Ae.A)(EventTarget)),De=r(15440),Te=r(60023),Re=r(96763),Le=function(e){return e.HTML="text/html",e.IMAGE="image/png",e.TEXT="text/plain",e}(Le||{}),Ue=function(){return(0,x.A)(function e(){(0,g.A)(this,e)},[{key:"checkClipboardPermission",value:(r=(0,u.A)(f().mark(function e(){var t,r;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,navigator.permissions.query({name:"clipboard-write"});case 1:return t=e.sent,r=t.state,e.abrupt("return","granted"===r?Promise.resolve({success:!0}):Promise.reject({error:!0}));case 2:case"end":return e.stop()}},e)})),function(){return r.apply(this,arguments)})},{key:"getImageBlob",value:(t=(0,u.A)(f().mark(function e(t){var r,n;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,fetch(t.src);case 1:return r=e.sent,e.abrupt("return",r.blob());case 2:return e.prev=2,n=e.catch(0),Re.error(n),e.abrupt("return");case 3:case"end":return e.stop()}},e,null,[[0,2]])})),function(e){return t.apply(this,arguments)})},{key:"writeToClipboard",value:(e=(0,u.A)(f().mark(function e(t){var r,n,a,o,s,i,c,l;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,this.checkClipboardPermission();case 1:if(!e.sent.success){e.next=5;break}return r=(0,De.QY)(t),e.next=2,Te.xI.parse(r);case 2:if(r=e.sent,n=new DOMParser,a=n.parseFromString(r,"text/html"),o={},!(s=a.querySelector("img"))){e.next=4;break}return e.next=3,this.getImageBlob(s);case 3:(i=e.sent)&&(o[Le.IMAGE]=i);case 4:return(c=a.documentElement.textContent)&&(o[Le.TEXT]=new Blob([c.trim()],{type:Le.TEXT})),l=new ClipboardItem(o),e.abrupt("return",navigator.clipboard.write([l]).then(function(){return Promise.resolve({success:!0})}).catch(function(){return Promise.reject({error:!0})}));case 5:return e.abrupt("return",Promise.reject({error:!0}));case 6:case"end":return e.stop()}},e,this)})),function(t){return e.apply(this,arguments)})}]);var e,t,r}(),Be=r(66875),Fe=function(){var e=(0,s.vgK)(),t=e.addNotification,r=e.closeNotification;return{closeNotification:(0,o.useCallback)(function(e){r(e)},[r]),createNotification:(0,o.useCallback)(function(e){t(e)},[t])}},He=r(32976),ze=function(e){return e.SIA="sia",e.SOURCE_LINKS="source-links",e.PROFILE_MEMORY="profile-memory",e}({}),We=r(65788);function Ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ve(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(r),!0).forEach(function(t){(0,b.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ge(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Ye=r(12280),Ke=r(39262),$e=r(76708),qe=r(45242),Qe=r(30302),Xe=function(){var e=(0,v.Zp)(),t=(0,o.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U.M5.CHAT,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qe.BR,r="/".concat(h.p4.MAIN,"/");return t!==Qe.BR?r+="".concat(e,"/").concat(t,"/"):e!==U.M5.CHAT&&(r+=e+"/"),r},[]),r=(0,o.useCallback)(function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U.M5.CHAT,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qe.BR,a=t(r,n);e(a)},[e,t]),n=(0,o.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe.BR;r(U.M5.CHAT,e)},[r]),a=(0,o.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe.BR;r(U.M5.DO,e)},[r]),s=(0,o.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe.BR;r(U.M5.RESEARCH,e)},[r]),i=(0,o.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe.BR;r(U.M5.ONE_MINUTE_RESEARCH,e)},[r]),c=(0,o.useCallback)(function(t){e("/".concat(h.p4.MAIN,"/").concat(h.p4.SETTINGS,"/"),{state:t})},[e]),l=(0,o.useCallback)(function(){e("/",{replace:arguments.length>0&&void 0!==arguments[0]&&arguments[0]})},[e]),u=(0,o.useCallback)(function(){e(-1)},[e]);return{getUrl:t,navigateTo:r,navigateToChat:n,navigateToOperator:a,navigateToResearch:s,navigateToOneMinuteResearch:i,navigateToSettings:c,navigateToRoot:l,navigateBack:u}},Ze=r(29973),Je=r(53453),et=r(34173),tt=r(96763);function rt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function nt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(r),!0).forEach(function(t){(0,b.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rt(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var at=new He.gP({env:(0,p.t4)(),name:"OPERA BROWSER SIDEBAR PRIVATE"}),ot=function(){var e,t=(0,w.Bd)().t,r=Xe(),n=r.navigateToChat,a=r.navigateToOperator,l=r.navigateToResearch,d=r.navigateToOneMinuteResearch,m=r.navigateToSettings,x=(0,s.idg)(),g=x.activeConversationData,b=x.activeConversationId,y=x.activeConversationImages,j=(0,s.hiN)().userCapabilities,k=(0,s.tIb)(),C=k.activeConversationImages,O=k.operatorV2Status,_=(0,s.q1m)().chatMode,N=(0,s.m9w)().consentMessage,E=(0,s.muu)().handleTransferConsentMessage,S=null!==(e=null==g?void 0:g.server_id)&&void 0!==e?e:"",I=(0,ke.D)(),P=I.source,M=I.windowId,D=I.tabId,T=I.view,R=(0,s.uTj)().ariaVoiceState,L=(0,s.BFY)().networkEnvironment,B=(0,Be.a)().handleScreenshotClipboard,F=Fe(),H=F.createNotification,W=F.closeNotification,V=(0,s.wvn)().handleActiveConversationChanged,Y=(0,s.H49)(),K=Y.handleAbortConversation,$=Y.handleUpdateConversation,q=Y.handleDeleteConversation,Q=(0,s.H49)().handleDeleteAll,X=(0,s.c36)().setAriaVoiceState,Z=(0,s.UmG)().setIsSiaEnabled,J=(0,s.A_Q)().setSourceLinksEnabled,ee=(0,s.zA_)().handleCleanConversationRequest,te=(0,s.VuX)().handleFilesFromStartDeleted,re=(0,s.YD0)().handleLoadProfile,ne=(0,s.Jy3)(),ae=ne.handleClearMemory,se=ne.handleRemoveMemoryItem,ie=(0,s.PkH)().handleProfileMemoryChanged,ce=(0,s.bHd)(),le=ce.handleAcceptConsent,ue=ce.setAccountlessLoginData,de=ce.handleShoppingSuggestionsConsentAccepted,fe=(0,s.YZA)(),pe=fe.handleOperatorV2Updated,me=fe.handleOperatorV2,he=(0,s.slU)().setModel,xe=(0,s.V7e)(),ge=xe.authUserDetails,be=xe.userId,je=(0,s.KEW)(),we=je.setChatModeInCustomTabId,Ce=je.setChatMode,Oe=(0,s.dny)(),_e=Oe.handleBrowseForMeActiveConversationChanged,Ne=Oe.handleBrowseForMeActiveConversationDeleted,Ae=Oe.handleConversationStatusChanged,Ee=Oe.setConversationLabel,Se=(0,s.YZA)(),Ie=Se.handleOperatorV2Canceled,Pe=Se.handleUpdateOperatorV2Canceled,De=(0,Ze.Qv)(),Te=De.handleSendResearchQuery,Re=De.handleUpdateResearchConversation,Le=(0,Ze.XV)(),Ge=Le.handleConversationDeleted,Qe=Le.handleConversationAborted,rt=(0,s.muu)(),ot=rt.handleSetConsentMessage,st=rt.handleClearConsentMessage,it=(0,ve.Me)(),ct=it.refreshPageSuggestions,lt=it.refreshChatSuggestions,ut=(0,G.q$)().handleConversationPageAccessUpdated,dt=(0,s.er1)().handleSaveDeployedHtmlUrl,ft=(0,v.$P)(b?"#/".concat(b):"#/"),pt=(0,o.useMemo)(function(){return new Ue},[]),mt=(0,o.useMemo)(function(){return new ye},[]),vt=(0,o.useMemo)(function(){return new Me(L)},[L]),ht=(0,o.useMemo)(function(){return _===U.M5.DO},[_]),xt=(0,o.useMemo)(function(){return y.map(function(e){return e.url}).join("|")},[y]),gt=(0,o.useMemo)(function(){return C.map(function(e){return e.url}).join("|")},[C]),bt=(0,o.useMemo)(function(){return ht?C:y},[xt,gt,ht]),yt=(0,o.useCallback)(function(e){V(e,P,D),n(e),he(h.KY),vt.stopRead()},[V,P,D,n,he,vt]),jt=(0,o.useCallback)(function(e,t){t===U.M5.RESEARCH?Qe(e):K(e)},[K,Qe]),wt=(0,o.useCallback)(function(e,t,r){switch(r){case U.M5.CHAT:return $({conversationId:e,updateData:{label:t,isLabelGenerated:!1}}),!0;case U.M5.RESEARCH:return Re(e,{label:t}),!0;case U.M5.DO:return Ee(e,t),!0;default:return!1}},[$,Re,Ee]),kt=(0,o.useCallback)(function(e,t){var r=!1;switch(t){case U.M5.CHAT:q({conversationId:e,serverId:S}),r=!0;break;case U.M5.RESEARCH:Ge(e),e===b&&n(),r=!0;break;case U.M5.DO:Ne(e),e===b&&n(),r=!0}return r&&e===b&&n(),r},[q,Ge,Ne,S,b,n]),Ct=(0,o.useCallback)(function(e){yt(h.BR),n(),he(e||h.KY)},[yt,he,n]),Ot=(0,o.useCallback)(function(){_e(h.BR),a()},[_e,a]),_t=(0,o.useCallback)(function(e){m({initialSection:e})},[m]),Nt=(0,s.moF)().handleSendMessage;!function(e){var t=e.activeConversationId,r=e.sendMessage,n=(0,c.D6)(),a=n.view,o=n.isNeonEdition,l=n.windowId,u=(0,s.dWt)().newConversationRequest,d=(0,s.CnH)().handleMenuOpenStateChanged,f=(0,s.zA_)().handleCleanConversationRequest;(0,c.w5)(function(){var e=!("neon-start-page"===(null==u?void 0:u.message.source)),n=!("selected-content-prompt"===(null==u?void 0:u.message.source)||"neon-start-page"===(null==u?void 0:u.message.source));if(u)if(o?e:n){if(u.message.id===t){switch(d(!1),u.message.source){case"selected-content-prompt":(0,s.eF0)(z.dd.HIGHLIGHT);break;case"command-line":(0,s.eF0)(z.dd.COMMAND_BAR);break;default:(0,s.eF0)(a===A.Ss.Tab?z.dd.BROWSER_TAB:z.dd.SIDEBAR)}r(Ve(Ve({},u.message),{},{isNewConversation:!0})),f()}}else if("selected-content-prompt"===u.message.source)return(0,s.eF0)(z.dd.HIGHLIGHT),void(o?(0,i.mM)():(0,We.ke)(l))},[u,t,a],[r])}({activeConversationId:b,sendMessage:Nt});var At=(0,o.useCallback)(function(){Nt({text:t("summarize_this_chat"),conversationSource:P,endpointType:"endpointSummarizeChatV3",isRetryDisabled:!0,conversationId:b})},[P,b,Nt,t]),Et=(0,o.useCallback)(function(e,t){var r=b===h.BR?(0,p.lL)():b,a=t||{},o=a.files,s=a.isVoice,i=a.skills,c=a.thinkHarder,l=a.isPageContextEnabled,u=a.selectedModel,d=a.displayText;Nt(nt(nt({text:e,conversationSource:P,files:o,conversationId:r,skills:i,thinkHarder:c,isPageContextEnabled:l,selectedModel:u,isNewConversation:b===h.BR},s&&{sourceRequestOverride:"voice"}),d&&{displayText:d})),n(r)},[b,Nt,P,n]),St=(0,o.useCallback)(function(){try{O===oe.T.IN_PROGRESS&&(Ie(),Pe(),Ae(h.PD.ERROR))}catch(e){tt.error("Can not cancel the request",e)}},[O,Ie,Pe,Ae]),It=(0,o.useCallback)(function(){Ae(h.PD.FINISHED)},[Ae]),Pt=(0,o.useCallback)(function(e,t){Te({query:null,conversationId:e,researchDepth:t})},[Te]),Mt=(0,o.useCallback)(function(e){var t=e.text,r=e.files,n=e.skills,o=e.agents,s=e.isFromChat,i=e.isNewConversation,c=s||i?(0,p.lL)():void 0;i?me(t,"USE_API",r,n,o,c,function(){return a(c)}):(St(),pe({stepId:null,message:{text:t,source:P},tabId:"".concat(D),isFromChat:!!s,files:r,skills:n,agents:o,serverId:s?S:void 0,initConversationId:c,callback:function(){return a(c)}}))},[St,me,pe,a,S,P,D]),Dt=(0,o.useCallback)(function(e){var t=e.query,r=e.conversationId,n=e.files,a=e.skills,o=e.isFromChat,s=e.researchDepth;Te({query:t,conversationId:r,chatConversationId:o?S:void 0,files:n,skills:a,researchDepth:s}),T===A.Ss.Sidebar&&(Ce(s===z.Fw.MINUTE?U.M5.ONE_MINUTE_RESEARCH:U.M5.RESEARCH),l(r))},[Te,l,S,Ce,T]),Tt=(0,o.useCallback)(function(e,t){H({text:e,type:t})},[H]),Rt=(0,o.useCallback)(function(){var e=(0,u.A)(f().mark(function e(r){var n,a,o,s,i;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,pt.checkClipboardPermission();case 1:if(n=e.sent,a=n.success,o=!0,!a){e.next=3;break}return e.next=2,pt.writeToClipboard(r.content);case 2:s=e.sent,i=s.error,o=Boolean(i);case 3:o?Tt(t("error"),"error"):Tt(t("copied"),"info");case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[pt,Tt,t]),Lt=(0,o.useCallback)(function(){var e=(0,u.A)(f().mark(function e(r){var n,a,o,s,i;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.id,a=r.serverId,o=R.isPlaying,s=R.messageId,!o||s!==n){e.next=1;break}return vt.stopRead(),X({isPlaying:!1,messageId:null,source:""}),e.abrupt("return");case 1:if(!a){e.next=4;break}return X({loadingAudio:!0,messageId:n,source:P}),e.next=2,vt.getMessageReaderVoiceSource(a,S);case 2:if(!(i=e.sent).length){e.next=3;break}return e.abrupt("return",vt.read(i).then(function(){X({isPlaying:!0,loadingAudio:!1,messageId:n,source:P})}));case 3:X({isPlaying:!1,loadingAudio:!1,messageId:null,source:""}),Tt(t("error_occurred_message"),"error");case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[R,vt,X,P,S,Tt,t]),Ut=(0,o.useCallback)(function(){var e=(0,u.A)(f().mark(function e(r){return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,B(r);case 1:return H({text:t("snapshot_has_been_copied_to_clipboard"),type:"info"}),e.abrupt("return",!0);case 2:return e.prev=2,e.catch(0),H({text:t("screenshot_was_not_copied"),type:"error"}),e.abrupt("return",!1);case 3:case"end":return e.stop()}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}(),[B,H,t]),Bt=(0,o.useCallback)(function(){var e=(0,u.A)(f().mark(function e(t){var r,n,a,o,s,i;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(h.Sc[L].HTTP,"/api/v1/").concat(h.RU.endpointFeedback),n=t.conversationId,a=t.feedbackRate,o=t.feedbackOptions,s=t.feedbackComment,i=t.messageId,e.abrupt("return",mt.sendFeedback(r,{comment:s,conversation_id:n,kind:o,message_id:i,rate:a}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[mt,L]),Ft=(0,o.useCallback)(function(){var e=(0,u.A)(f().mark(function e(t,r){var n,a,o,s;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.feedbackRate,a=r.feedbackOptions,o=r.feedbackComment,!t||!t.serverId){e.next=4;break}return e.prev=1,e.next=2,Bt({conversationId:S,feedbackComment:o,feedbackOptions:a,feedbackRate:n,messageId:t.serverId});case 2:return e.abrupt("return",!0);case 3:return e.prev=3,s=e.catch(1),tt.error("Feedback send error:",s),e.abrupt("return",!1);case 4:return tt.error("No message for feedback"),e.abrupt("return",!1);case 5:case"end":return e.stop()}},e,null,[[1,3]])}));return function(t,r){return e.apply(this,arguments)}}(),[Bt,S]),Ht=(0,o.useCallback)((0,u.A)(f().mark(function e(){return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,new Promise(function(e){"browserSidebarPrivate"in opr&&"getPanelStatus"in opr.browserSidebarPrivate?opr.browserSidebarPrivate.getPanelStatus(function(t){var r=t.docked,n="Aria"===t.shown_item_pref_id&&r;at.info("IS ARIA PINNED",n),e(n)}):(at.error("API not exists or is unavailable"),e(!1))});case 1:return e.abrupt("return",e.sent);case 2:case"end":return e.stop()}},e)})),[]),zt=(0,o.useCallback)((0,u.A)(f().mark(function e(){return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,Ht();case 1:if(!e.sent){e.next=2;break}opr.browserSidebarPrivate.undockPanel();case 2:setTimeout(function(){opr.browserSidebarPrivate.collapsePanel(),opr.browserSplitViewPrivate.SetSidePanelVisibility(!1)},.25*h.Z2);case 3:case"end":return e.stop()}},e)})),[Ht]),Wt=(0,o.useCallback)(function(){i.$6?(0,i.MW)(function(e){e||opr.shodanPrivate.showCommandLine()}):at.info("NEW SHODAN API NOT SUPPORTED")},[]),Gt=(0,o.useCallback)(function(){var e=(0,u.A)(f().mark(function e(t){return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.open(ft,"_blank"),chrome.tabs.query({windowId:chrome.windows.WINDOW_ID_CURRENT},function(e){var r=e.find(function(e){return e.active}),n=null!=r&&r.groupId&&-1!==r.groupId?null==r?void 0:r.index:e.length;r&&(chrome.tabs.move(r.id,{index:n}),N&&E(M,D,r.id),V(t||h.BR,"tab-view",r.id),r.groupId&&-1!==r.groupId&&(0,Ke.fn)(ft,r.groupId,chrome.windows.WINDOW_ID_CURRENT,D,!0))}),Ht){e.next=1;break}return e.next=1,zt();case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[ft,Ht,N,V,E,M,D,zt]),Vt=(0,o.useCallback)(function(){var e=(0,u.A)(f().mark(function e(t){var r,n,a,o;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=D<-1?Math.abs(D):D,e.next=1,(0,Ke._X)(n);case 1:if(a=e.sent,-1!==(null!==(r=null==a?void 0:a.groupId)&&void 0!==r?r:-1)){e.next=7;break}return o=(0,Ke.Lr)(),e.prev=2,e.next=3,(0,Ke.RZ)([n],M);case 3:return e.next=4,(0,Ke.fn)(t,o,M,n,!0);case 4:e.next=6;break;case 5:e.prev=5,e.catch(2),window.open(t,"_blank");case 6:e.next=10;break;case 7:if(null==a||!a.groupId){e.next=9;break}return e.next=8,(0,Ke.fn)(t,a.groupId,M,n,!0);case 8:e.next=10;break;case 9:tt.warn("Current tabId is neither undefined nor -1",null==a?void 0:a.groupId);case 10:case"end":return e.stop()}},e,null,[[2,5]])}));return function(t){return e.apply(this,arguments)}}(),[D,M]);(0,o.useEffect)(function(){var e=R.isPlaying,t=R.source,r=function(){e&&"tab-view"===t&&(vt.stopRead(),X({isPlaying:!1,source:"",messageId:null}))},n=function(){X({isPlaying:!1,source:"",messageId:null})};return window.addEventListener("beforeunload",r),vt.addEventListener("readingStop",n),function(){window.removeEventListener("beforeunload",r),vt.removeEventListener("readingStop",n)}},[R,vt,X]);var Yt=(0,o.useCallback)(function(e,t){switch(e){case ze.SIA:Z(t);break;case ze.SOURCE_LINKS:J(t);break;case ze.PROFILE_MEMORY:ie(t)}},[Z,J,ie]),Kt=(0,o.useCallback)(function(){(0,p.CZ)(h.q)},[]),$t=(0,o.useCallback)(function(e){se({targetItem:e})},[se]),qt=(0,o.useCallback)(function(){var e=(0,u.A)(f().mark(function e(t){var r,n,a,o,s,i,c,l,u,d;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,(0,Ye.Ky)();case 1:if(u=r=e.sent,!(l=null!==u)){e.next=2;break}l=void 0!==r;case 2:if(!l){e.next=3;break}d=r,e.next=4;break;case 3:d={};case 4:return n=d.id,e.next=5,(0,Ye.e6)(n,!0);case 5:if(a=e.sent,!((null==ge?void 0:ge.email)||be)||null==a||!a.id){e.next=11;break}return e.next=6,(0,Ke.wy)();case 6:if(o=e.sent){e.next=7;break}return e.abrupt("return");case 7:if(t&&0!==t.trim().length){e.next=9;break}return e.next=8,(0,Ke._8)(o);case 8:s=e.sent,i=s.activeTabId,c=s.groupId,we(U.M5.DO,n,c),_e(h.BR),chrome.runtime.sendMessage({type:h.uF.NEON_DO_OPEN_START_PAGE,payload:{conversationId:h.BR,tabId:i,windowId:n}}),chrome.tabs.update(+a.id,{url:h.to}),e.next=10;break;case 9:Mt({text:t,files:void 0,skills:[],isFromChat:!0});case 10:opr.browserSplitViewPrivate.SetSidePanelVisibility(!0);case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[null==ge?void 0:ge.email,be,we,_e,Mt]),Qt=(0,o.useCallback)(function(){var e=(0,u.A)(f().mark(function e(t){var r,n,a,o,s,i;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,(0,Ye.Ky)();case 1:if(s=r=e.sent,!(o=null!==s)){e.next=2;break}o=void 0!==r;case 2:if(!o){e.next=3;break}i=r,e.next=4;break;case 3:i={};case 4:return n=i.id,e.next=5,(0,Ye.e6)(n,!0);case 5:if(a=e.sent,!((null==ge?void 0:ge.email)||be)||null==a||!a.id){e.next=8;break}return e.next=6,(0,Ke.wy)();case 6:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:T===A.Ss.Sidebar&&Ce(U.M5.RESEARCH),l(t);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[null==ge?void 0:ge.email,be,T,l,Ce]),Xt=(0,o.useCallback)(function(){var e=(0,u.A)(f().mark(function e(t){var r,n,a,o,s,i;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,(0,Ye.Ky)();case 1:if(s=r=e.sent,!(o=null!==s)){e.next=2;break}o=void 0!==r;case 2:if(!o){e.next=3;break}i=r,e.next=4;break;case 3:i={};case 4:return n=i.id,e.next=5,(0,Ye.e6)(n,!0);case 5:if(a=e.sent,!((null==ge?void 0:ge.email)||be)||null==a||!a.id){e.next=8;break}return e.next=6,(0,Ke.wy)();case 6:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:T===A.Ss.Sidebar&&Ce(U.M5.ONE_MINUTE_RESEARCH),d(t);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[null==ge?void 0:ge.email,be,T,d,Ce]),Zt=(0,o.useCallback)(function(){var e=(0,u.A)(f().mark(function e(t,r,n){var a,o,s,i,c,l,u,d,m,v,x,g,b;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,(0,Ye.Ky)();case 1:if(g=a=e.sent,!(x=null!==g)){e.next=2;break}x=void 0!==a;case 2:if(!x){e.next=3;break}b=a,e.next=4;break;case 3:b={};case 4:return o=b.id,e.next=5,(0,Ye.e6)(o,!0);case 5:if(s=e.sent,i=encodeURIComponent(r||""),c="".concat(h.Jz,"/aria.html#/"),n){e.next=9;break}if(l="".concat(c).concat(h.p4.APPLICATION_X,"?pending=").concat(!!i,"&prompt=").concat(i),null!=s&&s.id){e.next=7;break}return e.next=6,(0,$e.aI)({url:l});case 6:e.next=8;break;case 7:return e.next=8,(0,qe.DF)(Number(s.id),l);case 8:return e.abrupt("return");case 9:return u=new He.HH,e.next=10,Promise.all(n.map(function(e){var r=u.convertToFile(e);return u.storeFile(r,t||(0,p.f1)())}));case 10:if(d=e.sent,m=encodeURIComponent(JSON.stringify(d)),v="".concat(c).concat(h.p4.APPLICATION_X,"?pending=").concat(!!i,"&prompt=").concat(i,"&cacheUrls=").concat(m),null!=s&&s.id){e.next=12;break}return e.next=11,(0,$e.aI)({url:v});case 11:e.next=13;break;case 12:return e.next=13,(0,qe.DF)(Number(null==s?void 0:s.id),v);case 13:case"end":return e.stop()}},e)}));return function(t,r,n){return e.apply(this,arguments)}}(),[]),Jt=(0,o.useCallback)(function(e,t){var r=b===h.BR?(0,p.lL)():b;Nt(nt(nt({conversationId:r,text:e,conversationSource:P},null!=t&&t.promptId?{promptId:t.promptId}:{}),{},{isNewConversation:b===h.BR,isPageContextEnabled:null==t?void 0:t.isPageContextEnabled,selectedModel:null==t?void 0:t.selectedModel})),n(r)},[b,n,Nt,P]),er=(0,o.useCallback)(function(e,t){var r=b===h.BR?(0,p.lL)():b;Nt({conversationId:r,conversationSource:"selected-content-prompt",isNewConversation:b===h.BR,promptId:e,text:t}),n(r)},[b,n,Nt]),tr=(0,o.useCallback)(function(){return bt},[bt]),rr=(0,o.useCallback)(function(e,t){ot(e,t)},[ot]),nr=(0,o.useCallback)(function(){st()},[st]),ar=(0,o.useCallback)(function(e,t){ut({isEnabled:e,isEnabledChangedByUser:t})},[ut]),or=(0,o.useCallback)(function(e){X({isVoiceMode:e})},[X]),sr=(0,o.useCallback)(function(e){var t=U.dd.BROWSER_TAB;ue({context:t,initTime:Date.now(),source:"side_menu_".concat(e)}),(0,Je.nr)({action:U._b.CLICK,context:t,element:U.Q3.ONBOARDING,str_value:"start:log_in:side_menu_".concat(e),ai_provider:(0,Je.n$)(null==j?void 0:j.ai_provider)}),(0,$e.CC)((0,et.zP)(e,L))},[L,ue,null==j?void 0:j.ai_provider]),ir=(0,o.useCallback)(function(e){dt(e)},[dt]),cr={sendPrompt:Et,sendSummarizePrompt:At,sendToOperator:Mt,sendToResearch:Dt,cancelOperator:St,continueOperator:It,continueResearch:Pt,copyMessage:Rt,readMessage:Lt,takeScreenshot:Ut,submitFeedback:Ft,startNewConversation:Ct,startNewOperatorConversation:Ot,abortConversation:jt,changeActiveConversation:yt,renameConversation:wt,cleanConversation:ee,deleteFilesFromStartPage:te,deleteConversation:kt,deleteAllConversations:Q,pushNotification:Tt,closeNotification:W,acceptConsent:le,setAccountlessLoginData:ue,openSettings:_t,closeAriaPanel:zt,showCommandLine:Wt,openTabView:Gt,loadProfile:re,setUserSetting:Yt,setProfileMemoryEnabled:ie,removeMemoryItem:$t,clearMemory:ae,openAriaForumPage:Kt,openNeonMake:Zt,openNeonDo:qt,openNeonResearch:Qt,openNeonOneMinuteResearch:Xt,sendAiPrompt:er,openLinkInTabGroup:Vt,getActiveConversationImages:tr,sendSuggestionMessage:Jt,setConsentMessage:rr,clearConsentMessage:nr,acceptShoppingSuggestionsConsent:de,refreshPageSuggestions:ct,refreshChatSuggestions:lt,setChatMode:Ce,setPageContextEnabled:ar,setVoiceMode:or,saveDeployedHtmlUrl:ir,redirectToLogin:sr};return(0,o.useMemo)(function(){return cr},Object.values(cr))},st=function(){var e=(0,o.useContext)(je);if(!e)throw new Error("useApi must be used within an ApiProvider");return e};const it=r.p+"assets/e19f0dbadb27a23d6310.svg";var ct=r(38776),lt=function(e){switch(e){case V.XP.STOPPED:return ae;case V.XP.ONGOING:return it;default:return ne}},ut=function(e){var t=(0,w.Bd)().t,r=(0,c.D6)().product,n=st(),a=(0,Ze.b2)(e),s=a.activeConversation,i=a.researcherSteps,l=(0,W.d4)((0,G.XK)(s.id)),u=function(e){return(0,Y.az)(e)?V.XP.ONGOING:e===V.lj.Completed?V.XP.COMPLETED:V.XP.STOPPED}(l),d=(0,o.useMemo)(function(){return(0,ct.uU)(i,n.openLinkInTabGroup,e)},[i,n.openLinkInTabGroup,e]),f=(0,o.useMemo)(function(){return{title:t(u,{productName:r}),actions:d,iconUrl:lt(u),buttons:(0,ct.QF)(u,s.id,n,e)}},[t,u,r,d,s.id,n,e]);return{conversation:s,state:l,thinkingStatus:null,operatorStatus:null,overlay:f}},dt=r(80045),ft=r(96915),pt=r(51394);const mt=r.p+"assets/fe26ff730b7b3e4ff0a8.svg";var vt=(0,o.memo)(function(e){var t=e.expanded,r=e.colorVariable,n={backgroundColor:void 0===r?"var(--color-text-03)":r,maskImage:"url(".concat(mt,")")};return(0,C.jsx)("div",{className:(0,p.xW)("h-aria-5 w-aria-5",t?"-rotate-90":"rotate-90"),style:n})});vt.displayName="CollapseButton";const ht=vt;var xt=(0,o.memo)(function(e){var t=e.checked,r=void 0!==t&&t,n=e.id,a=e.onCheckboxChange;return(0,C.jsxs)("div",{className:(0,p.xW)("relative flex h-aria-6 w-aria-6 items-center justify-center rounded-full border",r?"border-color-accent-50":"border-color-text-03"),children:[r&&(0,C.jsx)("div",{className:"h-4.5 w-4.5 rounded-full bg-color-accent-50"}),(0,C.jsx)("input",{className:"absolute inset-0 h-full w-full cursor-pointer opacity-0",defaultChecked:r,id:n,onChange:a,type:"checkbox"})]})}),gt=(0,o.memo)(function(e){var t=e.currentModel,r=e.modelsList,n=e.onCurrentModelChange,a=r.expanded,s=void 0!==a&&a,i=r.groupName,c=r.models,l=(0,o.useState)(s),u=(0,Ce.A)(l,2),d=u[0],f=u[1],m=(0,o.useCallback)(function(){f(!d)},[d]),v=(0,o.useCallback)(function(e){var t=e.target.id,a=r.models.find(function(e){return e.id===t});e.stopPropagation(),a&&n(a)},[r.models,n]);return(0,C.jsxs)("div",{children:[i&&(0,C.jsxs)("div",{className:(0,p.xW)("flex cursor-pointer items-center justify-between p-aria-3 text-left",c.length>0&&d?"text-header-s-bold rounded-t-aria-radius-3 bg-color-neutral-42 hover:bg-color-level-2":"text-header-s"),onClick:m,onKeyDown:m,role:"button",tabIndex:0,children:[(0,C.jsx)("div",{"data-testid":ft.Y.MODEL_SELECTOR_MODELS_GROUP_NAME,children:i}),(0,C.jsx)(ht,{colorVariable:"var(--color-text-01)",expanded:!d})]},i),(0,C.jsx)("div",{className:(0,p.xW)("max-h-52 overflow-y-auto overflow-x-hidden",!i&&"rounded-t-aria-radius-3",c.length>0&&d?"block rounded-b-aria-radius-3 bg-color-level-2 p-aria-3 pr-aria-4":"hidden"),children:c.map(function(e,r,n){var a=e.description,o=e.id,s=e.name;return(0,C.jsxs)("div",{className:"cursor-default","data-testid":ft.Y.MODEL_SELECTOR_ITEM,children:[(0,C.jsxs)("div",{className:"border-b-1 flex items-center justify-between",children:[(0,C.jsxs)("div",{className:"text-body-s flex flex-col text-left",children:[(0,C.jsx)("div",{className:"first-letter:uppercase","data-testid":ft.Y.MODEL_SELECTOR_MODEL_NAME,children:s}),a&&(0,C.jsx)("div",{className:"mt-1 text-text-gray","data-testid":ft.Y.MODEL_SELECTOR_MODEL_DESC,children:a})]}),(0,C.jsx)("div",{children:(0,C.jsx)(xt,{checked:t&&t.id===o,id:o,onCheckboxChange:v})})]}),r!==n.length-1&&(0,C.jsx)("div",{className:"my-aria-3 h-px w-full bg-color-neutral-36"})]},o)})})]})}),bt=(0,o.memo)(function(e){var t=e.currentModel,r=e.modelsLists,n=e.modelsSelectorExpaned,a=e.onCurrentModelChange,s=(0,w.Bd)().t,i=Xe().navigateToSettings,c=(0,o.useCallback)(function(){return i({state:{initialTab:s("local_models")}})},[i,s]);return(0,C.jsxs)("div",{className:(0,p.xW)("flex flex-col gap-y-aria-2 rounded-aria-radius-3 text-color-text-01",n?"h-auto":"h-0 overflow-hidden"),children:[r.map(function(e,r){return(0,C.jsx)(gt,{currentModel:t,modelsList:e,onCurrentModelChange:a},e.groupName||"models-list-".concat(r))}),(0,C.jsx)("button",{className:"text-button-s mt-aria-4 w-full rounded-aria-radius-3 border border-color-neutral-36 p-aria-3 hover:bg-color-level-2",onClick:c,type:"button",children:s("go_to_settings")})]})});const yt=(0,o.memo)(function(e){var t=e.currentModel,r=e.modelsLists,n=e.onCurrentModelChange,a=(0,w.Bd)().t,s=(0,o.useState)(!1),i=(0,Ce.A)(s,2),c=i[0],l=i[1],u=(0,o.useRef)(null),d=(0,o.useCallback)(function(){l(!c)},[c]),f=(0,o.useCallback)(function(){l(!1)},[]);return(0,pt.Ls)(u,f),(0,C.jsxs)("div",{className:(0,p.xW)("absolute inset-x-0 top-full z-10 m-auto rounded-aria-radius-3 border border-color-neutral-36 bg-color-level-5 p-aria-3 text-center transition-all duration-500",c?"w-aria-37.5":"w-aria-13",t&&"flex flex-col gap-y-aria-2"),ref:u,children:[(0,C.jsxs)("div",{className:"z-1 flex flex-col gap-y-aria-2 text-color-text-01",onClick:d,onKeyDown:d,role:"button",tabIndex:0,children:[t&&(0,C.jsxs)("div",{className:"text-body-s flex flex-col",children:[(0,C.jsx)("div",{className:(0,p.xW)("model-name first-letter:uppercase",!c&&"overflow-hidden text-ellipsis whitespace-nowrap"),children:t.name}),t.description&&(0,C.jsx)("div",{className:"mt-1 text-nowrap text-text-gray",children:t.description})]}),(c||!t)&&(0,C.jsx)("div",{className:(0,p.xW)("text-header-s-bold",c&&"mb-aria-4"),children:a("choose_model")})]}),c&&(0,C.jsx)(bt,{currentModel:t,modelsLists:r,modelsSelectorExpaned:c,onCurrentModelChange:n})]})});var jt=r(41811),wt=r(64314);(0,jt.A)(function(e,t,r){return{items:e,handleItemToggling:t,getItemState:r}});var kt=(0,o.memo)(function(e){var t=e.conversationModel,r=(0,w.Bd)().t,n=st().startNewConversation,a=(0,s.QB_)().fetchedCloudModels,i=(0,s.Yei)(),c=i.localModels,l=i.currentModel,u=P().handleResolveCloudModels,d=(0,o.useCallback)(function(e){n(e.id)},[n]),f=function(e){var t=e.name;return{id:t,name:(0,p.fF)(t)}},m=function(e){var t=e.description,r=e.id,n=e.name;return{description:t,id:r,name:(0,p.fF)(n)}},v=function(e){var t=wt.O.IMAGE_GENERATION,r=wt.O.TEXT,n=wt.Y.AI_CLUSTER;return e?e.reduce(function(e,a){var o=a.type,s=a.provider;return o===t?e.imageModels.push(a):s===n?e.aiClusterModels.push(a):o===r&&s!==n&&e.otherTextModels.push(a),e},{imageModels:[],aiClusterModels:[],otherTextModels:[]}):{imageModels:[],aiClusterModels:[],otherTextModels:[]}}(a),h=v.aiClusterModels,x=v.imageModels,g=v.otherTextModels,b=(0,o.useMemo)(function(){var e=[];if(h.length){var t=h.map(f);e.push({expanded:t.some(function(e){return e.id===l}),groupName:r("cloud_models_opera_cluster"),models:t})}if(x.length){var n=x.map(f);e.push({expanded:n.some(function(e){return e.id===l}),groupName:r("cloud_models_image"),models:n})}if(g.length){var a=g.map(f);e.push({expanded:a.some(function(e){return e.id===l}),groupName:r("cloud_models_api"),models:a})}return c.length&&e.push({expanded:!0,models:c.map(m)}),e},[h,l,x,c,g,r]),y=(0,o.useMemo)(function(){var e=null!=t?t:l;return b.map(function(e){return e.models}).flat().find(function(t){return t.id===e})},[t,l,b]);return(0,o.useEffect)(function(){0===a.length&&u()},[a.length,u]),(0,C.jsx)(yt,{modelsLists:b,currentModel:y,onCurrentModelChange:d})});const Ct=r.p+"assets/eeae2b48ca966c7968e2.svg",Ot=r.p+"assets/4c99c85596fd0d1efdc6.svg",_t=r.p+"assets/4d4cf1ae6cb657ec748a.svg";var Nt=r(44530);const At=r.p+"assets/6280ba7f735335c19742.svg";var Et=function(){var e=(0,o.useState)(!1),t=(0,Ce.A)(e,2),r=t[0],n=t[1],a=(0,o.useRef)(null),s=(0,o.useCallback)(function(){var e;n(!1),null!==(e=a.current)&&void 0!==e&&e.open&&a.current.close()},[]),i=(0,o.useCallback)(function(){n(!0),a.current&&!a.current.open&&a.current.showModal()},[]),c=(0,o.useCallback)(function(e){e?i():s()},[i,s]),l=(0,o.useMemo)(function(){return{onClick:i}},[i]),u=(0,o.useMemo)(function(){return{open:r,dialogRef:a,onClose:s}},[s,r]);return(0,o.useEffect)(function(){var e=a.current;return function(){null!=e&&e.open&&e.close()}},[]),{referenceProps:l,dialogProps:u,isOpen:r,onOpenChange:c,closeDialog:s,openDialog:i}},St=function(e){var t=e.dialogRef,r=e.onClose,n=e.children,a=e.className,s=(0,c.sh)({overlayBackground:{operaOne:"bg-[--opera-confirmation-popup-background]",operaAir:""}},["overlayBackground"]);return(0,o.useEffect)(function(){var e=t.current;if(e){var n=function(e){e.preventDefault(),r()},a=function(e){e.preventDefault(),r()},o=function(t){t.target===e&&r()};return e.addEventListener("close",n),e.addEventListener("cancel",a),e.addEventListener("click",o),function(){e.removeEventListener("close",n),e.removeEventListener("cancel",a),e.removeEventListener("click",o)}}},[r,t]),(0,o.useEffect)(function(){var e=t.current;return function(){null!=e&&e.open&&e.close()}},[t]),(0,C.jsx)("dialog",{ref:t,className:(0,p.xW)("dialog","backdrop:bg-black/50 backdrop:backdrop-blur-sm","rounded-aria-radius-4 bg-color-level-5 p-0 open:flex open:items-center open:justify-center","max-h-[calc(100%-2rem)] max-w-[calc(100%-2rem)]",s.overlayBackground,a),children:n})};const It=r.p+"assets/bb03d2f3b29dc449eb02.svg";var Pt=r(39445),Mt=(0,o.memo)(function(e){var t=e.Icon,r=e.size,n=void 0===r?"12px":r,a=e.spacing,o=void 0===a||a,s=e.spacing17,i=void 0!==s&&s,c=e.className,l=e.title,u=void 0===l?"":l,d=e.width,f=e.backgroundSize,p=void 0===f?"cover":f;return(0,C.jsx)("div",{className:F()({"p-aria-3":!i&&o,"p-[7.5px]":i},c),title:u,children:(0,C.jsx)("div",{className:F()("img-icon","inset-0 bg-cover bg-center",c),style:{backgroundImage:"url(".concat(t,")"),backgroundSize:p,backgroundRepeat:"no-repeat",width:d||n,height:n}})})});Mt.displayName="ImgIcon";const Dt=Mt;var Tt=(0,o.forwardRef)(function(e,t){var r=e.type,n=e.disabled,a=e.className,s=e.iconClassName,i=e.onClick,l=e.icon,u=e.photo,d=e.testId,f=e.tabIndex,p=e.onKeyUp,m=e.onKeyDown,v=e.iconSize,h=void 0===v?16:v,x=e.title,g=e.border,b=e.caption,y=e.iconWidth,j=e.disabledClickable,w=e.color,k=(0,o.useRef)(null),O=t||k,_=(0,c.Mk)(O),N=(0,o.useMemo)(function(){return{primary:F()({"bg-color-neutral-90":n,"bg-color-accent-40":!n&&_,"bg-color-accent-50":!n&&!_}),secondary:F()({"bg-color-neutral-98":n,"bg-color-level-2":!n&&_,"bg-color-neutral-93":!n&&!_}),tertiary:F()({"bg-transparent text-color-text-03":n,"bg-color-level-2 text-color-text-01":!n&&_,"bg-transparent text-color-text-01":!n&&!_,"border border-color-neutral-36 ":g,"hover:bg-color-neutral-92-60":!0}),"context-menu":F()({"bg-transparent":n||!_,"bg-color-level-2 rounded-aria-radius-3":!n&&_}),transparent:F()({"bg-transparent":!0,"hover:bg-color-level-2":!0})}},[n,_,g]);return(0,C.jsxs)("button",{disabled:j?void 0:n,ref:O,onKeyUp:p,onKeyDown:m,tabIndex:null!=f?f:-1,"data-testid":d,onClick:i,title:x,className:F()("icon-button","relative flex h-8 w-8 shrink-0 items-center justify-center rounded-aria-radius-3","type-".concat(r),N[r],a,n&&!j?"cursor-not-allowed":"cursor-pointer"),children:[!u&&l&&(0,C.jsx)(Pt.A,{className:s,Icon:l,size:h,width:y,contrasting:!n&&"primary"===r,color:w||n&&"primary"===r?"bg-color-text-04":void 0,spacing17:17==h}),u&&(0,C.jsx)(Dt,{Icon:u,size:h,width:y,spacing17:17==h,className:"rounded-aria-radius-1"}),b&&(0,C.jsx)("p",{className:F()("absolute -bottom-6 w-max text-color-text-01"),children:b})]})}),Rt=(0,o.memo)(Tt);function Lt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ut(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Lt(Object(r),!0).forEach(function(t){(0,b.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lt(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Bt=function(e){var t=e.dialogProps,r=e.sourceUrls,n=(0,c.D6)().view,a=(0,w.Bd)().t,s=st().openLinkInTabGroup,i=(0,o.useCallback)(function(){r.map(function(e){return e.url}).forEach(n===A.Ss.Tab?s:p.CZ)},[s,r,n]);return(0,C.jsx)(St,Ut(Ut({},t),{},{className:"max-w-s min-w-96 bg-transparent",children:(0,C.jsxs)("div",{className:"w-full rounded-aria-radius-5 bg-color-level-5 p-aria-6 pr-aria-3 pt-aria-5 shadow-lg",children:[(0,C.jsxs)("div",{className:"mb-aria-2 flex items-center justify-between pr-aria-4",children:[(0,C.jsx)("p",{className:(0,p.xW)("text-subheader-m font-bold text-color-text-01"),children:a("sources_dialog_title")}),(0,C.jsx)(Rt,{type:"transparent",icon:Ot,iconSize:17,onClick:function(){t.onClose()}})]}),(0,C.jsx)("div",{className:"hover-scrollbar flex max-h-[min(calc(100vh-120px),320px)] flex-col gap-aria-4 divide-y overflow-y-auto pr-aria-3",children:r.map(function(e,t){return(0,C.jsxs)("div",{className:"border-color-neutral-88 first-of-type:-mt-2",children:[(0,C.jsxs)("div",{className:"mt-2 flex items-center justify-between",children:[(0,C.jsxs)("div",{className:"flex items-center gap-aria-3",children:[(0,C.jsx)("img",{src:(0,p.N0)(e.url),alt:"".concat((0,p.XM)(e.url)," favicon"),className:"h-6 w-6",onError:function(e){e.currentTarget.style.display="none"}}),(0,C.jsx)("span",{className:"text-body-m text-color-text-01",children:(0,p.XM)(e.url)})]}),(0,C.jsx)(Rt,{className:"-mr-[2px]",onClick:function(){return t=e.url,void(n===A.Ss.Tab?s(t):(0,p.CZ)(t));var t},icon:It,type:"transparent",color:"bg-color-text-02",iconSize:17})]}),(0,C.jsx)("p",{className:"text-body-m line-clamp-2 text-left text-color-text-03",children:e.title})]},t)})}),(0,C.jsx)(k.$n,{className:"mt-aria-5 [@media(max-height:480px)]:hidden",onClick:i,type:"tertiary",size:"xs",children:a("sources_dialog_open_all_button_title")})]})}))};const Ft=r.p+"assets/cb1531268507af9cd382.svg";var Ht=r(95626);const zt=r.p+"assets/13736a7807b7183f97b8.svg",Wt=r.p+"assets/26647c476c2b0e050b58.svg",Gt=r.p+"assets/aa7f509ad14ac7a6db69.svg",Vt=r.p+"assets/b9c1c4861058b100a689.svg",Yt=r.p+"assets/7a8673433fd67b3d59fa.svg";const Kt=(0,o.memo)(function(e){var t=e.feedbackRate,r=e.onCancel,n=e.onSubmit,a=(0,w.Bd)().t,s=(0,c.D6)(),i=s.product,l=s.isDarkTheme,u=(0,o.useState)(""),d=(0,Ce.A)(u,2),f=d[0],p=d[1],m=(0,o.useState)([]),v=(0,Ce.A)(m,2),x=v[0],g=v[1],b=(0,o.useState)(null),y=(0,Ce.A)(b,2),j=y[0],k=y[1],O=(0,o.useState)([]),_=(0,Ce.A)(O,2),N=_[0],E=_[1],S=(0,o.useRef)(null),I=(0,o.useCallback)(function(e){var t=e.currentTarget.value;p(t)},[]),P=(0,o.useCallback)(function(e){var t=e.currentTarget.value,r=S.current;r&&(t.length?(r.style.height="".concat(Math.min(r.scrollHeight,60),"px"),r.style.overflow=r.scrollHeight>60?"auto":"hidden"):(r.style.height="".concat(38,"px"),r.style.overflow="hidden"))},[]),M=(0,o.useCallback)(function(e){var t=e.currentTarget.id;E(function(e){var r=[].concat((0,de.A)(e),[t]);return N.includes(t)&&(r=e.filter(function(e){return e!==t})),r})},[N]),D=(0,o.useCallback)(function(){n(t,f,N,function(e){k({success:e});var t=setTimeout(function(){p(""),g([]),k(null),r(),clearTimeout(t)},e?2*h.Z2:5*h.Z2)})},[t,f,r,n,N]);(0,o.useEffect)(function(){p(""),E([]),t===h.g1.POSITIVE&&g([{id:"helpful",name:a("helpful")},{id:"detailed",name:a("detailed")},{id:"informative",name:a("informative")},{id:"knowledgeable",name:a("knowledgeable")},{id:"quick_solution",name:a("quick_solution")},{id:"humorous",name:a("humorous")},{id:"relevant",name:a("relevant_content")}]),t===h.g1.NEGATIVE&&g([{id:"out_of_date",name:a("out_of_date")},{id:"inaccurate",name:a("inaccurate")},{id:"dangerous",name:a("dangerous_or_problematic")},{id:"false",name:a("factually_incorrect")},{id:"denial",name:a("denial_when_it_should_not_happen")},{id:"harmful",name:a("harmful_or_offensive")},{id:"not_helpful",name:a("not_helpful")}])},[t,a]);var T=(0,o.useMemo)(function(){return i===A.Yt.Air&&l},[l,i]);return(0,C.jsx)("div",{className:"rounded-aria-radius-3 border border-color-neutral-36 p-aria-4","data-screenshotter-ignore":"true",children:j?(0,C.jsx)("div",{className:"text-body-m text-center text-color-text-03",children:j.success?a("good_feedback_thanks"):a("bad_feedback_thanks")}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("textarea",{className:"text-body-m h-9.5 w-full resize-none overflow-hidden rounded-aria-radius-3 border border-color-neutral-36 bg-transparent p-aria-4 text-color-text-01 outline-none placeholder:text-color-text-03",value:f,maxLength:1e3,onChange:I,onInput:P,placeholder:a("type_your_feedback_here"),ref:S}),(0,C.jsx)("div",{className:"mt-3 flex flex-wrap gap-aria-2",children:x.map(function(e){var t=e.id,r=e.name;return(0,C.jsx)("button",{className:F()("text-header-s h-aria-6 gap-x-aria-4 rounded-full px-aria-4",{"bg-[--bg-toggle-switch-on-hover] text-color-text-00":T&&N.includes(t),"bg-color-neutral-36 text-color-text-00":!T&&N.includes(t),"bg-color-neutral-98 text-color-text-03":!N.includes(t)}),id:t,onClick:M,type:"button",children:r},t)})}),(0,C.jsxs)("div",{className:"mt-aria-5 flex items-center justify-end gap-x-1.5",children:[(0,C.jsx)("button",{className:"text-button-s rounded-aria-radius-3 border border-color-neutral-36 px-aria-4 py-aria-3 text-color-text-01 hover:border-color-neutral-36 hover:bg-color-level-2",type:"button",onClick:r,children:a("cancel")}),(0,C.jsx)("button",{className:"text-button-s hover:bg-bg-color-accent-60 rounded-aria-radius-3 border border-color-accent-50 bg-color-accent-50 px-aria-4 py-aria-3 text-color-text-00 disabled:border-transparent disabled:bg-color-neutral-88 disabled:text-color-text-03",disabled:!Boolean(N.length),type:"button",onClick:D,children:a("send_feedback")})]})]})})});var $t=r(5223),qt=r(60721);const Qt=r.p+"assets/0f489bd074c83718b78a.svg";var Xt=r(4611),Zt=function(e){var t=e.onAction,r=e.retryLastMessage,n=e.userQuery,a=e.selectedModel,i=(0,s.uHm)().chatContext,l=(0,qt.N)().lastUserMessage,u=(0,s.VUi)().remoteConfig,d=(0,s.hiN)().userCapabilities,f=(0,c.D6)().view===A.Ss.Tab,p=st(),m=p.openNeonDo,v=p.sendPrompt,h=p.sendToResearch,x=(0,w.Bd)().t,g=(0,c.D6)().isNeonEdition,b=null==u?void 0:u.deep_research,y=(0,o.useCallback)(function(e){(0,Je.nr)({action:z._b.CLICK,element:z.Q3.CHAT,context:f?z.dd.BROWSER_TAB:z.dd.SIDEBAR,str_value:e},d)},[f,d]),j=(0,o.useCallback)(function(){r(),null==t||t()},[t,r]),k=(0,o.useCallback)(function(){n&&(y("ThinkHarder"),v(n,{thinkHarder:!0,selectedModel:a}),null==t||t())},[t,a,y,v,n]),O=(0,o.useCallback)(function(){n&&(y("NeonDo (Neon)"),m(n),null==t||t())},[n,y,m,t]),_=(0,o.useCallback)(function(){n&&(y("DeepResearch (Neon)"),h({query:n,isFromChat:!0}),null==t||t())},[n,y,h,t]),N=(0,o.useCallback)(function(){y("SearchWithGoogle"),(0,$e.CC)("https://www.google.com/search?q=".concat(encodeURIComponent(l))),null==t||t()},[l,t,y]);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)($t.$n,{type:"context-menu",className:"cursor-pointer justify-start gap-1 whitespace-nowrap p-aria-3",disabled:i.working,onClick:j,children:[(0,C.jsx)(Pt.A,{Icon:zt,size:17,spacing17:!0}),(0,C.jsx)("span",{className:"text-body-m",children:x("just_repeat")})]}),(0,C.jsxs)($t.$n,{type:"context-menu",className:"cursor-pointer justify-start gap-1 whitespace-nowrap p-aria-3",disabled:i.working,onClick:k,children:[(0,C.jsx)(Pt.A,{Icon:Xt,size:17,spacing17:!0}),(0,C.jsx)("span",{className:"text-body-m",children:x("think_harder")})]}),g&&(0,C.jsxs)($t.$n,{type:"context-menu",className:"cursor-pointer justify-start gap-1 whitespace-nowrap p-aria-3",disabled:i.working,onClick:O,children:[(0,C.jsx)(Pt.A,{Icon:Z,size:17,spacing17:!0}),(0,C.jsx)("span",{className:"text-body-m",children:x("perform_with_do")})]}),g&&b&&(0,C.jsxs)($t.$n,{type:"context-menu",className:"cursor-pointer justify-start gap-1 whitespace-nowrap p-aria-3",disabled:i.working,onClick:_,children:[(0,C.jsx)(Pt.A,{Icon:Nt,size:17,spacing17:!0}),(0,C.jsx)("span",{className:"text-body-m",children:x("perform_with_research")})]}),(0,C.jsxs)($t.$n,{type:"context-menu",className:"cursor-pointer justify-start gap-1 whitespace-nowrap p-aria-3",disabled:i.working,onClick:N,children:[(0,C.jsx)(Pt.A,{Icon:Qt,size:17,spacing17:!0}),(0,C.jsx)("span",{className:"text-body-m",children:x("search_with_google")})]})]})},Jt=r(11425),er=function(e){var t=e.children,r=e.title,n=e.placement,a=e.className;return(0,C.jsx)(Jt.m,{className:F()(a),placement:null!=n?n:"top",title:r,border:!1,offsetValue:4,children:function(e){var r=e.ref,n=e.referenceProps;return t({ref:r,referenceProps:n})}})};function tr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function rr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tr(Object(r),!0).forEach(function(t){(0,b.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tr(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var nr=function(e){return e.COPY="copy_message",e.FEEDBACK_GOOD="feedback_good",e.FEEDBACK_WRONG="feedback_wrong",e.READ="read_message_by_aria",e.RETRY="retry_last_message",e.SNAPSHOT="message_snapshot",e}({}),ar=(0,o.memo)(function(e){var t=e.disabled,r=e.iconUrl,n=e.isLastMessage,a=void 0!==n&&n,s=e.onButtonClick,i=e.userQuery,c=e.title,l=e.selectedModel,u={backgroundColor:t?"var(--color-text-03)":"var(--color-text-02)",maskImage:r?"url(".concat(r,")"):void 0,WebkitMaskImage:r?"url(".concat(r,")"):void 0,maskPosition:"center",maskRepeat:"no-repeat",maskSize:"17px"},d=(0,o.useRef)(null),f=(0,o.useState)(!1),p=(0,Ce.A)(f,2),m=p[0],v=p[1],h=(0,o.useState)(!1),x=(0,Ce.A)(h,2),g=x[0],b=x[1],y=(0,o.useCallback)(function(){if(d.current){var e=d.current.getBoundingClientRect();b(e.top>=window.innerHeight/2)}v(function(e){return!e})},[]),j=(0,o.useCallback)(function(){v(!1)},[]);return(0,o.useEffect)(function(){if(m){var e=function(e){var t=e.target,r=t.closest("[data-retry-dropdown]"),n=t.closest("[data-retry-button]");r||n||j()};return document.addEventListener("mousedown",e),function(){return document.removeEventListener("mousedown",e)}}},[m,j]),(0,o.useEffect)(function(){if(m){var e=function(e){"Escape"===e.key&&j()};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}},[m,j]),(0,C.jsxs)("div",{ref:d,className:"relative",children:[(0,C.jsx)(er,{title:c,className:F()({hidden:m}),children:function(e){var t=e.ref,r=e.referenceProps;return(0,C.jsx)("div",rr(rr({ref:t},r),{},{"data-retry-button":!0,role:"button",onClick:y,onKeyUp:(0,Y.lO)(y),tabIndex:0,className:"group relative disabled:cursor-not-allowed",children:(0,C.jsx)("div",{className:F()("message-action mr-aria-1 h-aria-6 w-aria-6 rounded-aria-radius-3 group-hover:bg-color-level-2",m?"bg-color-level-2":"bg-transparent"),children:(0,C.jsx)("div",{className:"h-full w-full",style:u})})}))}}),m&&(0,C.jsx)("div",{"data-retry-dropdown":!0,className:F()("contextmenu","absolute left-0 z-50 flex flex-col rounded-aria-radius-5 border border-color-neutral-93 bg-color-neutral-98 p-2 shadow-md",g&&a?"bottom-full mb-2":"top-full mt-2"),children:(0,C.jsx)(Zt,{onAction:j,retryLastMessage:s,userQuery:i,selectedModel:l})})]})}),or=(0,o.memo)(function(e){var t=e.disabled,r=e.iconClasses,n=void 0===r?"":r,a=e.iconUrl,o=e.idAttr,s=e.onButtonClick,i=e.title,c={backgroundColor:t?"var(--color-text-03)":"var(--color-text-02)",maskImage:"url(".concat(a,")"),maskPosition:"center",maskRepeat:"no-repeat",maskSize:"17px"};return(0,C.jsx)(er,{title:i,children:function(e){var r=e.ref,a=e.referenceProps;return(0,C.jsx)("button",rr(rr({ref:r},a),{},{className:"group relative disabled:cursor-not-allowed",disabled:t,id:o,onClick:s,type:"button",children:(0,C.jsx)("div",{className:"message-action mr-aria-1 h-aria-6 w-aria-6 rounded-aria-radius-3 bg-transparent group-hover:bg-color-neutral-92-60",children:(0,C.jsx)("div",{className:F()("h-full w-full",n),style:c})})}))}})});or.displayName="MessageAction";var sr=(0,o.memo)(function(e){var t=e.buttonText,r=e.sourcesLinks,n=Et(),a=(0,o.useCallback)(function(){r.length&&n.openDialog()},[r,n]);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("button",{type:"button",className:"text-body-m flex h-6 cursor-pointer flex-row items-center gap-aria-2 rounded-aria-radius-3 pl-2 text-color-text-02 hover:bg-color-neutral-92-60",onClick:a,children:[(0,C.jsx)("p",{children:t}),(0,C.jsx)("div",{className:"flex flex-row",children:r.slice(0,3).map(function(e,t){return(0,C.jsx)("img",{className:"h-6 w-6 rounded-aria-radius-2 bg-color-neutral-98 p-1",src:(0,p.N0)(e.url),alt:"".concat(e.title," favicon"),onError:function(e){e.currentTarget.style.display="none"}},t)})})]}),(0,C.jsx)(Bt,{dialogProps:n.dialogProps,sourceUrls:r})]})}),ir=(0,o.memo)(function(e){var t,r=e.message,n=e.chatType,a=e.isCopyAvailable,i=e.isFeedbackAvailable,l=e.isLoadingAudio,d=void 0!==l&&l,p=e.isReading,m=e.isReaderAvailable,v=e.isRetryAvailable,x=e.isSnapshotAvailable,g=e.isSnapshotPending,b=e.isLastMessage,y=void 0!==b&&b,j=e.copyMessage,k=e.readMessage,O=e.sendPrompt,_=e.retryFiles,N=e.retrySkills,E=e.submitFeedback,S=e.takeMessageScreenshot,I=e.userQuery,P=e.selectedModel,M=(0,w.Bd)().t,D=(0,o.useRef)(null),T=(0,s.hiN)().userCapabilities,R=(0,c.D6)().view===A.Ss.Tab,L=(0,o.useState)(null),U=(0,Ce.A)(L,2),B=U[0],F=U[1],H=(0,s.Ybv)().isSourceLinksEnabled,W=(0,o.useCallback)(function(){F(null)},[]),G=(0,o.useCallback)(function(){var e=(0,u.A)(f().mark(function e(t,n,a,o){var s;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t){e.next=2;break}return e.next=1,E(r,{feedbackRate:t,feedbackComment:n,feedbackOptions:a});case 1:s=e.sent,o(s);case 2:case"end":return e.stop()}},e)}));return function(t,r,n,a){return e.apply(this,arguments)}}(),[r,E]),Y=(0,o.useMemo)(function(){var e;return(null===(e=r.extraContent)||void 0===e||null===(e=e.sources)||void 0===e?void 0:e.sourceList)||[]},[null===(t=r.extraContent)||void 0===t||null===(t=t.sources)||void 0===t?void 0:t.sourceList]),K=(0,o.useMemo)(function(){return d?Gt:p?te:Wt},[d,p]),$=(0,o.useCallback)(function(e){(0,Je.nr)({action:z._b.CLICK,element:z.Q3.CHAT,context:R?z.dd.BROWSER_TAB:z.dd.SIDEBAR,str_value:e},T)},[R,T]),q=(0,o.useCallback)(function(){$("CopyToClipboard"),j(r)},[j,r,$]),Q=(0,o.useCallback)(function(){$("VoiceRead(Neon)"),k(r)},[$,k,r]),X=(0,o.useCallback)(function(){$("JustRepeat"),O&&I&&O(I,{files:_,skills:N,selectedModel:P})},[O,I,_,N,P,$]),Z=(0,o.useCallback)((0,u.A)(f().mark(function e(){return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:$("TakeSnapshot"),null==S||S();case 1:case"end":return e.stop()}},e)})),[$,S]),J=(0,o.useCallback)(function(){$("Like"),F(h.g1.POSITIVE)},[$]),ee=(0,o.useCallback)(function(){$("Dislike"),F(h.g1.NEGATIVE)},[$]);return(0,o.useEffect)(function(){if(null!==B&&D.current){var e=D.current,t=new IntersectionObserver(function(t){t.forEach(function(t){t.isIntersecting||e.scrollIntoView({behavior:"smooth",block:"center"})})},{threshold:1});return t.observe(e),function(){return t.disconnect()}}},[B]),(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"my-aria-3 flex items-center","data-screenshotter-ignore":"true",children:[i&&(0,C.jsxs)(C.Fragment,{children:[n===V.He.Chat&&(0,C.jsx)(or,{title:M("like"),buttonTitle:null===B?M("good_answer"):void 0,iconUrl:Yt,idAttr:nr.FEEDBACK_GOOD,onButtonClick:J}),n===V.He.Chat&&(0,C.jsx)(or,{title:M("dislike"),buttonTitle:null===B?M("wrong_answer"):void 0,iconUrl:Vt,idAttr:nr.FEEDBACK_WRONG,onButtonClick:ee})]}),v&&n===V.He.Chat&&(0,C.jsx)(ar,{title:M("regenerate_options"),iconUrl:zt,idAttr:nr.RETRY,onButtonClick:X,isLastMessage:y,userQuery:I,selectedModel:P}),m&&n===V.He.Chat&&(0,C.jsx)(or,{title:M("read_aloud"),iconClasses:d?"animate-spin":"",iconUrl:K,idAttr:nr.READ,onButtonClick:Q}),a&&(0,C.jsx)(or,{title:M("copy"),iconUrl:Ht,idAttr:nr.COPY,onButtonClick:q}),x&&(0,C.jsx)(or,{title:M("take_snapshot"),disabled:g,iconUrl:Ft,idAttr:nr.SNAPSHOT,onButtonClick:Z}),Boolean(Y.length)&&H&&(0,C.jsx)(sr,{buttonText:M("sources"),sourcesLinks:Y})]}),(0,C.jsx)("div",{className:"mt-aria-2",ref:D,children:i&&B&&(0,C.jsx)(Kt,{feedbackRate:B,onCancel:W,onSubmit:G})})]})});or.displayName="MessageActions";const cr=ir;var lr=r(91974);const ur=r.p+"assets/dbc9d91e1c9d10ca6a18.svg",dr=r.p+"assets/f1c172941d1c38c3e93e.svg",fr=r.p+"assets/aa6f950f5610ada7737f.svg";var pr={left:{classes:"left-aria-6",iconUrl:mt},right:{classes:"right-aria-6",iconUrl:fr}},mr=(0,o.memo)(function(e){var t=e.onClick,r=e.side,n=pr[r],a=n.classes,s=n.iconUrl,i=(0,o.useCallback)(function(){t(r)},[t,r]);return(0,C.jsx)("button",{className:(0,p.xW)("absolute z-1 h-aria-7 w-aria-7 rounded-aria-radius-3 bg-color-neutral-92-60 opacity-0 backdrop-blur-md transition-opacity group-hover:opacity-100",a),onClick:i,style:{top:"calc(50% - 12px)"},children:(0,C.jsx)("div",{className:"h-full w-full",style:{backgroundColor:"var(--color-text-01)",maskImage:"url(".concat(s,")"),maskRepeat:"no-repeat",maskPosition:"center center",maskSize:"24px"}})})}),vr=(0,o.memo)(function(e){var t=e.imageAlt,r=e.imageSrc;return(0,C.jsx)("img",{alt:t,className:"external-link-section-image h-[164px] w-[174px] rounded-aria-radius-6 object-cover",src:r})}),hr=(0,o.memo)(function(e){var t=e.items,r=e.size,n=e.sectionTitle,a=e.sectionDescription,s=(0,o.useRef)(null),i=(0,o.useState)(!1),c=(0,Ce.A)(i,2),l=c[0],u=c[1],d=(0,o.useState)(!1),f=(0,Ce.A)(d,2),m=f[0],v=f[1],h=(0,o.useCallback)(function(e){var t;null===(t=s.current)||void 0===t||t.scrollBy({left:"left"===e?-108:108,behavior:"smooth"})},[]),x=(0,o.useCallback)(function(){var e=s.current;if(e){var t=e.clientWidth,r=e.scrollWidth,n=e.scrollLeft;u(r>t&&n>0),v(n+t<r)}},[]);return(0,o.useEffect)(function(){return x(),window.addEventListener("resize",x),function(){window.removeEventListener("resize",x)}},[x]),(0,C.jsxs)("div",{className:(0,p.xW)("external-links-section thin-scrollbar group relative","pb-aria-2.5"),children:[(0,C.jsxs)("div",{className:"items-left flex w-full select-none flex-col justify-between gap-1 py-aria-4 text-left outline-none",children:[(0,C.jsx)("div",{className:"text-header-m text-color-text-01 first-letter:uppercase",children:n}),(0,C.jsx)("div",{className:"text-body-l text-color-text-03",children:a})]}),(0,C.jsxs)("div",{className:(0,p.xW)("hover-scrollbar-horizontal w-full items-end gap-x-aria-3 overflow-x-auto pb-aria-2.5","flex"),onScroll:x,ref:s,children:[l&&(0,C.jsx)(mr,{onClick:h,side:"left"}),t.map(function(e){var t,n=e.imageUrl,a=e.thumbnailUrl,o=n||a;return(0,C.jsx)("button",{className:(0,p.xW)("small"!==r&&"w-[174px] flex-shrink-0"),onClick:(t=e.link,function(){(0,p.CZ)(t)}),children:(0,C.jsxs)("div",{className:(0,p.xW)("external-link-section",r,"big"===r?"gap-aria-4":"gap-aria-2","flex flex-col rounded-aria-radius-6"),children:["recipe"===r&&o&&(0,C.jsx)(vr,{imageAlt:e.title,imageSrc:o}),"small"!==r&&(0,C.jsxs)("div",{className:(0,p.xW)("big"===r?"text-body-m":"text-body-s","flex flex-col gap-y-aria-1 overflow-hidden text-ellipsis text-left text-color-text-01"),children:[(0,C.jsx)("div",{className:(0,p.xW)("",e.price?"line-clamp-1":"line-clamp-2"),children:e.title}),e.price&&(0,C.jsx)("div",{className:"line-clamp-1",children:e.price})]})]})},e.title)}),m&&(0,C.jsx)(mr,{onClick:h,side:"right"})]})]})}),xr=r(90948),gr={backgroundImage:"url(".concat(xr,")")},br=(0,o.memo)(function(e){var t=e.suggestion,r=(0,c.D6)().source,n=(0,s.hiN)().userCapabilities;(0,o.useEffect)(function(){(0,Je.nr)({action:z._b.IMPRESSION,element:z.Q3.SIA,context:(0,Je.g$)(r),ai_provider:(0,Je.n$)(null==n?void 0:n.ai_provider),str_value:(0,De.Zd)(t.searchTerm)})},[r,null==n?void 0:n.ai_provider,t.searchTerm]);var a=(0,o.useCallback)(function(){(0,Je.nr)({action:z._b.CLICK,element:z.Q3.SIA,context:(0,Je.g$)(r),ai_provider:(0,Je.n$)(null==n?void 0:n.ai_provider),str_value:(0,De.Zd)(t.searchTerm)}),(0,p.CZ)(t.searchUrl)},[r,t.searchTerm,t.searchUrl,null==n?void 0:n.ai_provider]);return(0,C.jsxs)("button",{className:"text-body-m flex h-8 cursor-pointer items-center gap-aria-2 text-nowrap rounded-aria-radius-3 border border-color-neutral-88 bg-transparent p-2 text-color-text-01 hover:bg-color-neutral-92",onClick:a,type:"button",children:[(0,C.jsx)("div",{className:"h-aria-5 w-aria-5 bg-contain bg-no-repeat",style:gr}),t.searchTerm]})});const yr=(0,o.memo)(function(e){var t=e.suggestions,r=(0,w.Bd)().t;return(0,C.jsx)("div",{className:"search-suggestions-section thin-scrollbar",children:(0,C.jsxs)("div",{className:"pb-aria-4",children:[(0,C.jsxs)("div",{className:"items-left flex w-full select-none flex-col justify-between gap-1 py-aria-4 text-left outline-none",children:[(0,C.jsx)("div",{className:"text-header-m text-color-text-01 first-letter:uppercase",children:r("explore_google_suggestions")}),(0,C.jsx)("div",{className:"text-body-l text-color-text-03",children:r("here_are_some_links")})]}),(0,C.jsx)("div",{className:(0,p.xW)("gap-aria-2 pb-aria-2","flex flex-col items-start"),children:t.suggestionList.map(function(e){return(0,C.jsx)(br,{suggestion:e},e.searchTerm)})})]})})});var jr=(0,o.memo)(function(e){var t=e.text,r=e.className,n=e.onClick,a=(0,C.jsx)("p",{className:"text-color-text-02",children:t}),o=F()("suggestion","flex flx-row w-full p-2 pr-3.5 text-left text-body-m bg-color-neutral-98 rounded-aria-radius-3 gap-1.5 hover:bg-color-neutral-92-60",r);return n?(0,C.jsxs)("button",{type:"button",onClick:n,className:o,children:[(0,C.jsx)("div",{className:"h-full",children:(0,C.jsx)("div",{className:"air-rounded-full flex h-8 w-8 shrink-0 items-center justify-center rounded-aria-radius-3 bg-color-neutral-92-60",children:(0,C.jsx)(Pt.A,{Icon:ne,size:"17px",spacing:!1})})}),(0,C.jsx)("div",{className:"flex items-center",children:a})]}):(0,C.jsx)("div",{className:o,children:a})}),wr=function(e){var t=e.list,r=e.className;return(0,C.jsx)("div",{className:F()("w-full",r),children:(0,C.jsx)("ul",{className:"m-0 list-none p-0",children:t.map(function(e,t){return(0,C.jsx)("li",{className:"border-color-neutral-93 last:mb-0",children:(0,C.jsx)(jr,{text:e.text,className:F()(e.className,"my-1"),onClick:e.onClick})},"".concat(e.text,"-").concat(t))})})})},kr=(0,o.memo)(wr),Cr=function(e){var t=e.questions,r=e.selectedModel,n=st().sendPrompt,a=(0,c.D6)().source,i=(0,s.hiN)().userCapabilities,l=(0,o.useMemo)(function(){return t.map(function(e){return{text:e,onClick:function(){(0,Je.nr)({action:z._b.CLICK,element:z.Q3.CHAT,context:(0,Je.g$)(a),str_value:"ChatSuggestion"},i),n(e,{selectedModel:r})}}})},[a,t,r,n,i]);return(0,C.jsx)("div",{className:"my-aria-4 w-fit",children:(0,C.jsx)(kr,{list:l})})};function Or(e){var t=e.data,r=e.selectedModel,n=(0,w.Bd)().t,a=(0,c.D6)().isNeonEdition,o=t.imagesList,s=void 0===o?[]:o,i=t.gamesList,l=void 0===i?[]:i,u=t.shoppingList,d=void 0===u?[]:u;return(0,C.jsxs)("div",{"data-screenshotter-ignore":"true",children:[Boolean(s.length)&&(0,C.jsx)(hr,{items:s,sectionTitle:n("check_these_out"),sectionDescription:n("here_are_some_items"),size:"recipe"}),Boolean(l.length)&&(0,C.jsx)(hr,{items:l,sectionTitle:n("multi_modal_answer_games_list_slider_title"),sectionDescription:n("here_are_some_items"),size:"recipe"}),Boolean(d.length)&&(0,C.jsx)(hr,{items:d,sectionTitle:n("check_these_out"),sectionDescription:n("here_are_some_items"),size:"recipe"}),t.suggestions&&!a&&(0,C.jsx)(yr,{suggestions:t.suggestions}),t.followUpQuestions&&(0,C.jsx)(Cr,{questions:t.followUpQuestions,selectedModel:r})]})}var _r=(0,o.memo)(Or);_r.displayName="ExtraContent";const Nr=_r;var Ar=r(41319),Er=r(91905),Sr=r(82629),Ir=r(65434),Pr=r(43819),Mr=["node","className","children"];function Dr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}const Tr=function(e){var t,r=e.node,n=e.className,a=e.children,s=(0,dt.A)(e,Mr),i=null!==(t=null==r?void 0:r.tagName)&&void 0!==t?t:"h1";return(0,o.createElement)(i,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Dr(Object(r),!0).forEach(function(t){(0,b.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dr(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({className:(0,p.xW)("my-[1em] leading-[1.4]",{h1:"response-header-1",h2:"response-header-2",h3:"response-header-3",h4:"response-header-4",h5:"response-header-5",h6:"response-header-6"}[i],n)},s),a)};var Rr=r(40961);const Lr=r.p+"assets/060cff0a469a697f5642.svg",Ur=r.p+"assets/c37af6e2e880b85c52cf.svg";var Br=(0,o.memo)(function(e){var t=e.type===z.vt.UPLOADED_FILE?Ft:Ur;return(0,C.jsx)(Pt.A,{className:"!p-0",Icon:t,maskSize:"contain",size:17,spacing17:!0})}),Fr=function(e){var t=e.disabled,r=e.onClick,n=e.variant;return(0,C.jsx)(Rt,{disabled:t,icon:"prev"===n?mt:fr,iconSize:17,onClick:r,type:"tertiary"})};const Hr=function(e){var t=e.onClose,r=e.previewImageUrl,n=e.singleImage,a=e.singleImageName,i=(0,o.useRef)(null),l=(0,o.useRef)(null),u=(0,w.Bd)().t,d=st().getActiveConversationImages,f=(0,c.D6)().source,m=(0,s.hiN)().userCapabilities,v=d(),h=(0,o.useMemo)(function(){var e;n?e=[{name:a||r,type:z.vt.UPLOADED_FILE,url:r}]:e=v.length?v:[{name:(0,p.Jt)(r),type:z.vt.UPLOADED_FILE,url:r}];return e},[v,r,n,a]),x=(0,o.useState)(h.findIndex(function(e){return e.url===r})||0),g=(0,Ce.A)(x,2),b=g[0],y=g[1],j=h.length>1,k=h[b],O=(0,o.useCallback)(function(){t()},[t]),_=(0,o.useCallback)(function(){y(function(e){return e-1})},[]),N=(0,o.useCallback)(function(){y(function(e){return e+1})},[]);return(0,o.useEffect)(function(){var e=function(e){"Escape"===e.key&&(e.preventDefault(),e.stopPropagation(),O())};return document.addEventListener("keydown",e,!0),function(){return document.removeEventListener("keydown",e,!0)}},[O]),(0,o.useEffect)(function(){return window.addEventListener("resize",O),function(){window.removeEventListener("resize",O)}},[O]),(0,o.useEffect)(function(){l.current&&l.current.focus()},[]),(0,Rr.createPortal)((0,C.jsx)("dialog",{id:"image-preview",className:(0,p.xW)("overlay","backdrop-blur-sm","fixed inset-x-0 inset-y-0 z-20 h-screen w-screen bg-color-neutral-92-60 focus-visible:outline-0"),open:!0,role:"presentation",onClick:function(e){l.current&&l.current===e.target&&t()},onBlur:function(e){if(e.target!==i.current){var r=e.nativeEvent;"focusout"!==r.type||r.relatedTarget||t()}},ref:l,children:(0,C.jsxs)("div",{className:"relative flex h-full w-full flex-col justify-between",children:[(0,C.jsxs)("div",{id:"image-preview-actions",className:"flex items-center justify-between gap-aria-2 p-aria-5",children:[(0,C.jsxs)("div",{className:"text-body-s flex flex-col gap-y-aria-2",children:[(0,C.jsxs)("div",{className:"flex items-center gap-x-aria-2 text-color-text-01",children:[(0,C.jsx)(Br,{type:k.type}),(0,C.jsx)("div",{children:u(k.type)})]}),(0,C.jsx)("div",{className:"text-color-text-03",children:k.name})]}),(0,C.jsxs)("div",{className:"flex items-center",children:[j&&(0,C.jsxs)("div",{className:"text-body-s mr-aria-3 text-color-text-03",children:[b+1,"/",h.length]}),(0,C.jsx)(Rt,{testId:ft.Y.IMG_PREVIEW_DOWNLOAD_BUTTON,type:"tertiary",icon:Lr,onClick:function(e){e.stopPropagation(),(0,Je.nr)({action:z._b.CLICK,element:z.Q3.CHAT,context:(0,Je.g$)(f),str_value:"DownloadFile"},m);var t=document.createElement("a");t.href=k.url,t.download=k.name.toLowerCase().split(" ").join("_"),t.click()},ref:i,iconSize:17}),(0,C.jsx)(Rt,{testId:ft.Y.IMG_PREVIEW_CLOSE_BUTTON,type:"tertiary",onClick:t,icon:Ot,iconSize:17})]})]}),(0,C.jsx)("div",{className:"mb-aria-6 flex grow flex-col items-center justify-center gap-y-aria-6 overflow-hidden",children:(0,C.jsxs)("div",{className:"flex items-center gap-x-aria-7",children:[j&&(0,C.jsx)(Fr,{disabled:0===b,onClick:_,variant:"prev"}),(0,C.jsx)("div",{className:"grow",children:(0,C.jsx)("img",{className:"m-auto max-h-full max-w-full cursor-default text-color-text-01",alt:k.name,src:k.url,draggable:!1})}),j&&(0,C.jsx)(Fr,{disabled:b===h.length-1,onClick:N,variant:"next"})]})}),j&&(0,C.jsx)("div",{className:"mb-aria-6 flex select-none items-center justify-center gap-x-aria-3",children:h.map(function(e,t){var r=e.name,n=e.thumbnailUrl,a=e.url,o=b===t;return(0,C.jsxs)("button",{className:"relative overflow-hidden rounded-aria-radius-3",onClick:function(){y(t)},children:[!o&&(0,C.jsx)("span",{className:"absolute left-0 top-0 h-full w-full bg-image-viewer-thumbnail-gradient"}),(0,C.jsx)("img",{alt:r,className:(0,p.xW)(o?"h-aria-9 w-aria-9":"h-aria-8 w-aria-8"),src:null!=n?n:a})]},a)})})]})}),document.body)};var zr=r(44359),Wr=r(19853),Gr=r.n(Wr);function Vr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Yr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vr(Object(r),!0).forEach(function(t){(0,b.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vr(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Kr="50% 50%";function $r(e){var t,r=(0,o.useState)(0),n=(0,Ce.A)(r,2),a=n[0],s=n[1];return(0,o.useEffect)(function(){!function(e,t){var r,n=Gr()(.74,.01,.27,.88),a=function(o){void 0===r&&(r=o);var s=o-r;if(s<e){var i=s/e,c=Math.floor(100*n(i));t(c),requestAnimationFrame(a)}};requestAnimationFrame(a)}(500,s)},[]),(0,C.jsx)("div",{className:"reveal-animation",style:Yr(Yr({},"radial-gradient"===e.type&&{WebkitMaskImage:(t=a,"radial-gradient(\n    circle at ".concat(Kr,",\n    rgba(0, 0, 0, 1) ").concat(t,"%,\n    rgba(0, 0, 0, 0) ").concat(t+function(e){return e<20?e/20*7:7}(t),"%\n  )")),transformOrigin:Kr}),"opacity"===e.type&&{opacity:"".concat(a,"%")}),children:e.children})}const qr=r.p+"assets/32e971d60c0691d5d2f1.webp",Qr=r.p+"assets/95c71b1bf88179e306bb.webp";var Xr=function(e){var t=e.src,r=e.alt,n=e.onLoad,a=e.withAnimation,s=(0,o.useId)(),i=(0,c.D6)().isDarkTheme,l=(0,o.useState)(!1),u=(0,Ce.A)(l,2),d=u[0],f=u[1],p=(0,o.useState)(!1),m=(0,Ce.A)(p,2),v=m[0],h=m[1],x=(0,o.useCallback)(function(e){f(!0);var t=e.naturalHeight,r=e.naturalWidth;n(r,t)},[n]);(0,o.useEffect)(function(){if(t&&t!==zr.r5){var e=new Image;e.src=t,e.onload=function(){return x(e)}}},[t,x]);var g=(0,C.jsx)("img",{"data-testid":ft.Y.MARKDOWN_GENERATED_IMG,id:"markdown-custom-image-".concat(s),src:t===zr.r5?"data:image/svg+xml;utf8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%221%22%20height%3D%221%22/%3E":t,alt:r,className:F()("w-full rounded-aria-radius-3 object-contain")});return(0,C.jsxs)(C.Fragment,{children:[!d&&t!==zr.r5&&(0,C.jsxs)("div",{className:"relative",children:[(0,C.jsx)("img",{className:"flex h-full w-full items-center justify-center rounded-aria-radius-3 object-contain",id:"markdown-custom-image-".concat(s),src:i?qr:Qr,alt:r}),(0,C.jsx)("div",{className:"absolute left-[calc(50%-14px)] top-[calc(50%-14px)] h-7 w-7 animate-spin rounded-full border-2 border-color-text-04 border-t-color-text-00"})]}),d&&(0,C.jsx)("button",{onClick:function(){h(!0)},children:a?(0,C.jsx)($r,{type:"opacity",children:g}):g},"image"),t&&t!==zr.r5&&v&&(0,C.jsx)(Hr,{onClose:function(){h(!1)},previewImageUrl:t},"viewer")]})};const Zr=function(e){var t=e.src,r=e.alt,n=(0,o.useState)(300),a=(0,Ce.A)(n,2),s=a[0],i=a[1],c=(0,o.useState)(300),l=(0,Ce.A)(c,2),u=l[0],d=l[1],f=(0,o.useState)(1),p=(0,Ce.A)(f,2),m=p[0],v=p[1],h=(0,o.useState)(t===zr.r5),x=(0,Ce.A)(h,1)[0],g=(0,o.useCallback)(function(e,t){var r=Math.min(600,globalThis.innerWidth-50),n=e,a=t;if(e>r||t>300){var o=r/e,s=300/t,c=Math.min(o,s);n=Math.round(e*c),a=Math.round(t*c)}i(n),d(a),v(n/a)},[]);return(0,o.useEffect)(function(){var e=function(){var e=globalThis.innerWidth-50;if(s>e){var t=Math.max(e,100),r=Math.round(t/m);i(t),d(r)}};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}},[s,m]),(0,C.jsx)("span",{className:F()("mx-0 mb-2 mt-4 block rounded-aria-radius-3",x&&"bg-color-neutral-98"),style:{transition:x?"width 0.2s ease, height 0.2s ease":void 0,width:"".concat(s,"px"),height:"".concat(u,"px")},children:(0,C.jsx)(Xr,{src:t,alt:r,onLoad:g,withAnimation:x})},"container")};var Jr=["className"],en=["className"],tn=["className"];function rn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function nn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rn(Object(r),!0).forEach(function(t){(0,b.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rn(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var an=r(82284),on=r(36612);const sn=r.p+"assets/0e7683ad632647e4558b.svg",cn=r.p+"assets/a43ce57eb33b4cd7cc79.svg";var ln=(0,o.createContext)(void 0),un=ln.Provider,dn=r(57418),fn=r(79734),pn=r(84885),mn=(0,fn.$)(pn.l);mn.registerAlias("plaintext","undefined");var vn=r(29204),hn=function(e){return e.CODE="code",e.PREVIEW="preview",e}({}),xn=(0,o.memo)(function(e){var t=e.iframeRef,r=e.isContentComplete,n=e.previewError,a=e.onSwitchToCode,o=e.onOpenShareDialog,s=(0,w.Bd)().t;return(0,C.jsxs)("div",{className:"relative",children:[(0,C.jsx)("iframe",{ref:t,src:"html_preview_sandbox.html",className:"w-full border-0",style:{height:"70vh"},sandbox:"allow-scripts allow-same-origin allow-forms",title:"HTML Preview"}),!r&&!n&&(0,C.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-color-level-2 bg-opacity-90",children:(0,C.jsx)("div",{className:"flex items-center gap-3",children:(0,C.jsx)("div",{className:"border-color-border-primary h-12 w-12 animate-spin rounded-full border-4 border-t-transparent"})})}),n&&(0,C.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-color-level-2 bg-opacity-95 p-4",children:(0,C.jsxs)("div",{className:"text-color-text-primary max-w-2xl rounded-lg bg-color-level-4 p-6 shadow-lg",children:[(0,C.jsxs)("div",{className:"mb-2 flex items-center gap-2",children:[(0,C.jsx)("svg",{className:"text-color-text-error h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,C.jsx)("h3",{className:"text-body-l font-semibold",children:"Preview Error"})]}),(0,C.jsx)("p",{className:"text-body-m text-color-text-secondary mb-3",children:"The HTML preview encountered a security restriction:"}),(0,C.jsx)("code",{className:"text-body-s text-color-text-primary block rounded bg-color-level-2 p-3 font-mono",children:n}),(0,C.jsx)("p",{className:"text-body-s text-color-text-secondary mb-4 mt-3",children:"This HTML uses features not allowed in sandbox mode. You can switch to Code view to see the source, or try deploying it to see if it works outside the sandbox."}),(0,C.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,C.jsx)(lr.$n,{variant:lr.Ak.Secondary,action:a,children:hn.CODE}),(0,C.jsx)(lr.$n,{variant:lr.Ak.Primary,action:o,children:s("deploy_button")})]})]})})]})});xn.displayName="HTMLPreview";const gn=xn;function bn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function yn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bn(Object(r),!0).forEach(function(t){(0,b.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bn(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var jn={iconCopy:Ht,downloadIcon:Lr,iconDone:sn,openInNewIcon:It,shareIcon:cn,codeBg:"transparent border border-secondary-1"},wn=[on.A],kn=function(e){return e.trim().toLowerCase().startsWith("<!doctype html>")};const Cn=function(e){var t,r,n=e.node,a=function(){var e=(0,o.useContext)(ln);if(void 0===e)throw new Error("useMarkdownContext must be used within a MarkdownProvider");return e}(),i=a.serverId,l=a.messageId,d=a.isStreaming,p=(0,ke.D)(),m=p.view,v=p.isNeonEdition,x=st(),g=x.pushNotification,b=x.saveDeployedHtmlUrl,y=(0,w.Bd)().t,j=(0,c.A$)(),k=j.clipboardService,O=j.filesService,_=j.loggerService,N=j.networkService,E=(0,vn.er)().handleDeleteDeployedHtmlUrl,S=(0,s.Yei)().currentModel,I=(0,s.hiN)().userCapabilities,P=(0,s.VUi)().remoteConfig,M=(0,o.useState)(!1),D=(0,Ce.A)(M,2),T=D[0],R=D[1],L=(0,o.useState)(!1),U=(0,Ce.A)(L,2),B=U[0],H=U[1],W=(0,o.useState)(!1),G=(0,Ce.A)(W,2),V=G[0],K=G[1],$=(0,o.useState)(!1),q=(0,Ce.A)($,2),Q=q[0],X=q[1],Z=(0,o.useState)(null),J=(0,Ce.A)(Z,2),ee=J[0],te=J[1],re=(0,o.useState)(null),ne=(0,Ce.A)(re,2),ae=ne[0],oe=ne[1],se=(0,o.useState)(!1),ie=(0,Ce.A)(se,2),ce=ie[0],le=ie[1],ue=(0,o.useState)(null),fe=(0,Ce.A)(ue,2),pe=fe[0],me=fe[1],ve=(0,o.useRef)(null),he=Et(),xe=he.closeDialog,ge=he.openDialog,be=he.dialogProps,ye=(0,o.useRef)(""),je=(0,o.useMemo)(function(){return function(e){var t,r,n,a,o=e.node,s=null==o||null===(t=o.children)||void 0===t?void 0:t[0],i=null!==(r=null==s||null===(n=s.properties)||void 0===n||null===(n=n.className)||void 0===n||null===(n=n[0])||void 0===n?void 0:n.replace("language-",""))&&void 0!==r?r:"plaintext",c=null==s||null===(a=s.children)||void 0===a||null===(a=a[0])||void 0===a?void 0:a.value,l=mn.listLanguages(),u=Object.keys(dn.h$).filter(function(e){return!dn.FL.includes(e)}),d=[].concat((0,de.A)(l),(0,de.A)(u)).includes(i)?i:"plaintext",f=function(e,t){return"```".concat(e,"\n").concat(t,"```")}(d,c);return{text:c,listingLanguage:d,codeListing:f,downloadableFormats:u}}({node:n})},[n]),we=je.listingLanguage,Oe=je.text,_e=je.codeListing,Ne=je.downloadableFormats,Ae=(0,o.useMemo)(function(){return function(e){for(var t=0,r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t&=t;return Math.abs(t).toString(36)}(Oe)},[Oe]),Ee=(0,vn.IZ)(i||"",l||"",Ae),Se=Ee.deployedUrl,Ie=Ee.fileId,Pe=m===A.Ss.Tab?z.dd.BROWSER_TAB:z.dd.SIDEBAR,Me=null!==(t=null==P?void 0:P.html_preview)&&void 0!==t&&t,De="html"===we&&Me,Te=!De||!(!(r=Oe)||0===r.trim().length)&&r.trim().toLowerCase().endsWith("</html>"),Re=De&&kn(Oe),Le=(0,o.useState)(function(){return De&&kn(Oe)?hn.PREVIEW:hn.CODE}),Ue=(0,Ce.A)(Le,2),Be=Ue[0],Fe=Ue[1],He=(0,o.useCallback)(function(){Fe(hn.CODE)},[]);(0,o.useEffect)(function(){Te||Be!==hn.PREVIEW||d?De&&Re&&Be===hn.CODE&&Fe(hn.PREVIEW):Fe(hn.CODE)},[Te,Re,De]),(0,o.useEffect)(function(){if(De){var e=function(e){e.data&&"SANDBOX_READY"===e.data.type&&K(!0)};return window.addEventListener("message",e),function(){return window.removeEventListener("message",e)}}},[De]),(0,o.useEffect)(function(){De&&V&&Be===hn.PREVIEW&&ve.current&&ve.current.contentWindow&&Te&&(ye.current!==Oe&&(me(null),ye.current=Oe),ve.current.contentWindow.postMessage({type:"UPDATE_HTML",html:Oe},"*"))},[De,V,Oe,Be,Te]),(0,o.useEffect)(function(){if(De){var e=function(e){var t;if("PREVIEW_ERROR"===(null===(t=e.data)||void 0===t?void 0:t.type)){var r=e.data.message||"An error occurred while rendering the preview";me(r)}};return window.addEventListener("message",e),function(){window.removeEventListener("message",e)}}},[De]);var ze=(0,o.useCallback)(function(e){k.writeText(Oe),e.currentTarget&&!T&&(R(!0),setTimeout(function(){return R(!1)},1500))},[k,T,Oe]);(0,o.useEffect)(function(){T&&g(y("copied"),"info")},[T,g,y]);var We=(0,o.useCallback)(function(){try{O.downloadFile(Oe,Oe.slice(0,10).replace(/\W/g,""),we),g(y("download_complete"),"success")}catch(e){_.error("File format not supported to save",we,e),g(y("file_is_not_supported"),"error")}(0,Je.nr)(yn({action:z._b.CLICK,element:z.Q3.CHAT,context:Pe,str_value:z.qW.SAVE_TO_FILE,model:(0,Je.E1)(v,"Aria"===S)},"Aria"!==S&&{model_version:S}),I)},[Pe,S,O,v,we,_,g,y,Oe,I]),Ge=(0,o.useCallback)(function(){Se?te(Se):(te(null),oe(null)),ge()},[Se,ge]),Ve=(0,o.useCallback)(function(){te(null),oe(null),xe()},[xe]),Ye=(0,o.useCallback)((0,u.A)(f().mark(function e(){var t,r,n,a,o,s,c;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return X(!0),oe(null),e.prev=1,e.next=2,N.postAuthorized({subUrl:h.r5.endpointShareHTML,body:JSON.stringify({conversation_id:i||"",message_id:l||"",code_block:Oe})});case 2:t=e.sent,te(t.url),i&&l&&b({conversationId:i,messageId:l,contentHash:Ae,deployedUrl:t.url,fileId:t.file_id}),e.next=4;break;case 3:e.prev=3,c=e.catch(1),_.error("Failed to share HTML",c),r="Failed to deploy website",c&&"object"===(0,an.A)(c)&&("string"==typeof(null===(n=(o=c).response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.detail)?r=null===(s=o.response)||void 0===s||null===(s=s.data)||void 0===s?void 0:s.detail:null!==(a=o.response)&&void 0!==a&&null!==(a=a.data)&&void 0!==a&&null!==(a=a.detail)&&void 0!==a&&a.message?r=o.response.data.detail.message:c instanceof Error&&o.message&&(r=o.message)),oe(r);case 4:return e.prev=4,X(!1),e.finish(4);case 5:case"end":return e.stop()}},e,null,[[1,3,4,5]])})),[Ae,_,l,N,b,i,Oe]),Ke=(0,o.useCallback)((0,u.A)(f().mark(function e(){var t;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Ie&&i&&l){e.next=1;break}return e.abrupt("return");case 1:return le(!0),e.prev=2,e.next=3,N.deleteAuthorized({subUrl:"".concat(h.r5.endpointDeleteWebsite,"/").concat(Ie)});case 3:E({conversationId:i,messageId:l,contentHash:Ae}),te(null),xe(),g(y("deleted"),"success"),e.next=5;break;case 4:e.prev=4,t=e.catch(2),_.error("Failed to delete deployed HTML",t),oe(y("error"));case 5:return e.prev=5,le(!1),e.finish(5);case 6:case"end":return e.stop()}},e,null,[[2,4,5,6]])})),[xe,Ie,E,Ae,_,l,N,g,i,y]),$e=(0,o.useCallback)(function(e){ee&&(k.writeText(ee),e.currentTarget&&!B&&(H(!0),setTimeout(function(){return H(!1)},1500)))},[k,B,ee]),qe=(0,o.useMemo)(function(){return T?jn.iconDone:jn.iconCopy},[T]),Qe=(0,o.useMemo)(function(){return B?jn.iconDone:jn.iconCopy},[B]);return(0,C.jsxs)("div",{className:F()("code-box",jn.codeBg,"my-2 overflow-hidden rounded-aria-radius-3"),children:[(0,C.jsxs)("div",{className:"text-body-s flex h-8 select-none flex-row items-center justify-between bg-color-neutral-93 px-2 text-color-text-01",children:[(0,C.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,C.jsx)("span",{children:we}),De&&(0,C.jsxs)("div",{className:"ml-2 flex flex-row gap-0.5 overflow-hidden rounded-md p-0.5",children:[(0,C.jsx)("button",{className:F()("text-body-s relative flex min-w-[60px] items-center justify-center rounded px-3 py-1 !capitalize transition-all duration-200",Be===hn.CODE?"text-color-text-primary bg-color-level-4":"text-color-text-primary"),onClick:function(){return Fe(hn.CODE)},children:hn.CODE}),(0,C.jsx)("button",{className:F()("text-body-s relative flex min-w-[60px] items-center justify-center rounded px-3 py-1 !capitalize transition-all duration-200",Be===hn.PREVIEW?"text-color-text-primary bg-color-level-4":Te||!Te&&d?"text-color-text-primary":"text-color-text-disabled cursor-not-allowed opacity-50"),onClick:function(){return(Te||!Te&&d)&&Fe(hn.PREVIEW)},disabled:!Te&&!d,title:Te?"":y("preview_disabled_title"),children:hn.PREVIEW})]})]}),(0,C.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,C.jsx)("div",{children:(0,C.jsx)(Rt,{testId:ft.Y.MARKDOWN_CODE_COPY_BUTTON,type:"context-menu",iconSize:17,className:"animate-fade-in-out -m-2 transition-opacity duration-500",tabIndex:-1,onClick:ze,onKeyUp:(0,Y.lO)(ze),icon:qe})}),Ne.includes(we)&&(0,C.jsx)("div",{children:(0,C.jsx)(Rt,{testId:ft.Y.MARKDOWN_CODE_DOWNLOAD_BUTTON,type:"context-menu",iconSize:17,className:"animate-fade-in-out -m-2 transition-opacity duration-500",tabIndex:-1,onClick:We,onKeyUp:(0,Y.lO)(We),icon:jn.downloadIcon})}),De&&(0,C.jsx)("div",{children:(0,C.jsx)(Rt,{testId:ft.Y.MARKDOWN_HTML_SHARE_BUTTON,type:"context-menu",iconSize:17,className:F()("animate-fade-in-out -m-2 transition-opacity duration-500",!Te&&"cursor-not-allowed opacity-50"),tabIndex:-1,onClick:Te?Ge:void 0,disabled:!Te,icon:jn.shareIcon})})]})]}),De?(0,C.jsxs)(C.Fragment,{children:[Be===hn.CODE&&(0,C.jsx)(Ar.oz,{className:"hover-scrollbar-horizontal",rehypePlugins:wn,children:_e}),(0,C.jsx)("div",{className:Be===hn.PREVIEW?"block":"hidden",children:(0,C.jsx)(gn,{iframeRef:ve,isContentComplete:Te,previewError:pe,onSwitchToCode:He,onOpenShareDialog:Ge})})]}):(0,C.jsx)(Ar.oz,{className:"hover-scrollbar-horizontal",rehypePlugins:wn,children:_e}),(0,C.jsx)(St,yn(yn({},be),{},{className:"rounded-lg p-5",children:(0,C.jsxs)("div",{className:"flex max-w-96 flex-col justify-between gap-3",children:[(0,C.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,C.jsx)("p",{className:F()("text-subheader-m font-bold text-color-text-01"),children:y("share_dialog_title")}),(0,C.jsx)(Rt,{type:"transparent",icon:Ot,iconSize:17,onClick:Ve})]}),Q?(0,C.jsxs)("div",{className:"flex items-center gap-3",children:[(0,C.jsx)("div",{className:"border-color-border-primary h-5 w-5 animate-spin rounded-full border-2 border-t-transparent"}),(0,C.jsx)("span",{className:"text-body-m text-color-text-secondary",children:y("deploying_message")})]}):!ee&&(0,C.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,C.jsx)("span",{className:"text-body-m text-color-text-secondary",children:y("share_subtitle")}),(0,C.jsx)("span",{className:"text-body-m text-color-text-secondary",children:y("share_subtitle_info")})]}),ae&&(0,C.jsx)("div",{className:"rounded p-3",children:(0,C.jsx)("p",{className:"text-body-m text-color-state-error",children:ae})}),ee&&(0,C.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,C.jsx)("p",{className:"text-body-m text-color-text-secondary",children:y("success_message")}),(0,C.jsxs)("div",{className:"flex items-center justify-between gap-1.5 rounded",children:[(0,C.jsx)("input",{id:"share-url",type:"text",value:ee,readOnly:!0,className:"text-body-m text-color-text-primary w-72 flex-1 rounded bg-color-neutral-92 p-1.5 outline-none"}),(0,C.jsx)(Rt,{type:"context-menu",iconSize:17,className:"animate-fade-in-out transition-opacity duration-500",tabIndex:-1,onClick:$e,onKeyUp:(0,Y.lO)($e),icon:Qe})]})]}),(0,C.jsxs)("div",{className:"flex gap-2",children:[!ee&&(0,C.jsx)(lr.$n,{variant:lr.Ak.Primary,action:Ye,disabled:Q,children:y("deploy_button")}),ee&&(0,C.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,C.jsx)(lr.$n,{variant:lr.Ak.Secondary,action:Ke,disabled:ce,children:y("stop_share")}),(0,C.jsx)(lr.$n,{variant:lr.Ak.Primary,action:function(){window.open(ee,"_blank","noopener,noreferrer")},children:y("share_open_button")})]})]})]})}))]})};var On=["node","className"],_n=["node","className"];function Nn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function An(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Nn(Object(r),!0).forEach(function(t){(0,b.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nn(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var En=["node","children","className"];function Sn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function In(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Sn(Object(r),!0).forEach(function(t){(0,b.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sn(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}const Pn=function(e){e.node;var t=e.children,r=e.className,n=(0,dt.A)(e,En);return(0,C.jsx)("blockquote",In(In({className:(0,p.xW)(r,"block rounded-[var(--opera-button-border-radius)] bg-[var(--opera-chatbot-blockquote-bg)]","my-[24px] flex w-fit text-[14px] font-normal italic leading-[24px]","[&&_p]:m-[8px]")},n),{},{children:t}))};var Mn=["className","children"];function Dn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Tn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Dn(Object(r),!0).forEach(function(t){(0,b.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dn(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Rn(e){var t=e.className,r=e.children,n=(0,dt.A)(e,Mn);return(0,C.jsx)("a",Tn(Tn({},n),{},{className:(0,p.xW)("inline align-baseline leading-5 text-color-text-01","transition-colors duration-200 ease-out","hover:text-color-text-a","cursor-default","bg-[repeating-linear-gradient(to_right,theme(colors.color-text-03)_0,theme(colors.color-text-03)_1px,transparent_1px,transparent_2px)]","hover:bg-[repeating-linear-gradient(to_right,theme(colors.color-text-a)_0,theme(colors.color-text-a)_1px,transparent_1px,transparent_2px)]","bg-[length:100%_1px] bg-[position:0_calc(100%+0px)] bg-no-repeat","pb-[2px]",t),children:r}))}const Ln=function(e){var t,r,n,a=e.children,l=e.contextType,u=e.href,d=e.messageLink,f=e.progress,m=st().openLinkInTabGroup,v=(0,s.hiN)().userCapabilities,h=(0,c.D6)().source,x=new RegExp(/^[^://]*:\/\//g),g=null!==(t=null==d?void 0:d.title)&&void 0!==t?t:u.replace(x,""),b=null!==(r=null==d?void 0:d.url)&&void 0!==r?r:u;(0,o.useEffect)(function(){var e,t=((null==d?void 0:d.meta)||{}).auditId;if(t&&(e=t),!e&&o.Children.count(a)){var r=o.Children.toArray(a).map(String).join("");e=(0,De.Zd)(r)}(0,Je.nr)({action:z._b.IMPRESSION,element:z.Q3.LINKIFY,context:(0,Je.g$)(h),str_value:e},v)},[null==d||null===(n=d.meta)||void 0===n?void 0:n.auditId,a,h,v,null==d?void 0:d.meta]);var y=(0,o.useCallback)(function(){var e,t=((null==d?void 0:d.meta)||{}).auditId;if(t&&(e=t),!e&&o.Children.count(a)){var r=o.Children.toArray(a).map(String).join("");e=(0,De.Zd)(r)}(0,Je.nr)({action:z._b.CLICK,element:z.Q3.LINKIFY,context:l,str_value:e},v)},[a,l,null==d?void 0:d.meta,v]),j=(0,o.useCallback)(function(e){y(),f||(e.preventDefault(),"CommandBar"!==l?m(b):"CommandBar"==l&&(chrome.tabs.create({active:!0,url:b}),(0,i.qT)()))},[l,b,m,f,y]);return(0,C.jsx)(Rn,{className:(0,p.xW)("cursor-pointer"),title:g,onPointerUp:j,children:(0,C.jsx)("span",{children:a})})};const Un=function(e,t,r,n){return function(a){var s=a.children,i=a.href,c=(0,o.useMemo)(function(){return null==t?void 0:t.find(function(e){var t=e.text;return e.url===i||t===s})},[s,i]);return(0,C.jsx)(Ln,{href:null!=i?i:"",progress:e,contextType:r,countryCode:null!=n?n:navigator.language,messageLink:c,children:s})}};var Bn=r(74567),Fn=r(47970),Hn=r(28620);function zn(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Wn(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Wn(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){i=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(i)throw o}}}}function Wn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Gn=function(e,t){return t.text.length-e.text.length};function Vn(e){return e?"text"===e.type?(e.value||"").length:"link"===e.type&&Array.isArray(e.children)?e.children.reduce(function(e,t){var r;return e+((null===(r=t.value)||void 0===r?void 0:r.length)||0)},0):0:0}function Yn(e,t){var r,n=0,a=zn(e);try{for(a.s();!(r=a.n()).done;){var o=r.value;if(o===t)break;n+=Vn(o)}}catch(e){a.e(e)}finally{a.f()}return n}function Kn(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return $n(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$n(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){i=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(i)throw o}}}}function $n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var qn=function(e){var t=e.links,r=void 0===t?[]:t,n=e.disabled,a=void 0!==n&&n,o=e.linkedMap,s=void 0===o?new Map:o;return function(e){a||0===r.length||(0,Fn.YR)(e,function(e,t,n){var a;if("link"===e.type||"inlineCode"===e.type||"code"===e.type)return Hn._Z;if("text"!==e.type)return Hn.IN;var o=Qn(e,r,s,e.position.start.offset);return(a=n.children).splice.apply(a,[t,1].concat((0,de.A)(o))),[Hn.IN,(t||0)+o.length]})}},Qn=function(e,t,r,n){var a,o=[e],s=Kn((0,de.A)(t).sort(Gn));try{for(s.s();!(a=s.n()).done;)for(var i=a.value.text,c=new RegExp("\\b".concat((0,De.Nt)(i),"\\b"),"g"),l=0;l<o.length;l++){var u,d=o[l];if("text"===d.type){var f=n+Yn(o,d),m=d.value||"",v=[],h=0;c.lastIndex=0;for(var x=null!==(u=r.get(i))&&void 0!==u?u:-1/0,g=void 0;null!==(g=c.exec(m));){var b=g.index,y=f+b;if(y-x-i.length>=1024){b>h&&v.push((0,Bn.text)(m.slice(h,b)));var j=(0,p.fX)(i);v.push((0,Bn.link)(j,void 0,(0,Bn.text)(i))),x=y,r.set(i,x),h=b+g[0].length}}h<m.length&&v.push((0,Bn.text)(m.slice(h))),v.some(function(e){return"link"===e.type})&&(o.splice.apply(o,[l,1].concat(v)),l+=v.length-1)}}}catch(e){s.e(e)}finally{s.f()}return o};function Xn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Zn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xn(Object(r),!0).forEach(function(t){(0,b.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xn(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Jn=[Er.A,[Sr.A,{singleDollarTextMath:!1}]],ea=[Ir.A,[Pr.A,{target:"_blank"}]],ta={h1:Tr,h2:Tr,h3:Tr,h4:Tr,h5:Tr,h6:Tr,ol:function(e){e.node;var t=e.className,r=(0,dt.A)(e,On);return(0,C.jsx)("ol",An({className:(0,p.xW)(t,"list-inside list-decimal","[&>li>p]:inline")},r))},ul:function(e){e.node;var t=e.className,r=(0,dt.A)(e,_n);return(0,C.jsx)("ul",An({className:(0,p.xW)(t,"[&>li]:custom-bullet pl-[18px] rtl:pr-[18px]")},r))},img:Zr,pre:Cn,table:function(e){var t=e.className,r=(0,dt.A)(e,Jr);return(0,C.jsx)("div",{className:"table-wrapper mb-5 mt-6 w-full flex-1 overflow-x-auto overflow-y-hidden pb-1",children:(0,C.jsx)("table",nn({className:(0,p.xW)(t,"markdown-table w-full border-separate border-spacing-[0px] break-words bg-transparent")},r))})},th:function(e){var t=e.className,r=(0,dt.A)(e,en);return(0,C.jsx)("th",nn({className:(0,p.xW)(t,"text-subheader-m bg-color-level-2 px-2 py-[9.5px] text-left")},r))},td:function(e){var t=e.className,r=(0,dt.A)(e,tn);return(0,C.jsx)("td",nn({className:(0,p.xW)(t,"text-body-l bg-color-level-2 px-2 py-[9.5px] text-left")},r))},blockquote:Pn},ra=(0,o.memo)(function(e){var t=e.text,r=e.links,n=e.color,a=void 0===n?"text-color-text-01":n,s=e.className,i=e.isStreaming,c=void 0!==i&&i,l=e.serverId,u=e.messageId,d=e.isCaretAllowed,f=function(e){var t=(0,o.useState)(!1),r=(0,Ce.A)(t,2),n=r[0],a=r[1];return(0,o.useEffect)(function(){if(e){var t=setInterval(function(){a(function(e){return!e})},250);return function(){return clearInterval(t)}}a(!1)},[e]),n?" ":""}(void 0!==d&&d),p=(0,o.useMemo)(function(){return Zn(Zn({},ta),{},{a:Un(c,r)})},[c,r]),m=(0,o.useMemo)(function(){return[].concat(Jn,[[qn,{links:r}]])},[r]);if(!t&&!c)return null;var v=(0,De.uh)(t),h=(0,De.am)(v),x="".concat(h.trim()).concat(f);return(0,C.jsx)(un,{value:{serverId:l,messageId:u,isStreaming:c},children:(0,C.jsx)("div",{className:F()("text-body-l min-h-6 gap-x-aria-3 rounded-aria-radius-3",a,s),children:(0,C.jsx)(Ar.oz,{className:"[&>p:not(:first-child)]:mt-4",remarkPlugins:m,rehypePlugins:ea,components:p,children:x})})})});ra.displayName="MarkdownMessage";const na=function(e){var t=e.image,r=(0,o.useCallback)(function(){(0,$e.CC)(t.link)},[t.link]);return(0,C.jsx)("div",{className:"rich-response-image my-4 w-full","data-testid":ft.Y.RICH_RESPONSE_GAMIFIED_IMG,onClick:r,onKeyUp:(0,Y.lO)(r),role:"button",tabIndex:-1,children:(0,C.jsx)("img",{alt:t.title,className:"mx-auto max-h-70 rounded-aria-radius-3",src:t.imageUrl,title:t.title})})};var aa=(0,o.memo)(function(e){var t=e.messages,r=e.extraContent,n=(null==r?void 0:r.gamesList)&&r.gamesList.length>0?t:t.length>0?[t[0]]:[];return(0,C.jsx)("div",{className:"relative",children:n.map(function(e){return(0,C.jsxs)("section",{children:[e.images_list&&e.images_list.map(function(t){return(0,C.jsx)(na,{richResponseId:e.id,image:t},t.link)}),(0,C.jsx)(ra,{text:e.text})]},e.id)})})}),oa=(0,o.memo)(aa);oa.displayName="MessagePicker";const sa=oa,ia=r.p+"assets/119f3e8d7e064a605fa9.svg",ca=r.p+"assets/c877593d55498c2af5ef.svg";function la(e){var t=function(e){return e===A.Yt.Neon?ca:ia}(e);return e===A.Yt.Neon?{maskImage:"url(".concat(t,")"),maskPosition:"center",maskRepeat:"no-repeat",maskSize:"contain"}:{backgroundImage:"url(".concat(t,")"),backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"contain"}}function ua(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return da(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?da(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){i=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(i)throw o}}}}function da(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var fa=function(e,t,r,n){if(1===t)return"100%";if(2===t&&n&&2===r.length){var a=(0,Ce.A)(r,2),o=a[0],s=a[1],i=o.width/o.height,c=s.width/s.height,l=i+c,u=i/l*100,d=c/l*100,f=Math.max(u,33),p=f/(f+Math.max(d,33))*100;return"".concat(0===e?p:100-p,"%")}return 2===t?"50%":3===t?"33.33%":"".concat(100/t,"%")},pa=function(e){var t=e.src,r=e.alt,n=e.width,a=(0,o.useState)(!1),s=(0,Ce.A)(a,2),i=s[0],c=s[1],l=(0,o.useRef)(null);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("button",{onClick:function(){c(!0)},className:"relative h-full overflow-hidden rounded-aria-radius-3",style:{width:n},children:(0,C.jsx)("img",{src:t,alt:r,className:"h-full w-full object-cover object-center",loading:"lazy",ref:l})}),t&&i&&(0,C.jsx)(Hr,{onClose:function(){c(!1)},previewImageUrl:t})]})},ma=function(e){var t=e.images,r=function(e){var t=(0,o.useState)([]),r=(0,Ce.A)(t,2),n=r[0],a=r[1],s=(0,o.useState)(!1),i=(0,Ce.A)(s,2),c=i[0],l=i[1];return(0,o.useEffect)(function(){if(e&&0!==e.length){var t=function(){var t=(0,u.A)(f().mark(function t(){var r,n,o,s,i;return f().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=[],n=ua(e),t.prev=1,s=f().mark(function e(){var t,n,a,s;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.value,e.prev=1,n=new Image,a=new Promise(function(e){n.onload=function(){e({width:n.naturalWidth,height:n.naturalHeight})},n.onerror=function(){e({width:1,height:1})}}),n.src=t.imageUrl,s=r,e.next=2,a;case 2:s.push.call(s,e.sent),e.next=4;break;case 3:e.prev=3,e.catch(1),r.push({width:1,height:1});case 4:case"end":return e.stop()}},e,null,[[1,3]])}),n.s();case 2:if((o=n.n()).done){t.next=4;break}return t.delegateYield(s(),"t0",3);case 3:t.next=2;break;case 4:t.next=6;break;case 5:t.prev=5,i=t.catch(1),n.e(i);case 6:return t.prev=6,n.f(),t.finish(6);case 7:a(r),l(!0);case 8:case"end":return t.stop()}},t,null,[[1,5,6,7]])}));return function(){return t.apply(this,arguments)}}();t()}},[e]),{imageDimensions:n,imagesLoaded:c}}(t),n=r.imageDimensions,a=r.imagesLoaded;return t&&0!==t.length?(0,C.jsx)("div",{className:"flex h-[30vh] flex-row gap-aria-3",children:t.map(function(e,r){return(0,C.jsx)(pa,{src:e.imageUrl,alt:e.title,width:fa(r,t.length,n,a)},e.imageUrl)})}):null};const va=r.p+"assets/e26f4c60c4b165416b9d.svg",ha=r.p+"assets/bc5adc715661f077b2b2.svg",xa=r.p+"assets/c9ce13c436b4d4f71993.svg",ga=r.p+"assets/99b8de4a58088f9b24a4.svg",ba=r.p+"assets/632748498cd9bf28614a.svg",ya=r.p+"assets/3fdddca87e8e400d3a0c.svg",ja=r.p+"assets/2e835373f2b598fe795c.svg",wa=r.p+"assets/29b44f5290f3c2ae2db1.svg",ka=r.p+"assets/8a5cbf14e28c282974fe.svg";var Ca=function(e){switch(e){case z.V4.GeneralThinking:return ha;case z.V4.ImageGeneration:return xa;case z.V4.FileQA:return va;case z.V4.SearchEngine:return ba;case z.V4.Webpages:return ja;case z.V4.Math:return ga;case z.V4.Weather:return ka;case z.V4.VideoGames:return wa;case z.V4.TabCommands:return ya;default:return ha}},Oa=(0,o.memo)(function(e){var t=e.status,r=e.label,n=e.size,a=void 0===n?16:n;return(0,C.jsxs)("div",{className:"mb-3 flex flex-row items-center",children:[(0,C.jsx)("div",{className:"inset-0 mr-2 min-w-4 bg-color-text-01 bg-cover bg-center",style:{WebkitMaskImage:"url(".concat(Ca(t),")"),WebkitMaskSize:"auto ".concat(a,"px"),maskRepeat:"no-repeat",WebkitMaskRepeat:"no-repeat",width:a,height:a}}),(0,C.jsx)("span",{className:"text-sm text-color-text-03",children:r})]})});Oa.displayName="ThinkingStatus";const _a=Oa;var Na=function(e){var t=e.to,r=void 0===t?"#":t,n=e.title,a=void 0===n?"":n,o=e.children,s=e.className,i=void 0===s?"":s,c=e.onClick,l=void 0===c?function(){}:c,u=e.tabIndex,d=r.startsWith("opera");return(0,C.jsx)("a",{"data-testid":ft.Y.TEXT_LINK,className:i,href:d?void 0:r,target:"_blank",rel:"noopener noreferrer",title:a,draggable:"false",tabIndex:u||0,onClick:d?function(){return chrome.tabs.create({url:r})}:l,children:o})},Aa=r(20437),Ea=function(){var e=(0,w.Bd)().t,t=st().acceptShoppingSuggestionsConsent;return(0,C.jsxs)("div",{className:"max-w-[375px] rounded-aria-radius-4 border border-color-neutral-93 p-aria-5 text-color-text-03",children:[(0,C.jsx)("div",{className:"mb-aria-5",children:(0,C.jsx)("p",{className:"text-body-l text-color-text-1",children:e("shopping_suggestions_consent")})}),(0,C.jsxs)("div",{className:"flex w-full flex-row gap-aria-2",children:[(0,C.jsx)("div",{className:"flex-1",children:(0,C.jsx)(Aa.$n,{type:"primary",size:"s",fullWidth:!0,onClick:function(){return t(!0)},children:e("yes")})}),(0,C.jsx)("div",{className:"flex-1",children:(0,C.jsx)(Aa.$n,{type:"secondary",size:"s",fullWidth:!0,onClick:function(){return t(!1)},children:e("no")})})]})]})};(0,o.memo)(function(e){var t=e.type,r=e.product,n={logo:{iconClasses:r===A.Yt.Neon?"bg-color-text-01":"",styles:la(r)},error:{classes:"bg-color-state-error",styles:{backgroundImage:"url(".concat(ae,")"),backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"17px"}},info:{iconClasses:"bg-color-text-01",styles:{maskImage:"url(".concat(ur,")"),maskPosition:"center",maskRepeat:"no-repeat",maskSize:"17px"}},localModel:{classes:"bg-color-level-2 border border-color-neutral-36 ",iconClasses:"bg-color-text-03 -ml-[1px]",styles:{maskImage:"url(".concat(dr,")"),maskPosition:"center",maskRepeat:"no-repeat",backgroundSize:"17px"}}}[t];return(0,C.jsx)("div",{className:F()("h-aria-7 w-aria-7",null==n?void 0:n.classes),children:(0,C.jsx)("div",{className:F()("h-full w-full",null==n?void 0:n.iconClasses),style:n.styles})})}).displayName="MessageIcon";var Sa=(0,o.memo)(function(e){var t,r,n=e.data,a=e.index,i=e.chatType,l=e.isLastMessage,d=e.isLoadingAudio,p=void 0!==d&&d,m=e.isReading,v=void 0!==m&&m,x=e.isSnapshotPending,g=e.copyMessage,b=e.readMessage,y=e.sendPrompt,j=e.retryFiles,k=e.retrySkills,O=e.submitFeedback,_=e.takeScreenshot,N=e.conversationModel,A=e.conversationSource,E=e.conversationState,S=e.thinkingStatus,I=e.previousQuery,P=e.isOperator,M=e.selectedModel,D=e.serverId,T=(0,c.D6)().isNeonEdition,R=(0,w.Bd)().t,L=function(e){var t=e.links,r=(0,s.V7e)().shoppingSuggestionsConsentAccepted;return{isShoppingConsentNeeded:(null==t?void 0:t.some(function(e){var t;return null===(t=e.meta)||void 0===t?void 0:t.auditId}))&&void 0===r}}({links:n.links}),U=L.isShoppingConsentNeeded,B=function(e){var t=e.links;return!1===(0,s.V7e)().shoppingSuggestionsConsentAccepted?{links:void 0}:{links:t}}({links:n.links}),F=B.links,H=!N||"Aria"===N,W=Boolean(n.content.length&&!n.richResponse),G=H,Y=null!==(t=n.isAudioAvailable)&&void 0!==t&&t,K=Boolean(!n.isRetryDisabled),$=H,q=!n.isErrorMessage&&E===V.lj.Completed,Q=l&&(n.isErrorMessage&&!!n.errorMessage||n.isAborted),X=E===V.lj.Ongoing&&l,Z=T?h.CI:h.l$,J=(0,o.useRef)(null),ee=(0,o.useCallback)((0,u.A)(f().mark(function e(){var t;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(J.current&&_){e.next=1;break}return e.abrupt("return",!1);case 1:return t=i===V.He.Chat?J.current.parentElement:J.current,e.abrupt("return",_(t));case 2:case"end":return e.stop()}},e)})),[_,i]),te=(0,o.useCallback)(function(){y&&I&&y(I,{files:j,skills:k,selectedModel:M})},[y,I,j,k,M]);if(U)return(0,C.jsx)(Ea,{});var re=(0,C.jsx)(cr,{chatType:i,message:n,isReading:v,isCopyAvailable:W,isFeedbackAvailable:G,isLoadingAudio:p,isReaderAvailable:Y,isRetryAvailable:K,isSnapshotAvailable:$,isSnapshotPending:x,isLastMessage:l,copyMessage:g,readMessage:b,sendPrompt:y,retryFiles:j,retrySkills:k,takeMessageScreenshot:ee,submitFeedback:O,userQuery:I,selectedModel:M},"actions"),ne=(0,C.jsxs)(C.Fragment,{children:[n.isAborted&&(0,C.jsx)(ra,{text:R("empty_interrupted_message"),color:"text-color-text-03",className:"mt-6",isStreaming:!1,serverId:D,messageId:n.serverId},"".concat(a,"-aborted")),n.isErrorMessage&&(0,C.jsx)("div",{className:"text-body-l mt-4 min-h-6 gap-x-aria-3 rounded-aria-radius-3 text-color-text-e",children:(0,C.jsx)(w.x6,{i18nKey:R(null!==(r=n.errorMessage)&&void 0!==r?r:"daily_limit_reached"),components:{link1:(0,C.jsx)(Na,{to:Z,className:"text-color-text-e underline"})}})})]}),ae=(0,C.jsx)("div",{className:"mt-2 flex justify-end",children:(0,C.jsx)(lr.$n,{size:"l",variant:lr.Ak.Tertiary,action:te,children:R("try_again")},"".concat(a,"-retry"))},"retry"),oe=n.content+((null==S?void 0:S.type)===z.V4.ImageGeneration?(0,zr.KF)():""),se=n.richResponse?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(ra,{text:n.richResponse.first_message,serverId:D,messageId:n.serverId},"".concat(a,"-header")),(0,C.jsx)(sa,{messages:n.richResponse.main_texts,extraContent:n.extraContent},"".concat(a,"-rich")),n.richResponse.last_message&&(0,C.jsx)(ra,{text:n.richResponse.last_message,isStreaming:X,serverId:D,messageId:n.serverId},"".concat(a,"-footer"))]}):(0,C.jsx)(ra,{text:oe,links:F,isStreaming:X,serverId:D,messageId:n.serverId},a);return(0,C.jsxs)("div",{ref:J,className:"message flex flex-col",children:[S&&(0,C.jsx)(_a,{status:S.type,label:S.message},"status"),n.related_images&&n.related_images.length>0&&(0,C.jsx)("div",{className:"mb-aria-3",children:(0,C.jsx)(ma,{images:n.related_images},"gallery")},"gallery"),se,Q&&ne,!q&&!n.isErrorMessage&&(0,C.jsx)("div",{className:"h-7"}),q&&re,Q&&!P&&ae,n.extraContent&&(0,C.jsx)(Nr,{data:n.extraContent,conversationSource:A,selectedModel:M},"extra-content")]})});Sa.displayName="ChatMessage";var Ia=(0,o.memo)(function(e){var t=e.content,r=e.isStreaming,n=void 0!==r&&r;return(0,C.jsx)(ra,{text:t,isStreaming:n})});Ia.displayName="Message";const Pa=r.p+"assets/917d551e2ab252d4ba79.svg",Ma=r.p+"assets/b6a9c371454a6e0d56b6.svg";var Da=function(e){var t,r=e.file,n=e.openLink,a=He.F$.getFileExtension(null!==(t=r.name)&&void 0!==t?t:""),s=!(h.eG.includes(a)||h.ru.includes(a)),i=(0,o.useCallback)(function(){null!=r&&r.link&&n&&n(r.link)},[r.link,n]);return r.image_original_size_url||r.image_thumbnail_url?(0,C.jsx)(Zr,{src:r.image_original_size_url||r.image_thumbnail_url,alt:r.name}):(0,C.jsxs)("div",{onClick:i,onKeyDown:i,role:"none",className:F()("flex h-12 items-center gap-aria-2 rounded-aria-radius-3 bg-color-neutral-92-60 p-aria-3",(null==r?void 0:r.link)&&"cursor-pointer"),children:[(0,C.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-aria-radius-3 bg-color-neutral-90 p-aria-3",children:(0,C.jsx)(Pt.A,{Icon:s?Ma:Pa,spacing:!1,size:"17px"})}),(0,C.jsxs)("div",{className:"flex flex-grow flex-col gap-aria-2",children:[(0,C.jsx)("p",{className:F()("text-body-m max-h-4 max-w-28 overflow-hidden text-ellipsis text-nowrap text-color-text-01",(null==r?void 0:r.link)&&"max-w-52"),children:r.name}),(0,C.jsx)("p",{className:"text-body-s text-color-text-03",children:a.toUpperCase()})]})]})},Ta=function(e){var t=e.attachments,r=e.openLinkInTabGroup;return(0,C.jsx)("div",{className:"flex",children:t.map(function(e,t){return(0,C.jsx)(Da,{file:e,openLink:r},t)})})};function Ra(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function La(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ra(Object(r),!0).forEach(function(t){(0,b.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ra(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Ua=function(e){return e.COPY="copy_message",e.SNAPSHOT="message_snapshot",e}({}),Ba=(0,o.memo)(function(e){var t=e.disabled,r=e.iconUrl,n=e.idAttr,a=e.onButtonClick,o=e.title,s={backgroundColor:t?"var(--color-text-03)":"var(--color-text-02)",maskImage:"url(".concat(r,")"),maskPosition:"center",maskRepeat:"no-repeat",maskSize:"17px"};return(0,C.jsx)(er,{title:o,children:function(e){var r=e.ref,o=e.referenceProps;return(0,C.jsx)("button",La(La({ref:r},o),{},{className:"group relative disabled:cursor-not-allowed",disabled:t,id:n,onClick:a,type:"button",children:(0,C.jsx)("div",{className:"mr-aria-1 h-aria-6 w-aria-6 rounded-aria-radius-3 bg-transparent group-hover:bg-color-neutral-92-60",children:(0,C.jsx)("div",{className:F()("h-full w-full"),style:s})})}))}})});Ba.displayName="MessageAction";var Fa=(0,o.memo)(function(e){var t=e.isCopyAvailable,r=e.isSnapshotAvailable,n=e.isSnapshotPending,a=e.copyMessage,s=e.takeMessageScreenshot,i=(0,w.Bd)().t,c=(0,o.useCallback)(function(){a()},[a]),l=(0,o.useCallback)((0,u.A)(f().mark(function e(){return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:null==s||s();case 1:case"end":return e.stop()}},e)})),[s]);return(0,C.jsxs)("div",{className:"my-aria-3 flex items-center py-2","data-screenshotter-ignore":"true",children:[t&&(0,C.jsx)(Ba,{title:i("copy"),iconUrl:Ht,idAttr:Ua.COPY,onButtonClick:c}),r&&(0,C.jsx)(Ba,{title:i("take_snapshot"),disabled:n,iconUrl:Ft,idAttr:Ua.SNAPSHOT,onButtonClick:l})]})});Fa.displayName="ResearchMessageActions";var Ha=(0,o.memo)(function(e){var t=e.message,r=e.conversationState,n=e.isSnapshotPending,a=e.copyMessage,s=e.openLinkInTabGroup,i=e.takeScreenshot,c=(0,o.useRef)(null),l=r===V.lj.Completed,d=r===V.lj.Completed,p=(0,o.useCallback)(function(){a(t)},[a,t]),m=(0,o.useCallback)((0,u.A)(f().mark(function e(){return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c.current&&i){e.next=1;break}return e.abrupt("return",!1);case 1:return e.abrupt("return",i(c.current));case 2:case"end":return e.stop()}},e)})),[i]);return(0,C.jsxs)("div",{ref:c,children:[(0,C.jsx)(Ia,{content:t.content,isStreaming:!1},"research-message-".concat(t.id)),(0,C.jsx)(Fa,{isCopyAvailable:l,isSnapshotAvailable:d,isSnapshotPending:n,copyMessage:p,takeMessageScreenshot:m},"actions-".concat(t.id)),t.attachments&&(0,C.jsx)(Ta,{openLinkInTabGroup:s,attachments:t.attachments},"attachments-".concat(t.id))]})});Ha.displayName="ResearchMessage";var za=function(e){var t=e.children,r=e.isDisabled,n=void 0!==r&&r,a=e.onContainerHeightChanged,s=(0,o.useRef)(null),i=(0,o.useState)(!1),l=(0,Ce.A)(i,2),u=l[0],d=l[1],f=(0,o.useState)(!0),p=(0,Ce.A)(f,2),m=p[0],v=p[1],h=(0,o.useState)(!1),x=(0,Ce.A)(h,2),g=x[0],b=x[1],y=(0,c.D6)().view,j=(0,c.ZC)(t);!function(e,t){var r=(0,o.useState)(0),n=(0,Ce.A)(r,2),a=n[0],s=n[1],i=(0,c.ZC)(a,0);(0,o.useEffect)(function(){i!==a&&t&&t(a)},[a,i,t]),(0,o.useEffect)(function(){var r=e.current;if(r&&t){var n=new ResizeObserver(function(e){var t=e[0];t&&s(t.contentRect.height)});return n.observe(r),function(){n.disconnect()}}},[e,t])}(s,function(e){a&&(b(!0),a(e))}),(0,o.useEffect)(function(){var e=s.current;e&&g&&(e.scrollTop=e.scrollHeight,v(!0))},[g,v]),(0,o.useEffect)(function(){n&&m&&d(!1),setTimeout(function(){d(!0)},500)},[n,m]),(0,o.useLayoutEffect)(function(){var e=s.current;e&&j!==t&&m&&!n&&u&&(e.scrollTop=e.scrollHeight)},[t,j,m,n,u]);return(0,C.jsx)("section",{ref:s,onScroll:function(){var e=s.current;if(e){var t=e.scrollHeight-e.scrollTop-e.offsetHeight;v(t<=4)}},className:F()("hover-scrollbar pd-10 fast-scroll mt-4 h-full w-full overflow-y-auto overflow-x-hidden",{"opacity-0":!g}),children:(0,C.jsx)("div",{className:F()("scrollable-content relative mx-auto flex flex-col gap-6 overflow-hidden",y===A.Ss.Tab?"px-left-0.75":"pr-2",(0,Y.EU)(y)),children:t})})},Wa=["className"],Ga=["className"],Va=["className"];function Ya(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ka(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ya(Object(r),!0).forEach(function(t){(0,b.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ya(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function $a(e){var t=e.className,r=(0,dt.A)(e,Wa);return(0,C.jsx)("div",Ka({"data-slot":"card",className:(0,p.xW)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border border-color-neutral-36 py-6 shadow-sm dark:bg-color-level-5",t)},r))}function qa(e){var t=e.className,r=(0,dt.A)(e,Ga);return(0,C.jsx)("div",Ka({"data-slot":"card-content",className:(0,p.xW)("px-6",t)},r))}function Qa(e){var t=e.className,r=(0,dt.A)(e,Va);return(0,C.jsx)("div",Ka({"data-slot":"card-footer",className:(0,p.xW)("[.border-t]:pt-6 flex items-center px-6",t)},r))}function Xa(e){var t=e.className,r=(0,w.Bd)().t,n=(0,ke.D)().isNeonEdition,a=st().acceptConsent,i=(0,s.V7e)().authStatus,c=(0,s.BFY)().networkEnvironment,l=(0,s.hiN)().userCapabilities,d=(0,o.useCallback)(function(e){(0,Je.nr)({action:z._b.CLICK,context:(0,Je.g$)("sidebar"),element:z.Q3.ONBOARDING,str_value:e},l)},[l]),m=function(){var e=(0,u.A)(f().mark(function e(){return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a(),d("start:disclaimer_message:accepted");case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return(0,C.jsxs)($a,{className:(0,p.xW)("w-full max-w-full",t),children:[(0,C.jsx)(qa,{children:(0,C.jsxs)("div",{className:"text-xxs dark:text-color-text-03",children:[(0,C.jsxs)("ul",{className:"list-disc px-4 leading-5",children:[(0,C.jsx)("li",{children:r("consent_use_aria_processed_by",{productName:h.iq})}),(0,C.jsx)("li",{children:r("consent_not_shared_personal_data",{productName:h.iq})}),(0,C.jsx)("li",{children:(0,C.jsx)(w.x6,{i18nKey:r("onboarding_terms_confirm",{productName:h.iq}),components:{link1:(0,C.jsx)(lr.$n,{url:n?h.tn:h.qh,variant:lr.Ak.Link,action:function(){d("start:disclaimer_message:terms")},className:"!inline text-inherit",tabIndex:0},"".concat(r("onboarding_terms_confirm",{productName:h.iq}),"-1")),link2:(0,C.jsx)(lr.$n,{url:n?h.kz:h.Kq,variant:lr.Ak.Link,action:function(){d("start:disclaimer_message:privacy")},className:"!inline text-inherit",tabIndex:0},"".concat(r("onboarding_terms_confirm",{productName:h.iq}),"-2"))}})}),"notLoggedIn"===i&&(0,C.jsx)("li",{children:(0,C.jsx)(w.x6,{i18nKey:r("consent_login_for_free",{productName:h.iq}),components:{link1:(0,C.jsx)(lr.$n,{url:(0,et.zP)(h.IQ.EMAIL,c),variant:lr.Ak.Link,action:function(){d("start:log_in:disclaimer_message")},className:"!inline text-inherit",tabIndex:0})}})})]}),(0,C.jsx)("p",{className:"mt-4",children:r("consent_proceed_by_clicking")})]})}),(0,C.jsx)(Qa,{className:"flex-col gap-2",children:(0,C.jsx)(lr.$n,{variant:lr.Ak.Primary,className:"flex w-full !justify-center p-4 text-xxs font-bold",action:m,testId:ft.Y.I_AGREE_CONSENT_BUTTON,children:r("consent_i_agree")})})]})}var Za=(0,o.memo)(function(){var e=(0,w.Bd)().t;return(0,C.jsx)(Ia,{content:e("consent_header")})});Za.displayName="ConsentMessage";const Ja=r.p+"assets/11eec503cc9901eaae04.svg";function eo(e){return(0,o.useCallback)(function(t){"Enter"!==t.key&&" "!==t.key||e(t)},[e])}const to=r.p+"assets/52eb415e124b593776be.svg";var ro=function(e){var t=e.card,r=e.cardContainer,n=e.onClose,a=(0,w.Bd)().t,s=st().openLinkInTabGroup,i=(0,o.useRef)(null),c=(0,o.useState)({top:0,left:0,showAboveCard:!1}),l=(0,Ce.A)(c,2),u=l[0],d=l[1],f=function(){var e;return(null===(e=document.querySelector(".scrollable-content"))||void 0===e?void 0:e.parentElement)||null},m=(0,o.useCallback)(function(){var e=f(),t=i.current;if(t&&e){var n=t.offsetHeight,a=t.offsetWidth,o=r.getBoundingClientRect(),s=o.bottom,c=o.height,l=o.right,u=o.top,d=e.offsetHeight-s<n;return{top:d?u-n:u+c,left:l-a,showAboveCard:d}}return{top:0,left:0,showAboveCard:!1}},[r]),v={skillCardDetails:{backgroundImage:"url(".concat(to,")"),backgroundRepeat:"no-repeat",backgroundPosition:"0 0",backgroundSize:"100% 100%",boxShadow:"var(--skill-card-details-shadow)",top:u.top,left:Math.max(u.left,0)}};return(0,o.useLayoutEffect)(function(){d(m())},[m]),(0,o.useEffect)(function(){var e=f();return null==e||e.addEventListener("scroll",n),function(){null==e||e.removeEventListener("scroll",n)}},[n]),(0,o.useEffect)(function(){function e(e){r.contains(e.target)||n()}return window.addEventListener("click",e),window.addEventListener("resize",n),function(){window.removeEventListener("click",e),window.removeEventListener("resize",n)}},[r,n]),(0,C.jsxs)("div",{className:(0,p.xW)("fixed z-10 flex w-10/12 max-w-[396px] cursor-default flex-col gap-y-aria-4 rounded-aria-radius-3 bg-color-level-5 p-aria-4 pb-aria-5",u.showAboveCard?"-mt-aria-2":"mt-aria-2"),role:"dialog",style:v.skillCardDetails,ref:i,children:[(0,C.jsxs)("div",{className:"flex items-center justify-between",children:[(0,C.jsxs)("div",{className:"flex",children:[(0,C.jsx)(Pt.A,{className:"mr-aria-2",Icon:Ja,size:17,spacing:!1}),(0,C.jsx)("p",{className:"flex-1 overflow-hidden text-ellipsis text-nowrap",title:t.name,children:t.name})]}),(0,C.jsxs)("div",{className:"flex",children:[(0,C.jsx)(Rt,{icon:It,onClick:function(){s("".concat(h.b$,"/").concat(t.id))},type:"transparent",iconSize:17}),(0,C.jsx)(Rt,{icon:Ot,onClick:function(e){e.stopPropagation(),n()},type:"transparent",iconSize:17})]})]}),(0,C.jsx)("div",{className:"text-body-m max-h-[173px] overflow-y-auto rounded-aria-radius-2 bg-color-neutral-98 p-aria-4 text-color-text-03",children:t.prompt}),(0,C.jsx)("div",{children:(0,C.jsx)(lr.$n,{variant:lr.Ak.Secondary,action:function(){s(h.b$)},children:a("browse_more")})})]})};const no=r.p+"assets/418cb19395b34b79abf0.svg";var ao=function(e){var t=e.card,r=e.detailsAvailable,n=void 0!==r&&r,a=e.onRemove,s=e.readonly,i=(0,o.useRef)(null),c=(0,o.useState)(!1),l=(0,Ce.A)(c,2),u=l[0],d=l[1],f=(0,o.useState)(!1),m=(0,Ce.A)(f,2),v=m[0],h=m[1],x=function(){return null==a?void 0:a(t.id)},g=function(){h(!0)},b=eo(x),y={skillCard:{backgroundImage:"url(".concat(no,")"),backgroundRepeat:"no-repeat",backgroundPosition:"0 0",backgroundSize:"100% 100%"}};return(0,C.jsxs)("div",{onClick:g,onKeyDown:g,onMouseEnter:function(){d(!0)},onMouseLeave:function(){d(!1)},className:(0,p.xW)("text-subheader-s relative flex flex-shrink-0 select-none items-center gap-x-aria-2 rounded-aria-radius-3 bg-color-neutral-100 px-aria-3 py-aria-2.5 text-left text-color-text-01",(!n||v)&&"cursor-default"),style:y.skillCard,ref:i,role:"button",tabIndex:-1,children:[(0,C.jsx)(Pt.A,{Icon:Ja,size:17,spacing:!1}),(0,C.jsx)("p",{className:"flex-1 overflow-hidden text-ellipsis text-nowrap",title:t.name,children:t.name}),!s&&!!a&&(0,C.jsx)("button",{"data-testid":ft.Y.UPLOADED_FILE_REMOVE_BUTTON,tabIndex:-1,onClick:x,onKeyUp:b,className:(0,p.xW)("absolute -right-[5px] -top-[5px] flex h-4 w-4 cursor-pointer items-center justify-center rounded bg-color-neutral-98 hover:bg-color-neutral-98",u?"opacity-100":"opacity-0"),style:{boxShadow:"0px 1px 5px rgba(161, 161, 161, 0.25)"},children:(0,C.jsx)(Pt.A,{Icon:Ot,size:"17px",spacing17:!0})}),n&&v&&i.current&&(0,C.jsx)(ro,{card:t,cardContainer:i.current,onClose:function(){h(!1)}})]})},oo=function(e){return e.SKILL="skill",e.AGENT="agent",e}({});function so(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function io(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?so(Object(r),!0).forEach(function(t){(0,b.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):so(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var co={items:[],isVisible:!1,focusedIndex:0,trigger:null,currentType:null},lo=r(64748),uo=function(e){var t=e.items,r=e.focusedIndex,n=e.onSelect,a=e.onHover,s=e.onNavigate,i=e.onClose,c=e.strategy,l=e.searchQuery,u=e.onSearchChange,d=e.showSearch,f=(0,w.Bd)().t,p=(0,o.useRef)(null);(0,o.useEffect)(function(){d&&requestAnimationFrame(function(){var e;null===(e=p.current)||void 0===e||e.focus()})},[d]),(0,o.useEffect)(function(){p.current&&p.current.value!==l&&(p.current.value=l)},[l]);var m=function(e){"ArrowDown"===e.key?(e.preventDefault(),s("down")):"ArrowUp"===e.key?(e.preventDefault(),s("up")):"Enter"===e.key?(e.preventDefault(),n(r)):"Escape"===e.key&&(e.preventDefault(),e.stopPropagation())},v=(0,o.useMemo)(function(){return(0,C.jsx)("input",{ref:p,type:"text",defaultValue:l,onChange:function(e){return u(e.target.value)},onKeyDown:m,placeholder:f("search_cards"),tabIndex:0,className:"focus:border-color-accent-01 w-full rounded-aria-radius-2 border border-color-neutral-36 bg-color-level-1 px-3 py-2 text-sm text-color-text-01 placeholder:text-color-text-03 focus:outline-none"})},[m,u]);if(0===t.length&&!d)return null;var h="top"===c?"bottom-[calc(100%+12px)]":"top-[calc(100%+12px)]";return(0,C.jsx)("div",{className:F()("absolute left-0 right-0 z-50",h),children:(0,C.jsx)("div",{className:"w-full rounded-aria-radius-3 bg-color-neutral-98 p-aria-3 shadow-aria-light-s","data-suggestion-container":!0,onBlur:function(e){var t=e.relatedTarget;t&&e.currentTarget.contains(t)||i()},children:(0,C.jsxs)("div",{className:"flex flex-col",children:[d&&"bottom"===c&&(0,C.jsx)("div",{className:"mb-2 px-1",children:v}),t.map(function(e,t){return(0,C.jsxs)("div",{className:F()("flex cursor-pointer items-center gap-2 rounded-aria-radius-3 px-3 py-2 text-sm text-color-text-01 transition-colors",{"bg-color-neutral-92-40":t===r}),onClick:function(){return n(t)},onKeyDown:(0,Y.lO)(function(e){e.preventDefault(),e.stopPropagation(),n(t)}),onMouseEnter:function(){return a(t)},onFocus:function(){return a(t)},role:"button",tabIndex:0,children:[e.icon&&(0,C.jsx)("div",{className:"flex items-center",children:(0,C.jsx)(lo.$,{src:e.icon,color:"var(--color-text-01)",className:"!block h-4 w-4"})}),(0,C.jsxs)("div",{className:"flex min-w-0 flex-1 items-center justify-between overflow-hidden",children:[(0,C.jsx)("span",{className:"text-body-m whitespace-nowrap text-color-text-01",children:e.label}),"browse-more"===e.id&&(0,C.jsx)("span",{className:"text-body-m ml-2 overflow-hidden text-ellipsis whitespace-nowrap text-color-text-01",children:f("your_prompt_tools")})]})]},e.id)}),d&&"top"===c&&(0,C.jsx)("div",{className:"mt-2 px-1",children:v})]})})})},fo=r(88486),po=(0,o.createContext)(null),mo=function(){var e=(0,o.useContext)(po);if(!e)throw new Error("useSuggestionContext must be used within SuggestionProvider");return e},vo=function(e){var t,r,n,a,s,i,c,l,u,d,f,p,m,v,h,x,g,b,y,j=e.children,w=e.strategy,k=e.onEscape,O=(t=(0,o.useState)(co),r=(0,Ce.A)(t,2),n=r[0],a=r[1],s=(0,o.useState)(""),i=(0,Ce.A)(s,2),c=i[0],l=i[1],u=(0,o.useState)([]),d=(0,Ce.A)(u,2),f=d[0],p=d[1],m=(0,o.useCallback)(function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,i="card"===r&&s?[].concat((0,de.A)(e),[s]):e;a({items:i,isVisible:i.length>0||"manual"===t&&"card"===r,focusedIndex:0,trigger:t,currentType:r}),n||l(""),o&&p(o)},[]),v=(0,o.useCallback)(function(){a(co),l(""),p([])},[]),h=(0,o.useMemo)(function(){var e=n.items.filter(function(e){return"browse-more"===e.id}),t=n.items.filter(function(e){return"browse-more"!==e.id});c.trim()&&(t=t.filter(function(e){var t=c.toLowerCase();return e.label.toLowerCase().includes(t)})),"card"===n.currentType&&f.length>0&&(t=t.filter(function(e){return!e.cardId||!f.includes(e.cardId)}));var r="card"===n.currentType?5:6,a=t.slice(0,r);return"card"===n.currentType?[].concat((0,de.A)(a),(0,de.A)(e)):a},[n.items,c,n.currentType,f]),x=(0,o.useCallback)(function(e){l(e),a(function(e){return io(io({},e),{},{focusedIndex:0})})},[]),g=(0,o.useCallback)(function(e){a(function(t){return t.isVisible&&0!==h.length?(r="down"===e?t.focusedIndex<h.length-1?t.focusedIndex+1:0:t.focusedIndex>0?t.focusedIndex-1:h.length-1,io(io({},t),{},{focusedIndex:r})):t;var r})},[h.length]),b=(0,o.useCallback)(function(e){var t=void 0!==e?e:n.focusedIndex,r=h[t];r&&(r.onSelect(),v())},[n.focusedIndex,h,v]),y=(0,o.useCallback)(function(e){a(function(t){return io(io({},t),{},{focusedIndex:e})})},[]),{state:n,searchQuery:c,filteredItems:h,showSuggestions:m,hide:v,navigate:g,select:b,updateFocusedIndex:y,setSearchQuery:x}),_=(0,o.useRef)(null);return(0,fo.Wr)(_,function(){O.state.isVisible&&O.hide()}),(0,pt.PO)(function(){O.state.isVisible&&(O.hide(),null==k||k())}),(0,o.useEffect)(function(){O.state.isVisible&&O.state.items.length>0&&O.updateFocusedIndex(0)},[O.state.isVisible,O.state.items.length,O.updateFocusedIndex]),(0,C.jsx)(po.Provider,{value:O,children:(0,C.jsxs)("div",{className:"relative w-full",ref:_,children:[O.state.isVisible&&(0,C.jsx)(uo,{items:O.filteredItems,focusedIndex:O.state.focusedIndex,onSelect:O.select,onHover:O.updateFocusedIndex,onNavigate:O.navigate,onClose:O.hide,strategy:w,searchQuery:O.searchQuery,onSearchChange:O.setSearchQuery,showSearch:"manual"===O.state.trigger&&"card"===O.state.currentType}),j]})})};const ho=r.p+"assets/a12fd3d92be8af42f0ca.svg",xo=r.p+"assets/879850ef3276ea5957ed.svg";var go=r(58175),bo=function(e,t){return e.map(function(e){return{id:"card-".concat(e.name),type:"card",value:e.name,label:e.name,description:e.description,icon:e.type===oo.AGENT?ho:Ja,onSelect:function(){return t(e)},cardId:e.id}})},yo=function(e){switch(e){case z.M5.CHAT:return _t;case z.M5.MAKE:return xo;case z.M5.DO:return Z;case z.M5.RESEARCH:return Nt;case z.M5.ONE_MINUTE_RESEARCH:return go;default:return _t}},jo=function(e,t){switch(e){case z.M5.CHAT:return t("neon_chat_description");case z.M5.MAKE:return t("neon_make_description");case z.M5.DO:return t("neon_do_description");default:return""}},wo=function(e,t,r,n){var a=t.toLowerCase();return e.filter(function(e){return"@".concat(e).toLowerCase().startsWith(a)}).map(function(e){return{id:"mode-".concat(e),type:"mode",value:"@".concat(e),label:"@".concat(e),description:jo(e,n),icon:yo(e),onSelect:function(){return r(e)}}})};function ko(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Co(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ko(Object(r),!0).forEach(function(t){(0,b.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ko(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Oo=function(e){var t=e.skills;return(0,C.jsx)("div",{className:"relative ml-auto flex w-fit flex-col items-end gap-y-aria-3 py-aria-3 text-left",children:t.map(function(e){return(0,C.jsx)(ao,{card:Co({goal:"",type:oo.SKILL},e),detailsAvailable:!0},e.id)})})},_o=function(e){var t=e.files;return(0,C.jsx)("div",{className:"flex w-full flex-col justify-end gap-1",children:null==t?void 0:t.map(function(e){return(0,C.jsx)(Da,{file:e},"message-file-".concat(e.name))})})};const No=r.p+"assets/6b2be2c6059c056d948b.svg";var Ao=(0,o.memo)(function(e){var t=e.message,r=e.onClick;return(0,C.jsx)("div",{className:"mt-aria-4 cursor-pointer rounded-aria-radius-2 bg-color-neutral-92 px-aria-3 py-aria-2.5 transition-colors hover:bg-color-level-2",onClick:r,onKeyUp:r,tabIndex:-1,role:"button",children:(0,C.jsxs)("div",{className:"flex flex-row items-center gap-aria-2",children:[(0,C.jsx)("div",{children:(0,C.jsx)(Pt.A,{Icon:No,size:13,spacing:!1})}),(0,C.jsx)("div",{className:"flex",children:(0,C.jsx)("span",{className:"text-body-s uppercase text-color-text-01","data-ignore-highlighter":!0,children:t})})]})})}),Eo=(0,o.memo)(function(e){var t=e.isActive,r=e.isGroupActive,n=e.newFactIndicator,a=e.newFactIndicatorClick,s=e.newFactIndicatorMessage,i=e.text,c=e.skills,l=e.files,u=(0,o.useRef)(null);return(0,o.useLayoutEffect)(function(){var e=u.current;e&&r&&requestAnimationFrame(function(){(0,Y.ot)(e)})},[r]),(0,o.useEffect)(function(){var e=u.current;t&&e&&requestAnimationFrame(function(){(0,Y.ot)(e)})},[t]),(0,C.jsxs)("div",{className:"ml-auto flex max-w-[80%] flex-col items-end gap-1",ref:u,children:[(0,C.jsxs)("div",{className:F()("user-message text-body-l break-anywhere box-content w-fit whitespace-pre-wrap rounded-aria-radius-3 border bg-color-level-2 p-3 text-color-text-01",t?"border-color-accent-50":"border-transparent"),children:[i,n&&(0,C.jsx)(Ao,{message:s,onClick:a})]}),c&&c.length>0&&(0,C.jsx)("div",{children:(0,C.jsx)(Oo,{skills:c})}),l&&l.length>0&&(0,C.jsx)("div",{className:"mt-1 flex w-fit flex-row gap-1",children:(0,C.jsx)(_o,{files:l})})]})});Eo.displayName="UserMessage";var So=function(e){var t=e.activeHistoryMessageId,r=e.conversation,n=e.state,a=e.thinkingStatus,i=e.selectedModel,l=(0,w.Bd)().t,u=st(),d=u.copyMessage,f=u.readMessage,p=u.openSettings,m=u.sendPrompt,v=u.submitFeedback,h=u.takeScreenshot,x=u.openLinkInTabGroup,g=u.continueResearch,b=(0,ke.D)(),y=b.product,j=b.productName,k=b.isConsentNeeded,O=b.source,_=(0,s.uTj)().ariaVoiceState,N=(0,s.VUi)().remoteConfig,A=(0,c.aO)().clipboardPending,E=(0,s.m9w)().consentMessage,S=(0,o.useState)(0),I=(0,Ce.A)(S,2),P=I[0],M=I[1],D=r.type===V.He.Operator,T=r.type===V.He.Research,R=r.type===V.He.OneMinuteResearch,L=(0,o.useCallback)(function(){p("USER_PROFILE")},[p]),U=(0,o.useCallback)(function(){g(r.id,R?z.Fw.MINUTE:void 0)},[g,r.id,R]),B=(0,c.ZC)(r.groups.length)===r.groups.length-1,F=(0,o.useMemo)(function(){return Boolean(k&&E)},[E,k]),H=r.groups.map(function(e,o){var s="group-".concat(o),c=o===r.groups.length-1,u=c&&B;return(0,C.jsxs)("div",{className:"flex flex-col gap-6",style:{minHeight:c?P:void 0},children:[(0,C.jsx)("div",{className:"message-group flex flex-col gap-6",children:e.messages.map(function(s,p){var g,b,w=p===e.messages.length-1,k=c&&w,E=_.isPlaying,S=_.loadingAudio,I=_.messageId===s.id,P=E&&I,M=S&&I,U=e.messages[0],B=(null==U?void 0:U.content)||"",F=(null===(g=r.groups[o])||void 0===g?void 0:g.messages[1])||{},H=N.longterm_memory&&F.isLongMemory,W=Boolean(t===s.id);if(s.sender===z.U1.user)return(0,C.jsx)(Eo,{isActive:W,isGroupActive:u,newFactIndicator:H,newFactIndicatorClick:L,newFactIndicatorMessage:l("profile_memory_message_indicator",{productName:j}),text:null!==(b=s.displayText)&&void 0!==b?b:s.content,skills:s.skills,files:s.files},"user-message-".concat(s.id));if(T||R)return(0,C.jsx)(Ha,{message:s,conversationState:n,isSnapshotPending:A,copyMessage:d,openLinkInTabGroup:x,takeScreenshot:h},"research-message-".concat(s.id));var G=s,Y=k?n===V.lj.Pending?{type:z.V4.GeneralThinking,message:l("i_m_thinking")}:a:null;return(0,C.jsx)(Sa,{conversationModel:r.model,conversationSource:O,conversationState:n,data:G,thinkingStatus:Y,index:p,product:y,productName:j,chatType:r.type,previousQuery:B,isActive:W,isGroupActive:u,isLastMessage:k,isLoadingAudio:M,isReading:P,isSnapshotPending:A,copyMessage:d,readMessage:f,sendPrompt:m,retryFiles:null==U?void 0:U.files,retrySkills:null==U?void 0:U.skills,submitFeedback:v,takeScreenshot:h,newFactIndicator:H,onNewFactIndicatorClick:L,isOperator:D,selectedModel:i,serverId:r.serverId},"message-".concat(G.id||G.serverId))})}),(T||R)&&c&&(0,C.jsxs)(C.Fragment,{children:[n===V.lj.Aborted&&(0,C.jsx)(ra,{text:l("empty_interrupted_message"),color:"text-color-text-03",isStreaming:!1},"aborted-message"),n===V.lj.Unfinished&&(0,C.jsx)("div",{className:"flex justify-end",children:(0,C.jsx)(lr.$n,{variant:lr.Ak.Primary,action:U,children:l("try_again")})},"try-again-button")]})]},s)}),W=(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(Za,{}),(0,C.jsx)(Xa,{})]});return(0,C.jsx)(za,{onContainerHeightChanged:M,isDisabled:!0,children:F?W:H},r.id)},Io={error:{icon:"bg-color-state-error"},info:{icon:""},success:{icon:"bg-color-state-correct"}};const Po=(0,o.memo)(function(e){var t=e.onClose,r=e.text,n=e.type,a={error:ae,info:ur,success:No};return(0,C.jsxs)("div",{className:"notification text-body-s flex h-[42px] items-center justify-between gap-x-aria-3 rounded-aria-radius-3 bg-color-level-5 px-aria-3 text-color-text-01 shadow-aria-light-s dark:shadow-aria-dark-m",children:[(0,C.jsxs)("div",{className:"flex items-center gap-x-aria-3",children:[(0,C.jsx)("div",{className:(0,p.xW)("rounded-aria-radius-2 p-aria-2",Io[n].icon),children:(0,C.jsx)(Pt.A,{Icon:a[n],size:"17px",spacing:!1})}),r]}),(0,C.jsx)(lr.$n,{action:t,variant:lr.Ak.Ghost,size:"s",children:(0,C.jsx)(Pt.A,{Icon:Ot,size:18,spacing:!1})})]})});const Mo=(0,o.memo)(function(){var e=st().closeNotification,t=(0,s.fJU)().notifications;return(0,C.jsx)("div",{className:"absolute left-9 right-0 top-22 z-10 flex flex-col items-center gap-y-aria-3",children:t.map(function(t){var r=t.id,n=t.text,a=t.type;return(0,C.jsx)(Po,{onClose:function(){return e(r)},text:n,type:a},r)})})});var Do=r(8339);function To(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ro(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?To(Object(r),!0).forEach(function(t){(0,b.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):To(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}const Lo=function(e){var t,r,n=e.content,a=e.iconUrl,o=e.rounded,s=e.group,i=e.tooltipCopy,c=e.isPageAccessBlocked;return(0,C.jsxs)("div",{className:(0,p.xW)("mode-disclaimer text-body-s relative top-aria-4 z-2 box-content flex h-aria-5 flex-row items-center justify-between truncate px-aria-3 py-aria-2.5 text-color-text-01",s?"bg-color-tabs-c2":"bg-color-neutral-93",o&&"rounded-t-[8px]",c&&"line-through"),children:[(0,C.jsxs)("div",{className:"flex min-w-0 select-none flex-row items-center gap-1",children:[s&&(0,C.jsx)("div",{className:(0,p.xW)("flex h-4 w-4 items-center justify-center rounded-[3px] bg-color-other-o2",c&&"opacity-50"),children:s}),a&&(0,C.jsx)("span",{className:(0,p.xW)("inline-block h-4 w-4 bg-cover",c&&"opacity-50"),style:{backgroundImage:"url(".concat(a,")")}}),(0,C.jsx)("div",{"data-testid":ft.Y.INPUT_DISCLAIMER_LABEL,className:(0,p.xW)("min-w-0 flex-1 truncate",c&&"opacity-50"),children:(t=n,r=document.createElement("textarea"),r.innerHTML=t,r.value)})]}),i&&(0,C.jsx)(Jt.m,{className:"w-[270px]",textPosition:"text-start",title:i,children:function(e){var t=e.ref,r=e.referenceProps;return(0,C.jsx)("div",Ro(Ro({ref:t},r),{},{children:(0,C.jsx)(Pt.A,{Icon:ur,size:17,spacing17:!0})}))}})]})},Uo=r.p+"assets/54765a91824d8eb26212.svg";function Bo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Fo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Bo(Object(r),!0).forEach(function(t){(0,b.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bo(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Ho=(0,o.memo)(function(e){var t=e.disabled,r=e.onAction,n=e.fileInputRef,a=(0,w.Bd)().t,i=(0,s.VUi)().remoteConfig,c=(0,o.useCallback)(function(e){t||null==r||r(e.target.files)},[t,r]);return(0,C.jsx)(Jt.m,{placement:"top",title:a("attach"),border:!1,offsetValue:4,children:function(e){var r=e.ref,a=e.referenceProps;return(0,C.jsxs)("label",{ref:r,className:(0,p.xW)("input-action custom-button flex h-8 w-8 items-center justify-center rounded-aria-radius-3 hover:bg-color-neutral-92-60",t?"cursor-not-allowed":"cursor-pointer"),"data-testid":ft.Y.UPLOADED_IMG_DIV,children:[(0,C.jsx)("div",Fo(Fo({ref:r},a),{},{children:(0,C.jsx)("input",{id:"upload-image-input",ref:n,type:"file",className:"sr-only",accept:(0,h.hA)([].concat((0,de.A)(h.eG),(0,de.A)(i.read_and_save_files?[].concat((0,de.A)(h.ru),(0,de.A)(h.$Z)):[]))),multiple:!0,disabled:t,onChange:c})})),(0,C.jsx)(Pt.A,{Icon:Uo,size:"17px",spacing17:!0})]})}})});Ho.displayName="UploadImageButton";const zo=r.p+"assets/20598bba1ee9473854da.svg",Wo=r.p+"assets/a151d0fcd119098d6660.svg",Go=r.p+"assets/93ead30e220f29c71ed8.svg",Vo=r.p+"assets/630eea209a976cb8f1a5.svg";function Yo(e){var t;return null!==(t=e.split(".").at(-1))&&void 0!==t?t:""}var Ko=r(92814),$o=function(e){var t=e.image,r=e.onRemove,n=e.visualQuestionResponseImage,a=void 0!==n&&n,s=(0,o.useState)("default"),i=(0,Ce.A)(s,2),c=i[0],l=i[1],d=(0,o.useState)("cover"),m=(0,Ce.A)(d,2),v=m[0],h=m[1],x=(0,o.useState)(""),g=(0,Ce.A)(x,2),b=g[0],y=g[1],j=(0,o.useState)(!1),w=(0,Ce.A)(j,2),k=w[0],O=w[1],_=(0,o.useState)(!1),N=(0,Ce.A)(_,2),A=N[0],E=N[1],S=!!t.isLocalModel,I=function(){return null==r?void 0:r(t.image_id)},P=function(){var e=(0,u.A)(f().mark(function e(t){var r;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,(0,Ko.ji)(t);case 1:(r=e.sent)&&y(r);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();(0,o.useEffect)(function(){S&&P(t.image_id)},[t.image_id]);var M=Boolean(t.image_original_size_url),D=function(){O(!0)},T=M?D:void 0,R=eo(D),L=eo(I);return(0,C.jsx)("div",{"data-testid":ft.Y.UPLOADED_IMG_DIV,className:(0,p.xW)("border-stroke-neutral-88 group relative","landscape"===c&&"flex items-center",a?"h-29 w-29":"h-aria-9 w-aria-9"),children:(0,C.jsxs)("div",{"data-testid":ft.Y.UPLOADED_IMG_LOADER_WAVE,className:(0,p.xW)("h-full w-full rounded-aria-radius-3 bg-shimmer-new","animate-imageHolderShimmerNew"),children:[(0,C.jsx)("div",{className:(0,p.xW)("rounded-aria-radius-3","absolute inset-0 bg-transparent transition-all",M&&"cursor-pointer"),role:M?"button":void 0,onClick:T,onKeyUp:T?R:void 0,children:!!r&&(0,C.jsx)("button",{"data-testid":ft.Y.UPLOADED_IMG_REMOVE_BUTTON,tabIndex:-1,onClick:I,onKeyUp:L,className:"nt-top-plane absolute -right-[5px] -top-[5px] flex h-4 w-4 cursor-pointer items-center justify-center rounded bg-color-neutral-98 opacity-0 hover:bg-color-neutral-98 group-hover:opacity-100",style:{boxShadow:"0px 1px 5px rgba(161, 161, 161, 0.25)"},children:(0,C.jsx)(Pt.A,{Icon:Ot,size:"17px",spacing17:!0})})}),(!!t.image_thumbnail_url||!!b)&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("img",{alt:"",className:(0,p.xW)("transition-opacity duration-300","h-full w-full rounded-aria-radius-3","center-crop"===v&&"object-cover object-center","cover"===v&&"object-cover",A?"opacity-100":"opacity-0"),src:S?b:t.image_thumbnail_url,onLoad:function(e){var t=e.target,r=t.naturalHeight,n=t.naturalWidth;l(n<114?"default":n>r?"landscape":"portrait"),h(n>=48&&r>=48?"center-crop":"cover"),E(!0)}}),M&&k&&(0,C.jsx)(Hr,{singleImage:!0,singleImageName:t.name,onClose:function(){O(!1)},previewImageUrl:t.image_original_size_url})]})]})})},qo=function(e){var t=e.type,r=e.file,n=e.readonly,a=e.onRemove,o=function(){return null==a?void 0:a(r.image_id)},s=!(h.eG.includes(t)||h.ru.includes(t)),i=r.status!==h.N8.FINISHED,c=eo(o);return(0,C.jsxs)("div",{className:(0,p.xW)("group relative flex h-12 items-center gap-aria-2 rounded-aria-radius-3 p-aria-3",n?"border-none bg-color-level-4":"bg-color-neutral-92-60 hover:bg-color-neutral-93"),children:[!n&&i?(0,C.jsx)("div",{className:"flex h-8 w-8 items-center justify-center",children:(0,C.jsx)(Pt.A,{Icon:Gt,className:"animate-spin",size:22})}):(0,C.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-aria-radius-3 bg-color-neutral-90 p-aria-3",children:(0,C.jsx)(Pt.A,{Icon:s?Ma:Pa,size:"17px",spacing17:!0})}),(0,C.jsxs)("div",{className:"flex flex-grow flex-col gap-aria-2",children:[(0,C.jsx)("p",{className:"text-body-m max-h-4 max-w-28 overflow-hidden text-ellipsis text-nowrap text-color-text-01",children:r.name}),(0,C.jsx)("p",{className:"text-body-s text-color-text-03",children:t.toUpperCase()})]}),!n&&!!a&&(0,C.jsx)("button",{"data-testid":ft.Y.UPLOADED_FILE_REMOVE_BUTTON,tabIndex:-1,onClick:o,onKeyUp:c,className:"absolute -right-[5px] -top-[5px] flex h-4 w-4 cursor-pointer items-center justify-center rounded bg-color-neutral-98 opacity-0 hover:bg-color-neutral-98 group-hover:opacity-100",style:{boxShadow:"0px 1px 5px rgba(161, 161, 161, 0.25)"},children:(0,C.jsx)(Pt.A,{Icon:Ot,size:"17px",spacing17:!0})})]})},Qo=(0,o.memo)(function(e){var t=e.files,r=e.isMessageResponse,n=void 0!==r&&r,a=e.onRemove,o=e.readonly;return(0,C.jsx)("div",{className:"flex w-fit flex-row gap-1",children:!!t.length&&(0,C.jsx)("div",{className:"flex w-fit flex-row flex-wrap gap-2",children:t.map(function(e){var t,r,s,i;return s=null!==(t=e.name)&&void 0!==t?t:"",i=Yo(s),h.eG.includes(i.toLowerCase())?(0,C.jsx)($o,{image:e,onRemove:a,visualQuestionResponseImage:n},e.image_id):(0,C.jsx)(qo,{file:e,onRemove:a,readonly:o,type:Yo(null!==(r=e.name)&&void 0!==r?r:"")},e.image_id)})})})});Qo.displayName="AttachedFilesList";var Xo=(0,o.memo)(function(e){var t=e.cards,r=e.onRemove,n=e.readonly;return(0,C.jsx)("div",{className:"flex w-full flex-row flex-wrap gap-1 pb-[0px]",children:t.map(function(e){return(0,C.jsx)(ao,{card:e,onRemove:r,readonly:n},e.id)})})});Xo.displayName="AttachedSkillsList";var Zo=r(6275),Jo=r(96763),es=function(){var e=(0,u.A)(f().mark(function e(t){var r,n;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=!1,e.prev=1,e.next=2,(0,i.rB)();case 2:r=e.sent,e.next=4;break;case 3:e.prev=3,n=e.catch(1),Jo.error("Error checking if page is a file context",n);case 4:return r||(r=t.includes(Zo.z5.GOOGLE_DOCS)),e.abrupt("return",r);case 5:case"end":return e.stop()}},e,null,[[1,3]])}));return function(t){return e.apply(this,arguments)}}(),ts=function(e){return e.filter(function(e){return"number"==typeof e.id}).map(function(e){var t,r;return{placement:e.active?"current_page":"tab_island",id:e.id,title:null!==(t=e.title)&&void 0!==t?t:"",url:null!==(r=e.url)&&void 0!==r?r:""}})};var rs=r(42679);const ns=(0,o.forwardRef)(function(e,t){var r=e.id,n=e["data-testid"],a=e.value,s=void 0===a?"":a,i=e.onChange,c=e.placeholder,l=void 0===c?"":c,u=e.className,d=void 0===u?"":u,f=e.maxLength,p=e.disabled,m=void 0!==p&&p,v=e.spellCheck,h=void 0===v||v,x=e.onKeyUp,g=e.onKeyDown,b=e.onInput,y=e.onFocus,j=e.onBlur,w=e.onComponentEdit,k=e.onComponentEditEnter,O=e.disableModeDetection,_=void 0!==O&&O,N=(0,o.useRef)(null),A=(0,o.useRef)(w),E=(0,o.useRef)(k);(0,o.useEffect)(function(){A.current=w},[w]),(0,o.useEffect)(function(){E.current=k},[k]),(0,o.useEffect)(function(){N.current&&N.current.value!==s&&(N.current.value=s)},[s]),(0,o.useEffect)(function(){if(!m){var e;null===(e=N.current)||void 0===e||e.focus({preventScroll:!0});var t=N.current;if(t){var r,n=t.value.length;null===(r=t.setSelectionRange)||void 0===r||r.call(t,n,n)}}},[m]);var S=(0,o.useCallback)(function(e){var t=e.target.value;if(null==i||i(t),null==b||b(),!_&&t.startsWith("@")){var r,n,a=e.target.selectionStart,o=t.slice(0,a).split(/\s+/),s=o[o.length-1];if(1===o.length&&s.startsWith("@")&&a<=s.length)null===(r=A.current)||void 0===r||r.call(A,{type:z.I5.MODE,text:s,trigger:"@"});else null===(n=A.current)||void 0===n||n.call(A,null)}else{var c;null===(c=A.current)||void 0===c||c.call(A,null)}},[i,b,_]);(0,o.useImperativeHandle)(t,function(){return{focus:function(){var e;return null===(e=N.current)||void 0===e?void 0:e.focus()},getValue:function(){var e;return((null===(e=N.current)||void 0===e?void 0:e.value)||"").trim()},getCaretPosition:function(){return N.current?N.current.selectionStart:null}}});var I=function(){var e=N.current;e&&(e.style.height="0px",e.style.height="".concat(e.scrollHeight,"px"))};return(0,o.useEffect)(function(){I()},[s]),(0,C.jsx)("textarea",{ref:N,id:r,"data-testid":n,value:s,onInput:I,onChange:S,onKeyDown:function(e){if("Enter"===e.key)return e.shiftKey?void 0:(null==g||g(e),void e.preventDefault());null==g||g(e)},onKeyUp:function(e){null==x||x(e)},onFocus:y,onBlur:j,placeholder:l,maxLength:f,disabled:m,spellCheck:h,className:"".concat(d," rich-textarea"),style:{whiteSpace:"pre-wrap",opacity:m?.5:1,cursor:m?"not-allowed":"text",minHeight:"".concat(rs.$R,"px"),maxHeight:"".concat(rs.ML,"px"),marginBottom:0,resize:"none"},"aria-placeholder":l,"aria-multiline":"true",tabIndex:m?-1:0})});var as=r(38470);const os=r.p+"assets/d059727273718b230bb1.svg";var ss=(0,o.memo)(function(e){var t,r,n=e.className,a=e.disabled,i=e.localChatMode,c=e.setLocalChatMode,l=(0,w.Bd)().t,u=mo(),d=(0,s.VUi)().remoteConfig,f=null!==(t=null==d?void 0:d.deep_research)&&void 0!==t&&t,p=null!==(r=null==d?void 0:d.one_minute_research)&&void 0!==r&&r,m=(0,o.useCallback)(function(){return Object.values(z.M5).filter(function(e){return!(!f&&e===z.M5.RESEARCH)&&!(!p&&e===z.M5.ONE_MINUTE_RESEARCH)}).map(function(e){return{label:e.charAt(0).toUpperCase()+e.slice(1).toLowerCase(),value:e}})},[f,p]),v=(0,o.useCallback)(function(e){c(e),u.hide()},[c,u]),h=(0,o.useCallback)(function(){if(!a)if(u.state.isVisible)u.hide();else{var e=wo(m().map(function(e){return e.value}),"",v,l);u.showSuggestions(e,"manual","mode")}},[a,m,v,u,l]);return(0,C.jsx)("div",{className:F()("min-w-[72px] cursor-pointer rounded-aria-radius-3 px-aria-3 py-aria-1 transition-colors hover:bg-color-neutral-92-60",{"bg-color-neutral-92-40":u.state.isVisible&&"mode"===u.state.currentType,"cursor-not-allowed opacity-50":a},n),onMouseDown:h,onKeyDown:(0,Y.lO)(h),role:"button",tabIndex:a?-1:0,"aria-label":l("select_chat_mode"),children:(0,C.jsxs)("div",{className:"flex flex-row items-center",children:[(0,C.jsx)("div",{className:"flex-1",children:(0,C.jsx)("span",{className:"text-body-m text-color-text-01",children:function(e){switch(e){case z.M5.CHAT:return l("chat");case z.M5.DO:return l("do");case z.M5.RESEARCH:return l("research");case z.M5.MAKE:return l("make");case z.M5.ONE_MINUTE_RESEARCH:return l("minute_research");default:return l("chat")}}(i)})}),(0,C.jsx)("div",{className:F()("transition-transform",{"rotate-180":u.state.isVisible&&"mode"===u.state.currentType}),children:(0,C.jsx)(Pt.A,{Icon:os,size:"12px",className:"text-color-text-03"})})]})})});ss.displayName="ChatModeSelector";var is,cs=r(74184),ls=r(85110),us=r(96763);function ds(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function fs(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ds(Object(r),!0).forEach(function(t){(0,b.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ds(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var ps=function(){var e=(0,u.A)(f().mark(function e(){var t,r;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,chrome.management.get(cs.Ik);case 1:return r=e.sent,e.abrupt("return",null!==(t=null==r?void 0:r.enabled)&&void 0!==t&&t);case 2:return e.prev=2,e.catch(0),e.abrupt("return",!1);case 3:case"end":return e.stop()}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),ms=function(){var e=(0,u.A)(f().mark(function e(){var t,r,n,a,o,s,i,c=arguments;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]&&c[0],e.prev=1,e.next=2,ps();case 2:if(e.sent){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=4,(0,ls.Se)();case 4:return r=e.sent,!is&&r&&(is=new cs.Ok(cs.Ik)),e.next=5,is.getSkillsList();case 5:if(n=e.sent,a=n.map(function(e){return fs(fs({},e),{},{type:oo.SKILL})}),o=[],!t){e.next=7;break}return e.next=6,is.getWorkflowAgentsList();case 6:s=e.sent,o=s.map(function(e){return fs(fs({},e),{},{type:oo.AGENT})});case 7:return e.abrupt("return",[].concat((0,de.A)(a),(0,de.A)(o)).map(function(e){return fs(fs({},e),{},{name:e.name.toLowerCase(),description:e.description||""})}));case 8:return e.prev=8,i=e.catch(1),us.error("Failed to fetch skills:",i),e.abrupt("return",[]);case 9:case"end":return e.stop()}},e,null,[[1,8]])}));return function(){return e.apply(this,arguments)}}(),vs=r(43426),hs=function(){var e=(0,S.Et)(vs.fu),t=(0,S.Et)(vs.IH),r=(0,S.Et)(vs.FL),n=(0,S.Et)(vs.Y$);return{pageContent:e,pageIconUrl:(0,S.Et)(vs.EH),pageTitle:t,pageUrl:r,pageTabsGroup:n}},xs=r(97823),gs=["chrome://startpageshared","chrome-extension://"],bs=function(e){return gs.some(function(t){return e.startsWith(t)})},ys=function(){var e,t=(0,w.Bd)().t,r=hs(),n=r.pageTitle,a=r.pageTabsGroup,s=r.pageUrl,i=(0,c.D6)(),l=i.view,u=i.isNeonEdition,d=(0,o.useMemo)(function(){var e,t,r;return null!==(e=null!==(t=null===(r=a.find(function(e){return"current_page"===e.placement}))||void 0===r?void 0:r.url)&&void 0!==t?t:s)&&void 0!==e?e:""},[a,s]),f=(0,o.useMemo)(function(){if(bs(d))return null;if(a.length>1&&l===A.Ss.Sidebar){var e=a.find(function(e){return"current_page"===e.placement});return null!=e&&e.title?t("page_context_title",{pageName:null==e?void 0:e.title}):null}return l===A.Ss.Sidebar&&n?t("page_context_title",{pageName:n}):null},[d,t,a,l,n]),p=a.length<1,m=null!==(e=a[0])&&void 0!==e&&e.title?t("page_context_title",{pageName:a[0].title}):"",v=!(!d||!(0,xs.Wg)(d)||bs(d)),h=v?t("tooltip_blocked_info_copy"):t("tooltip_info_copy",{groupName:t(u?"task":"tab_group")});return{pageContextName:f,currentUrl:d,isSingleTask:p,firstTaskTitle:m,isCurrentUrlBlacklisted:v,tooltipCopy:h,pageTabsGroup:a}},js=r(96763),ws=function(){var e=(0,u.A)(f().mark(function e(t){var r;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.file,e.abrupt("return",new Promise(function(e){var t=new FileReader;t.onloadend=function(){var n=t.result;e({name:r.name,mime:r.type,binary:n,size:r.size})},t.readAsDataURL(r)}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),ks=function(e){var t=e.setQuery,r=(0,o.useRef)(null),n=(0,o.useRef)(null),a=(0,o.useRef)(null),i=(0,o.useRef)(null),l=(0,o.useRef)(null),d=(0,o.useRef)(null),p=(0,o.useRef)(null),m=(0,o.useRef)(),v=(0,o.useRef)([]),x=(0,o.useState)(!1),g=(0,Ce.A)(x,2),b=g[0],y=g[1],j=(0,o.useState)([]),w=(0,Ce.A)(j,2),k=w[0],C=w[1],O=(0,o.useState)(!1),_=(0,Ce.A)(O,2),N=_[0],A=_[1],E=(0,o.useState)(""),S=(0,Ce.A)(E,2),I=S[0],P=S[1],M=(0,c.A$)().networkService,D=(0,o.useState)("unknown"),T=(0,Ce.A)(D,2),R=T[0],L=T[1],U=(0,s.vgK)().addNotification,B=(0,c.D6)(),F=B.isDarkTheme,H=B.source,W=(0,s.hiN)().userCapabilities,G=function(){var e=(0,u.A)(f().mark(function e(){var t,r;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){e.next=1;break}return P("Microphone is not available in this browser"),e.abrupt("return");case 1:if(!navigator.permissions){e.next=3;break}return e.next=2,navigator.permissions.query({name:"microphone"});case 2:t=e.sent,L(t.state),t.addEventListener("change",function(){L(t.state)});case 3:e.next=5;break;case 4:e.prev=4,r=e.catch(0),js.error("Error checking permissions:",r),P("Cannot check microphone permissions");case 5:case"end":return e.stop()}},e,null,[[0,4]])}));return function(){return e.apply(this,arguments)}}(),V=function(){if(r.current&&i.current&&l.current){var e=r.current,t=e.getContext("2d");if(t){var n=Math.floor(e.width/5),a=getComputedStyle(document.body),o=function(){var r,s,c,u,d;if(e&&t&&i.current&&l.current){m.current=requestAnimationFrame(o);var f=function(e){var t=e.value,r=e.isDarkTheme,n=e.defaultValue,a=t.trim().match(/^light-dark\(\s*([^,()]+(?:\([^)]*\))?)\s*,\s*(.+?)\s*\)$/i);if(!a)return n;var o=a[1].trim(),s=a[2].trim();return r?s:o}({value:null===(r=a.getPropertyValue("--color-text-03"))||void 0===r?void 0:r.trim(),isDarkTheme:F,defaultValue:null!==(s=null===(c=a.getPropertyValue("--color-text-03"))||void 0===c?void 0:c.trim())&&void 0!==s?s:null===(u=a.getPropertyValue("--color-legacy-text-3"))||void 0===u?void 0:u.trim()});null===(d=i.current)||void 0===d||d.getByteTimeDomainData(l.current);var p=Array.from(l.current),h=p.reduce(function(e,t){return e+Math.abs(t-128)},0)/p.length,x=Math.min(1.5,h/30)*e.height*1.5,g=Math.max(x,.01*e.height);t.clearRect(0,0,e.width,e.height),v.current.push(g),v.current.length>n&&v.current.shift();for(var b=(0,de.A)(v.current);b.length<n;)b.unshift(.01*e.height);var y=.05*e.height;t.fillStyle=f,b.forEach(function(r,n){var a=5*n,o=e.height/2-r/2,s=Math.min(6,r/2);if(t.beginPath(),r<=y){var i=Math.min(1.5,2),c=a+1.5,l=e.height/2;t.arc(c,l,i,0,2*Math.PI)}else t.roundRect(a,o,3,r,s);t.fill()})}else null!=m.current&&(cancelAnimationFrame(m.current),m.current=void 0)};o()}}else setTimeout(V,250)},Y=function(){var e=(0,u.A)(f().mark(function e(){var t,r,o,s;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,P(""),e.next=1,G();case 1:if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){e.next=2;break}throw new Error("Microphone is not available in this browser");case 2:return e.next=3,navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,sampleRate:44100}});case 3:if(t=e.sent,p.current=t,MediaRecorder.isTypeSupported("audio/webm")){e.next=4;break}throw new Error("Audio/webm format is not supported");case 4:r=new MediaRecorder(t,{mimeType:"audio/webm"}),n.current=r,a.current=new AudioContext,i.current=a.current.createAnalyser(),d.current=a.current.createMediaStreamSource(t),d.current.connect(i.current),i.current.fftSize=1024,o=i.current.frequencyBinCount,l.current=new Uint8Array(o),v.current=[],V(),r.onerror=function(e){js.error("MediaRecorder error:",e),P("Error during recording")},r.start(),y(!0),A(!0),L("granted"),e.next=6;break;case 5:e.prev=5,s=e.catch(0),js.error("Error starting recording:",s),s instanceof Error?"NotAllowedError"===s.name?(P("Microphone access was denied"),U({text:"Microphone access was denied",type:"error"}),L("denied")):"NotFoundError"===s.name?(P("Microphone not found"),U({text:"Microphone not found",type:"error"})):"NotReadableError"===s.name?(U({text:"Microphone is being used by another application",type:"error"}),P("Microphone is being used by another application")):(U({text:(null==s?void 0:s.message)||"Something went wrong",type:"error"}),P(s.message)):(U({text:"Unknown error while starting recording",type:"error"}),P("Unknown error while starting recording"));case 6:return e.prev=6,A(!1),e.finish(6);case 7:case"end":return e.stop()}},e,null,[[0,5,6,7]])}));return function(){return e.apply(this,arguments)}}(),K=function(){var e=(0,u.A)(f().mark(function e(){return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,t){try{if(n.current){var r=[];n.current.ondataavailable=function(e){e.data.size>0&&r.push(e.data)},n.current.onstop=function(){null!=m.current&&cancelAnimationFrame(m.current);var t=new Blob(r,{type:"audio/webm"});C([t]),e([t])},n.current.stop()}else t("Error on get recording");p.current&&p.current.getTracks().forEach(function(e){e.stop()}),y(!1)}catch(e){js.error("Error stopping recording:",e),P("Error stopping recording"),t(e)}}));case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),$=function(){var e=(0,u.A)(f().mark(function e(){var r,n,a,o,s,i,c,l,u;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,K();case 1:if(r=e.sent){e.next=2;break}return P("No recording to send"),e.abrupt("return");case 2:return(0,Je.nr)({action:z._b.CLICK,element:z.Q3.VOICE,context:(0,Je.g$)(H),str_value:"voice_in_out:message_send"},W),e.prev=3,A(!0),P(""),n=r[0],a=new File([n],"recording.webm",{type:n.type}),e.next=4,ws({file:a,id:"".concat(n.size,"recording")});case 4:return o=e.sent,s=(new He.HH).convertToFile({name:"recording.webm",mime:n.type,binary:o.binary,size:o.binary.length}),(i=new FormData).append("audio_file",s,"recording.webm"),c="".concat(h.TY,"/v1/").concat(h.RU.endpointTranscribeFile),e.next=5,M.postAuthorized({subUrl:c,body:i});case 5:(l=e.sent).transcript&&t(l.transcript),e.next=7;break;case 6:e.prev=6,u=e.catch(3),js.error("Error sending to server:",u),u instanceof Error?(U({text:u.message||"Error sending to server",type:"error"}),P(u.message)):(U({text:"Unknown error while sending to server",type:"error"}),P("Unknown error while sending to server"));case 7:return e.prev=7,A(!1),e.finish(7);case 8:case"end":return e.stop()}},e,null,[[3,6,7,8]])}));return function(){return e.apply(this,arguments)}}();return{canvasRef:r,isRecording:b,audioChunks:k,isLoading:N,error:I,microphonePermission:R,canStartRecording:"denied"!==R&&!N&&!b,startRecording:Y,stopRecording:K,reset:function(){m.current&&(cancelAnimationFrame(m.current),m.current=void 0),n.current&&"inactive"!==n.current.state&&n.current.stop(),p.current&&(p.current.getTracks().forEach(function(e){e.stop()}),p.current=null),d.current&&(d.current.disconnect(),d.current=null),a.current&&"closed"!==a.current.state&&(a.current.close(),a.current=null),n.current=null,i.current=null,l.current=null,C([]),y(!1),P(""),A(!1)},sendToTranscribe:$}},Cs="before:border-color-accent-50 before:border-t-color-neutral-36 after:border-color-neutral-36 after:border-t-bg-color-accent-50",Os="before:border-color-neutral-36 before:border-t-color-level-1 after:border-color-level-1 after:border-t-color-neutral-36";const _s=function(e){var t=e.spinnerColoring,r=e.sizeClass,n=void 0===r?"h-4 w-4":r;return(0,C.jsx)("span",{"data-testid":ft.Y.LOADING_SPINNER_SPAN,className:(0,p.xW)(n,"gray-accent"===t?Cs:Os,"after:content relative inline-block before:absolute before:block before:h-full before:w-full before:animate-spin before:rounded-full before:border-2 before:border-solid before:content-[''] after:absolute after:block after:h-full after:w-full after:animate-spin after:rounded-full after:border-2 after:border-solid after:delay-150 after:content-['']")})};var Ns=(0,o.memo)(function(){var e=(0,w.Bd)().t,t=(0,ke.D)().product===A.Yt.Neon?"https://help.opera.com/neon-ai-faq":"http://help.opera.com/ai-chat-faq";return(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)("div",{className:"text-body-s w-full select-none py-2 text-center text-color-text-03",children:[(0,C.jsx)("span",{children:e("chat_misleading_responses")}),(0,C.jsx)("a",{className:"cursor-pointer underline underline-offset-1",href:t,target:"_blank",rel:"noopener noreferrer",draggable:"false",children:e("learn_more")})]})})});Ns.displayName="Disclaimer";const As=Ns;var Es=r(6791),Ss=(0,o.memo)(function(e){var t=e.className,r=e.disabled,n=e.selectedModel,a=e.onModelChange,s=(0,w.Bd)().t,i=mo(),c=(0,as.$)().availableModels,l=(0,o.useCallback)(function(e){a(e),i.hide()},[a,i]),u=(0,o.useCallback)(function(){if(!r&&c&&0!==c.length)if(i.state.isVisible)i.hide();else{var e=c.map(function(e){return{id:"model-".concat(e.id),type:"model",value:e.name,label:e.name,description:void 0,icon:void 0,onSelect:function(){return l(e.id)}}});i.showSuggestions(e,"manual","model")}},[r,c,l,i]);return c&&0!==c.length?(0,C.jsxs)("div",{className:F()("flex min-w-0 max-w-full cursor-pointer items-center gap-1 rounded-aria-radius-3 px-aria-3 py-aria-1 transition-colors hover:bg-color-neutral-92-60",{"bg-color-neutral-92-40":i.state.isVisible&&"model"===i.state.currentType,"cursor-not-allowed opacity-50":r},t),onMouseDown:u,onKeyDown:(0,Y.lO)(u),role:"button",tabIndex:r?-1:0,"aria-label":s("choose_model"),children:[(0,C.jsx)("span",{className:"text-body-m min-w-0 flex-1 truncate text-color-text-01",children:function(){if(!n||!c||0===c.length)return s("model");var e=c.find(function(e){return e.id===n});return(null==e?void 0:e.name)||s("model")}()}),(0,C.jsx)("div",{className:F()("flex-shrink-0 transition-transform",{"rotate-180":i.state.isVisible&&"model"===i.state.currentType}),children:(0,C.jsx)(Pt.A,{Icon:os,size:"12px",className:"text-color-text-03"})})]}):null});function Is(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ps(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Is(Object(r),!0).forEach(function(t){(0,b.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Is(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}Ss.displayName="ModelSelector";var Ms=(0,o.memo)(function(e){var t,r,n,a=e.conversationId,i=e.conversationDataSize,l=e.conversationModel,d=e.conversationType,m=e.isStreaming,v=e.defaultValue,x=e.disabled,g=e.onQueryInput,y=e.onQuerySelect,j=e.onSend,k=e.sendToOperator,O=e.onAbort,_=e.isNewConversation,N=e.userQueryHistoryIndex,E=e.isPageAccessBlocked,S=e.selectedModel,I=e.onModelChange,P=e.setChatWebpageAccessorAvailable,M={send_icon:zo,operaAir:{send_icon:Wo}},D=(0,c.sh)(M,["send_icon"]),T=(0,w.Bd)().t,R=hs(),L=R.pageTabsGroup,U=R.pageIconUrl,B=(0,c.D6)(),H=B.product,W=B.isNeonEdition,K=B.windowId,$=B.tabId,q=B.isSwitchToTabEnabled,Q=B.view,X=ys(),Z=X.pageContextName,J=X.isSingleTask,ee=X.firstTaskTitle,te=X.isCurrentUrlBlacklisted,re=(0,G.I7)().isPageContextEnabled,ne=Fe().createNotification,ae=(0,as.$)().availableModels,oe=(0,s.VUi)().remoteConfig,se=null!==(t=null==oe?void 0:oe.deep_research)&&void 0!==t&&t,ie=null!==(r=null==oe?void 0:oe.one_minute_research)&&void 0!==r&&r,ce=null!==(n=null==oe?void 0:oe.model_selector)&&void 0!==n&&n,le=(0,o.useState)([]),ue=(0,Ce.A)(le,2),fe=ue[0],pe=ue[1],me=(0,o.useState)((0,Y.sy)(d)),ve=(0,Ce.A)(me,2),he=ve[0],xe=ve[1],ge=(0,o.useRef)(new Map),be=(0,o.useRef)(new Map),ye=(0,o.useState)(null),je=(0,Ce.A)(ye,2),we=je[0],ke=je[1],Oe=(0,o.useRef)(""),_e=(0,o.useState)(v||""),Ne=(0,Ce.A)(_e,2),Ae=Ne[0],Ee=Ne[1],Se=(0,o.useCallback)(function(e){if(!fe.some(function(t){return t.id===e.id})){var t=fe.filter(function(e){return e.type===oo.SKILL}),r=fe.filter(function(e){return e.type===oo.AGENT});t.length>=h.gL&&e.type===oo.SKILL?ne({text:T("max_skills_limit_reached",{maxSkills:h.gL}),type:"error"}):r.length>=h.QE&&e.type===oo.AGENT?ne({text:T("max_workflow_agents_limit_reached",{maxAgents:h.QE}),type:"error"}):pe(function(t){return[].concat((0,de.A)(t),[e])})}},[fe,ne,T]),Ie=(0,o.useCallback)(function(e){pe(function(t){return t.filter(function(t){return t.id!==e})})},[]),Pe=d===V.He.Operator,Me=he===z.M5.MAKE,De=d===V.He.Research||d===V.He.OneMinuteResearch||he===z.M5.RESEARCH||he===z.M5.ONE_MINUTE_RESEARCH;(0,o.useEffect)(function(){xe((0,Y.sy)(d))},[d]),(0,o.useEffect)(function(){Oe.current=Ae},[Ae]),(0,o.useEffect)(function(){var e=String($);null!==we&&we!==e&&(be.current.set(we,Oe.current),ge.current.set(we,he)),ke(e);var t=be.current.get(e),r=ge.current.get(e);if(r){var n=r||z.M5.CHAT;xe(n),P(n===z.M5.CHAT)}Ee(void 0!==t?t:"")},[$,we]),(0,o.useEffect)(function(){null!==we&&(be.current.set(we,Ae),ge.current.set(we,he))},[we,Ae,he]),function(e,t){var r=(0,s.VUi)().remoteConfig,n=(0,s.xGn)(),a=n.setPageContextData,i=n.setIsFileContext,c=n.setPageContextTabGroup,l=(0,o.useCallback)(function(){var t=(0,u.A)(f().mark(function t(r){return f().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(-1!==r){t.next=1;break}return c([]),t.abrupt("return");case 1:try{chrome.tabs.query({windowId:e,groupId:r},function(e){c(ts(e))})}catch(e){Jo.error("Failed to query tabs for group",r,e)}case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),[c,e]),d=(0,o.useCallback)(function(){chrome.tabs.query({windowId:e,active:!0},function(e){var t=null==e?void 0:e[0];-1!==t.groupId?l(t.groupId):c([])})},[l,c,e]),p=(0,o.useCallback)(function(t,r){r.windowId===e&&d()},[e,d]),m=(0,o.useCallback)(function(){var e=(0,u.A)(f().mark(function e(t){var n,o,s,c,l;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=1;break}return e.abrupt("return");case 1:if(o=null!==(n=null==t?void 0:t.url)&&void 0!==n?n:"",s=!1,!r.page_file_context||!o){e.next=3;break}return e.next=2,es(o);case 2:s=e.sent,i(s);case 3:t.active?a({url:o,title:null!==(c=null==t?void 0:t.title)&&void 0!==c?c:"",pageContent:"",favIconUrl:null!==(l=null==t?void 0:t.favIconUrl)&&void 0!==l?l:""}):d();case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[r.page_file_context,a,i,d]),v=(0,o.useCallback)((0,u.A)(f().mark(function t(){var r;return f().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=1,(0,Ye.e6)(e);case 1:return r=t.sent,t.next=2,m(r);case 2:case"end":return t.stop()}},t)})),[e,m]),h=(0,o.useCallback)(function(){var r=(0,u.A)(f().mark(function r(n,a,o){return f().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(n===t&&o.windowId===e){r.next=1;break}return r.abrupt("return");case 1:if(!a.groupId){r.next=3;break}return r.next=2,l(a.groupId);case 2:return r.next=3,m(o);case 3:if("complete"===a.status){r.next=4;break}return r.abrupt("return");case 4:if(!o.active||-1===o.groupId){r.next=6;break}return r.next=5,l(o.groupId);case 5:r.next=7;break;case 6:c([]);case 7:return r.next=8,m(o);case 8:case"end":return r.stop()}},r)}));return function(e,t,n){return r.apply(this,arguments)}}(),[l,c,t,m,e]),x=(0,o.useCallback)(function(r){r.windowId===e&&r.tabId===t&&chrome.tabs.get(r.tabId,function(){var e=(0,u.A)(f().mark(function e(t){return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=1;break}return e.abrupt("return");case 1:if(m(t),-1===t.groupId){e.next=3;break}return e.next=2,l(t.groupId);case 2:e.next=4;break;case 3:c([]);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())},[e,t,m,l,c]);(0,o.useEffect)(function(){chrome.tabs.query({windowId:e,active:!0},function(t){var r=(null==t?void 0:t[0]).groupId;r>=0?chrome.tabs.query({windowId:e,groupId:r},function(e){c(ts(e))}):c([])})},[e,c]),(0,o.useEffect)(function(){return v(),chrome.tabs.onUpdated.addListener(h),chrome.tabs.onActivated.addListener(x),chrome.tabs.onRemoved.addListener(p),function(){chrome.tabs.onUpdated.removeListener(h),chrome.tabs.onActivated.removeListener(x),chrome.tabs.onRemoved.removeListener(p)}},[v,h,x,d,p])}(K,Q===A.Ss.Sidebar?(0,Es.P)($):$);var Te=function(e){var t=e.conversationId,r=e.conversationDataSize,n=e.conversationModel,a=(0,s.QB_)().checkIfExistInRegistry,i=(0,s.Yei)(),c=i.currentModel,l=i.fetchedModels,u=(0,o.useMemo)(function(){return t===h.BR||r<=2&&!n},[r,t,n]),d=(0,o.useMemo)(function(){return u?"Aria"===c:(0,et.LS)(n)},[u,c,n]),f=(0,o.useMemo)(function(){return a(u?c:n)},[u,c,n,a]),m=(0,o.useMemo)(function(){return u?c:n||"cloud"},[u,c,n]),v=(0,o.useMemo)(function(){var e;return!d&&!(null===(e=l.find(function(e){return e.family_name===(0,p.fF)("Aria"!==c?c:n||"").split(":")[0]}))||void 0===e||null===(e=e.kind)||void 0===e||!e.includes(z.B9.MULTIMODAL))},[n,c,l,d]),x=(0,o.useMemo)(function(){var e=m.split("/");return(null==e?void 0:e.length)<2?m:e[1]},[m]);return{isAriaModel:d,isCloudModel:f,modelName:m,parsedModelName:x,currentModel:c,isMultiModal:v}}({conversationId:a,conversationDataSize:i,conversationModel:l}),Re=Te.isAriaModel,Le=Te.isCloudModel,Ue=Te.parsedModelName,Be=Te.currentModel,He=Te.isMultiModal,ze=(0,c.lN)({currentModel:Be,conversationId:a,createNotification:ne}),We=(0,o.useRef)(null),Ge=(0,o.useRef)(null),Ve=(0,o.useRef)(null),Ke=mo();(0,o.useEffect)(function(){N>-1&&void 0!==v?Ee(v):-1===N&&Ee("")},[N,v]);var $e=(0,o.useCallback)(function(){var e;null===(e=We.current)||void 0===e||e.focus()},[]);(0,o.useEffect)(function(){Ke.state.isVisible||$e()},[Ke.state.isVisible,$e]);var qe=(0,o.useCallback)(function(e){Ee(function(t){return t+e})},[]),Qe=ks({setQuery:qe}),Xe=Qe.canvasRef,Ze=Qe.isRecording,Je=Qe.startRecording,tt=Qe.isLoading,rt=Qe.reset,nt=Qe.sendToTranscribe,at=(0,o.useCallback)(function(){var e=Object.values(z.M5).filter(function(e){return!(!se&&e===z.M5.RESEARCH)&&!(!ie&&e===z.M5.ONE_MINUTE_RESEARCH)});return Object.values(e).map(function(e){return{label:e.charAt(0).toUpperCase()+e.slice(1).toLowerCase(),value:e}})},[se,ie]),ot=(0,o.useCallback)(function(e){return Object.values(z.M5).some(function(t){return t.toLowerCase()===e.toLowerCase()})},[]),st=(0,o.useMemo)(function(){return x||!m&&!Ae.length||tt||ze.isProcessingFiles},[x,ze.isProcessingFiles,Ae.length,m,tt]),it=(0,o.useCallback)(function(){var e=Ae.trim();if(m&&a&&O(),e&&!st){var t=fe.filter(function(e){return e.type===oo.SKILL}),r=fe.filter(function(e){return e.type===oo.AGENT});Pe?k({text:e,files:ze.files,skills:t.length>0?t:void 0,agents:(null==r?void 0:r.length)>0?r:void 0,isFromChat:!1,isNewConversation:!!_}):j({message:e,files:ze.files,skills:t.length>0?t:void 0,localChatMode:he,selectedModel:S}),ze.reset(),pe([]),Ee("")}},[Ae,m,st,Pe,O,a,ze,k,fe,_,j,he,S]),ct=(0,o.useCallback)(function(e){Se(e)},[Se]),lt=(0,o.useCallback)(function(e){xe(e),P(e===z.M5.CHAT),Ee(function(e){var t,r=e.trim().split(/\s+/);return null!==(t=r[0])&&void 0!==t&&t.startsWith("@")?r.slice(1).join(" "):e})},[P]),ut=(0,o.useCallback)(function(e){xe(e),P(e===z.M5.CHAT)},[P]),dt=(0,o.useCallback)(function(){window.open(Do.uw,"_blank")},[]),pt=(0,o.useCallback)(function(){return{id:"browse-more",type:"card",value:T("browse_more_skills"),label:T("browse_more_skills"),icon:Ja,onSelect:dt}},[T,dt]),mt=(0,o.useCallback)(function(e){if(null!=e&&e.trigger&&!Pe){if(W&&e.type===z.I5.MODE){var t=e.text.replace("@","");if(ot(t))lt(t),Ke.hide();else{var r=wo(at().map(function(e){return e.value}),e.text,lt,T);Ke.showSuggestions(r,"typing","mode")}}}else"manual"!==Ke.state.trigger&&Ke.hide()},[Pe,W,Ke,ot,lt,at,T]),vt=(0,o.useCallback)(function(e){if(e&&!Pe&&e.type===z.I5.MODE){var t=e.text.replace(e.trigger,"");xe(t),Ee(function(t){return t.replace(e.text,"").trim()}),Ke.hide()}},[Pe,Ke]),ht=(0,o.useCallback)(function(){return m?O():it()},[m,it,O]),xt=m?Go:D.send_icon,gt=T(m?"stop":"submit"),bt=(0,o.useCallback)(function(){-1===N&&g()},[g,N]),yt=(0,o.useCallback)((0,u.A)(f().mark(function e(){var t,r;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ke.state.isVisible){e.next=1;break}return Ke.hide(),e.abrupt("return");case 1:return e.next=2,ms(Pe);case 2:t=e.sent,r=bo(t,ct),Ke.showSuggestions(r,"manual","card",!1,fe.map(function(e){return e.id}),pt()),$e();case 3:case"end":return e.stop()}},e)})),[Ke,Pe,ct,fe,pt,$e]),jt=(0,o.useCallback)(function(e){if(Ke.state.isVisible){if("ArrowUp"===e.key||"ArrowDown"===e.key)return e.preventDefault(),e.stopPropagation(),void Ke.navigate("ArrowUp"===e.key?"up":"down");if("Enter"===e.key&&!e.shiftKey)return e.preventDefault(),e.stopPropagation(),void Ke.select();if("Escape"===e.key)return e.preventDefault(),e.stopPropagation(),void Ke.hide()}if("/"===e.key&&e.ctrlKey&&Ve.current)return e.preventDefault(),e.stopPropagation(),void yt();if("Enter"===e.key&&!e.shiftKey)return e.preventDefault(),void ht();if(("ArrowUp"===e.key||"ArrowDown"===e.key)&&!Ke.state.isVisible)if(-1===N)""===Ae.trim()&&(e.preventDefault(),y(e.key));else{var t,r=null===(t=We.current)||void 0===t?void 0:t.getCaretPosition(),n=!1;if(null!=r){var a=!Ae.substring(0,r).includes("\n"),o=!Ae.substring(r).includes("\n");n="ArrowUp"===e.key&&a||"ArrowDown"===e.key&&o}else n=!0;n&&(e.preventDefault(),y(e.key))}},[Ke,ht,y,N,yt,Ae]),wt=(0,o.useCallback)(function(){Ge.current&&(Ge.current.value="")},[]),kt=(0,o.useCallback)(function(){var e=(0,u.A)(f().mark(function e(t){var r,n=arguments;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=!(n.length>1&&void 0!==n[1])||n[1],null==ze||ze.upload(t,r),$e(),wt();case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[ze,$e,wt]),Ct=(0,o.useCallback)(function(e){wt(),null==ze||ze.removeFile(e)},[wt,ze]),_t=(0,o.useCallback)(function(){var e=(0,u.A)(f().mark(function e(t){var r,n,a;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Ie(t),!Ke.state.isVisible||"manual"!==Ke.state.trigger||"card"!==Ke.state.currentType){e.next=2;break}return r=fe.filter(function(e){return e.id!==t}),e.next=1,ms(Pe);case 1:n=e.sent,a=bo(n,ct),Ke.showSuggestions(a,"manual","card",!0,r.map(function(e){return e.id}),pt());case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[Ie,Ke,fe,Pe,ct,pt]),Nt=(0,o.useMemo)(function(){return Re&&q&&(!Me&&!De)},[Re,Me,De,q]),At=(0,o.useMemo)(function(){var e=!Me&&!De;return Re&&(q||!!L.length)&&e},[Re,Me,De,q,L.length]),Et=(0,o.useMemo)(function(){return Pe?E:E||!re},[Pe,E,re]),St=(0,o.useMemo)(function(){return Pe?te:te||!re},[te,Pe,re]),It=(0,o.useMemo)(function(){return W&&(d===V.He.Chat||Q===A.Ss.Tab&&a===h.BR)},[W,d,Q,a]),Mt=(0,o.useMemo)(function(){return W&&d===V.He.Chat&&!(null==ae||!ae.length)&&ce},[W,d,null==ae?void 0:ae.length,ce]),Dt=(0,o.useMemo)(function(){var e=H,t=(0,b.A)((0,b.A)((0,b.A)((0,b.A)((0,b.A)({},z.M5.CHAT,T(W?"type_here":"ask_anything",{productName:e})),z.M5.DO,T("type_here_do",{productName:e})),z.M5.MAKE,T("type_here_make",{productName:e})),z.M5.RESEARCH,T("type_here_research",{productName:e})),z.M5.ONE_MINUTE_RESEARCH,T("type_here_research",{productName:e}));return Re?t[he]:T("type_here_to_local_model")},[H,T,W,Re,he]),Tt=(0,o.useMemo)(function(){return W?h.AW:Pe?h.Ic:h.b8},[W,Pe]),Lt="".concat(Ae.length,"/").concat(Tt),Ut=(0,o.useMemo)(function(){if(!Re)return!1;var e=Pe?h.L5:h.E0;return Ae.length>e},[Re,Pe,Ae.length]),Bt=(0,o.useMemo)(function(){return{showUpload:!!ze&&(He||Re)&&!x,showAttachedFilesList:!(null==ze||!ze.files.length),showAttachedCardsList:fe.length>0,shouldShowPageContextDisclaimer:Nt&&!!Z,shouldShowGroupPageContextDisclaimer:At,shouldShowModelDisclaimer:!Re}},[ze,He,Re,x,fe.length,Nt,Z,At]),Ft=(0,o.useCallback)(function(){return Bt.shouldShowPageContextDisclaimer?Z||"":T(Le?"cloud_model_input_disclaimer":"using_local_model",{modelName:Ue,productName:H})},[Bt.shouldShowPageContextDisclaimer,Z,Le,T,Ue,H]);return(0,o.useEffect)(function(){ps().then(function(e){Ve.current=e})},[]),(0,o.useEffect)(function(){var e,t=function(){$e()};return null===(e=opr)||void 0===e||null===(e=e.browserSplitViewPrivate)||void 0===e||null===(e=e.OnSidePanelToggled)||void 0===e||e.addListener(t),function(){var e;null===(e=opr)||void 0===e||null===(e=e.browserSplitViewPrivate)||void 0===e||null===(e=e.OnSidePanelToggled)||void 0===e||e.removeListener(t)}},[$e]),(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"mb-1.5 mt-1",children:[!J&&Bt.shouldShowGroupPageContextDisclaimer&&(0,C.jsx)(Lo,{content:ee,rounded:!0,group:L.length,isPageAccessBlocked:Et}),(Bt.shouldShowModelDisclaimer||Bt.shouldShowPageContextDisclaimer)&&(0,C.jsx)(Lo,{content:Ft(),iconUrl:U,rounded:J,isPageAccessBlocked:St})]}),(0,C.jsxs)("div",{className:F()("input-container-outer relative z-1 flex w-full flex-col items-center bg-color-level-2 focus-within:shadow-chatInputFocusShadow dark:focus-within:shadow-chatInputFocusShadowDark","border border-color-neutral-90",Bt.shouldShowModelDisclaimer||Bt.shouldShowPageContextDisclaimer?"rounded-b-aria-radius-3":"rounded-aria-radius-3",{"mt-auto":q}),children:[(0,C.jsxs)("div",{className:F()("input-container relative z-2 flex w-full select-none items-end ","flex-col p-aria-3 pt-0",Bt.shouldShowModelDisclaimer||Bt.shouldShowPageContextDisclaimer?"rounded-b-aria-radius-3":"rounded-aria-radius-3"),children:[Ut&&(0,C.jsx)("div",{className:"text-body-s absolute -bottom-3 left-2 !text-xxxs text-color-text-02",children:Lt}),Ze?(0,C.jsx)("div",{className:"my-aria-2 flex w-full",children:(0,C.jsx)("canvas",{ref:Xe,width:1e3,className:"block h-[36px] w-full"})}):(0,C.jsx)(ns,{id:ft.Y.CHAT_INPUT,"data-testid":ft.Y.CHAT_INPUT,className:"hover-scrollbar chat-input text-body-l my-1 w-full resize-none border-none bg-transparent p-1 py-2 text-color-text-01 outline-none placeholder:text-color-text-03",placeholder:Dt,maxLength:Re?Tt:void 0,value:Ae,onChange:Ee,ref:We,onKeyDown:jt,onInput:bt,spellCheck:!1,disabled:x,onComponentEdit:mt,onComponentEditEnter:vt,disableModeDetection:Pe},a),(0,C.jsxs)("div",{className:"flex w-full flex-row items-center justify-between gap-1",children:[(0,C.jsxs)("div",{className:"flex gap-1",children:[Bt.showUpload&&(0,C.jsx)(Ho,{fileInputRef:Ge,disabled:null==ze?void 0:ze.limitReached,onAction:kt}),Ve.current&&(0,C.jsx)(er,{title:T("cards"),children:function(e){var t=e.ref,r=e.referenceProps;return(0,C.jsx)("div",Ps(Ps({ref:t},r),{},{className:F()("custom-button flex h-8 w-8 cursor-pointer items-center justify-center rounded-aria-radius-3",{"bg-color-neutral-92-60":Ke.state.isVisible&&"card"===Ke.state.currentType,"hover:bg-color-neutral-92-60":!(Ke.state.isVisible&&"card"===Ke.state.currentType)}),onMouseDown:yt,onKeyDown:(0,Y.lO)(yt),role:"button",tabIndex:0,children:(0,C.jsx)(Pt.A,{Icon:Ja,size:"17px",spacing17:!0})}))}})]}),Mt&&(0,C.jsx)(Ss,{selectedModel:S,onModelChange:I}),(0,C.jsxs)("div",{className:"flex gap-1",children:[It&&(0,C.jsx)(ss,{disabled:x,localChatMode:he,setLocalChatMode:ut}),(0,C.jsx)("div",{className:"flex items-center gap-aria-2",children:Ze?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(Rt,{type:"tertiary",icon:Ot,onClick:rt,className:F()("input-action flex h-8 w-8 items-center justify-center rounded-aria-radius-3 hover:bg-color-neutral-92-60"),iconSize:17}),(0,C.jsx)(Rt,{type:"tertiary",icon:sn,onClick:nt,className:F()("input-action flex h-8 w-8 items-center justify-center rounded-aria-radius-3 hover:bg-color-neutral-92-60"),iconSize:17})]}):(0,C.jsxs)(C.Fragment,{children:[tt?(0,C.jsx)("div",{className:F()("flex h-8 w-8 items-center justify-center"),children:(0,C.jsx)(_s,{})}):(0,C.jsx)(er,{title:T("dictate"),children:function(e){var t=e.ref,r=e.referenceProps;return(0,C.jsx)(Rt,Ps(Ps({ref:t},r),{},{icon:Vo,testId:ft.Y.WEB_2_0_VOICE_MODE_BUTTON,onClick:Je,type:"tertiary",className:F()("input-action flex h-8 w-8 items-center justify-center rounded-aria-radius-3 hover:bg-color-neutral-92-60"),iconSize:17}))}}),(0,C.jsx)(er,{title:gt,children:function(e){var t=e.ref,r=e.referenceProps;return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(Rt,Ps(Ps({ref:t},r),{},{icon:xt,testId:ft.Y.WEB_2_0_SEND_BUTTON,onClick:ht,type:"primary",disabled:st,className:"input-send h-8 w-8 !justify-center transition-[background-color] duration-150 ease-in",iconClassName:"transition-[background-color] duration-150 ease-in",iconSize:17}))})}})]})})]})]})]}),Bt.showAttachedFilesList&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:"h-px w-full bg-color-neutral-90"}),(0,C.jsx)("div",{className:"w-full p-aria-3",children:(0,C.jsx)(Qo,{files:null==ze?void 0:ze.files,onRemove:Ct})})]}),Bt.showAttachedCardsList&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:"h-px w-full bg-color-neutral-90"}),(0,C.jsx)("div",{className:"w-full p-aria-3",children:(0,C.jsx)(Xo,{cards:fe,onRemove:_t})})]})]})]})});Ms.displayName="InputContainerInner";var Ds=(0,o.memo)(function(e){var t=(0,c.D6)().isSwitchToTabEnabled?"top":e.isNewConversation?"bottom":"top";return(0,C.jsxs)(vo,{strategy:t,children:[(0,C.jsx)(Ms,Ps({},e)),e.isDisclaimerShown&&(0,C.jsx)(As,{})]})});Ds.displayName="InputContainer";const Ts=Ds;function Rs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ls(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Rs(Object(r),!0).forEach(function(t){(0,b.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rs(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}const Us=function(e){var t=e.className,r=e.conversationId,n=e.border,a=st().openTabView,l=(0,c.D6)(),u=l.productName,d=l.isNeonEdition,f=l.source,p=(0,s.hiN)().userCapabilities,m=(0,w.Bd)().t,v=(0,o.useCallback)(function(){(0,Je.nr)({action:z._b.CLICK,element:z.Q3.CHAT,context:(0,Je.g$)(f),ai_provider:(0,Je.n$)(null==p?void 0:p.ai_provider),str_value:"OpenInTab"}),d&&(0,i.ef)(),a(null!=r?r:h.BR)},[f,null==p?void 0:p.ai_provider,d,a,r]),x=(0,o.useCallback)(function(e){e.stopPropagation(),v()},[v]),g=(0,o.useCallback)(function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),e.stopPropagation(),v())},[v]);return(0,C.jsx)(er,{placement:"bottom",title:m("open_in_tab"),children:function(e){var r=e.ref,a=e.referenceProps;return(0,C.jsx)(Rt,Ls(Ls({ref:r},a),{},{icon:It,border:n,title:"Open ".concat(u," Tab view"),type:"tertiary",onClick:x,onKeyUp:g,tabIndex:-1,iconSize:17,className:F()("flex items-center","open-tab-view-icon",t)}))}})};var Bs=r(58689),Fs=r(34743),Hs=r(18491);const zs=r.p+"assets/39e62c74796fe030afb6.svg",Ws=r.p+"assets/fc4b6918bb12d4616ef5.svg",Gs=r.p+"assets/bf22617d82663a39e6bd.svg";function Vs(e){var t=e.active,r=e.className,n=e.rotation,a={icon:Ws,animation:"transition-transform duration-300",rotate:n?t?n.active:n.base:t?"-rotate-90":"rotate-90",color:"var(--color-text-03)",operaGx:{icon:Gs,color:"var(--color-legacy-text-1)"},operaAir:{color:"var(--color-legacy-text-1)"}},o=(0,c.sh)(a,["rotate","animation"]);return(0,C.jsx)(lo.$,{config:a,className:(0,p.xW)(o.animation,o.rotate,r)})}var Ys=function(e){var t=e.label,r=e.icon,n=e.action,a=e.className,o=e.iconClassName;return(0,C.jsxs)($t.$n,{type:"context-menu",className:F()("!text-body-m h-10 cursor-pointer justify-between gap-1",a),disabled:!1,onClick:n,children:[(0,C.jsx)(Pt.A,{Icon:r,color:o,size:"17px",spacing17:!0}),t&&(0,C.jsx)("span",{className:"capitalize",children:t})]})},Ks=function(e){return e.chevron="chevron",e.threeDot="threeDot",e}({});const $s=function(e){var t=e.crossAxisShift,r=void 0!==t&&t,n=e.items,a=e.isOpen,o=void 0!==a&&a,s=e.setIsOpen,i=e.onVisibilityUpdate,c=e.placement,l=void 0===c?"bottom-end":c,u=e.xOffset,d=void 0===u?0:u,f=e.yOffset,p=void 0===f?0:f,m=e.type,v=(0,Bs.we)({middleware:[(0,Fs.cY)({mainAxis:16+p,crossAxis:d}),(0,Hs.BN)({mainAxis:!1,crossAxis:r})],placement:l,open:o,onOpenChange:s,whileElementsMounted:Hs.ll}),h=v.refs,x=v.floatingStyles,g=function(){s(function(e){return!e}),null==i||i(!o)};return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{ref:h.setReference,role:"button",onClick:g,onKeyUp:(0,Y.lO)(g),tabIndex:0,className:"flex h-4 w-4 flex-auto items-center justify-center rounded-aria-radius-3 bg-transparent hover:bg-color-level-2",children:[(m===Ks.threeDot||!m)&&(0,C.jsx)(Pt.A,{Icon:zs}),m===Ks.chevron&&(0,C.jsx)(Vs,{rotation:{active:"rotate-90",base:"-rotate-90"},active:o})]}),o&&(0,C.jsxs)(Bs.XF,{children:[(0,C.jsx)(Bs.zR,{className:"fixed inset-0 z-[100]",onClick:g}),(0,C.jsx)("div",{ref:h.setFloating,className:"z-[101]",style:x,children:(0,C.jsx)("div",{className:"contextmenu flex flex-col rounded-aria-radius-5 border border-color-neutral-93 bg-color-neutral-98 p-2 shadow-md",children:n.map(function(e){return(0,C.jsx)(Ys,{label:e.label,icon:e.icon,action:function(){e.action(),s(!1)},className:e.className,iconClassName:e.iconClassName},e.label)})})})]})]})};r(36623);var qs=r(71222),Qs=(0,o.memo)(function(e){var t=e.isSpeaking,r=e.scale,n=function(e){return t?"":"gradient_".concat(e,"-turn")};return(0,C.jsx)("span",{className:(0,p.xW)("blob"),style:{transform:"scale(".concat(r,")")},children:(0,C.jsxs)("svg",{width:"500",height:"500",viewBox:"0 0 500 500",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,C.jsx)("g",{filter:"url(#filter0_f_7257_25)",id:"flare_7257_25",children:(0,C.jsx)("ellipse",{cx:"213.333",cy:"210",rx:"96.6667",ry:"93.3333",fill:"#82F8FF",fillOpacity:"0.4"})}),(0,C.jsx)("g",{filter:"url(#filter1_f_7257_25)",id:"circle_7257_25",children:(0,C.jsx)("circle",{cx:"276.667",cy:"276.667",r:"93.3333",fill:"#5021FF",fillOpacity:"0.4"})}),(0,C.jsx)("mask",{id:"mask0_7257_25",maskUnits:"userSpaceOnUse",x:"130",y:"130",width:"234",height:"234",children:(0,C.jsx)("circle",{cx:"246.667",cy:"246.667",r:"116.667",fill:"#5021FF"})}),(0,C.jsxs)("g",{mask:"url(#mask0_7257_25)",id:"main_7257_25",children:[(0,C.jsx)("g",{filter:"url(#filter2_f_7257_25)",id:n("7257_25_1"),children:(0,C.jsx)("path",{d:"M504.214 89.033C528.721 142.667 505.108 206.013 451.473 230.52C397.839 255.026 467.324 332.996 309.987 177.779C152.65 22.562 309.093 60.7988 362.728 36.2923C416.362 11.7859 479.708 35.3987 504.214 89.033Z",fill:"#F17532"})}),(0,C.jsx)("g",{filter:"url(#filter3_f_7257_25)",id:n("7257_25_2"),children:(0,C.jsx)("path",{d:"M210.209 254.785C115.75 341.021 162.406 361.556 103.438 361.556C44.4699 361.556 -3.33301 313.753 -3.33301 254.785C-3.33301 195.817 44.4699 148.014 103.438 148.014C162.406 148.014 304.667 168.55 210.209 254.785Z",fill:"#82F8FF"})}),(0,C.jsx)("g",{filter:"url(#filter4_f_7257_25)",id:n("7257_25_3"),children:(0,C.jsx)("path",{d:"M223.07 289.462C345.798 253.451 312.895 214.518 365.876 240.406C418.857 266.294 440.82 330.231 414.932 383.212C389.044 436.193 325.107 458.156 272.126 432.268C219.145 406.38 100.342 325.473 223.07 289.462Z",fill:"#4902F4"})})]}),(0,C.jsx)("g",{filter:"url(#filter5_i_7257_25)",id:"shine_7257_25",children:(0,C.jsx)("circle",{cx:"246.667",cy:"246.667",r:"116.667",fill:"#5021FF",fillOpacity:"0.01"})}),(0,C.jsxs)("defs",{children:[(0,C.jsxs)("filter",{id:"filter0_f_7257_25",x:"34.3998",y:"34.4",width:"357.867",height:"351.2",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,C.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,C.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,C.jsx)("feGaussianBlur",{stdDeviation:"41.1333",result:"effect1_foregroundBlur_7257_25"})]}),(0,C.jsxs)("filter",{id:"filter1_f_7257_25",x:"101.067",y:"101.067",width:"351.2",height:"351.2",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,C.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,C.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,C.jsx)("feGaussianBlur",{stdDeviation:"41.1333",result:"effect1_foregroundBlur_7257_25"})]}),(0,C.jsxs)("filter",{id:"filter2_f_7257_25",x:"81.6831",y:"-133.391",width:"592.214",height:"565.257",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,C.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,C.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,C.jsx)("feGaussianBlur",{stdDeviation:"80",result:"effect1_foregroundBlur_7257_25"})]}),(0,C.jsxs)("filter",{id:"filter3_f_7257_25",x:"-163.333",y:"-11.9857",width:"565.073",height:"533.542",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,C.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,C.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,C.jsx)("feGaussianBlur",{stdDeviation:"80",result:"effect1_foregroundBlur_7257_25"})]}),(0,C.jsxs)("filter",{id:"filter4_f_7257_25",x:"9.37744",y:"72.0044",width:"576.418",height:"531.128",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,C.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,C.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,C.jsx)("feGaussianBlur",{stdDeviation:"80",result:"effect1_foregroundBlur_7257_25"})]}),(0,C.jsxs)("filter",{id:"filter5_i_7257_25",x:"130",y:"130",width:"236.667",height:"236.667",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,C.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,C.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,C.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,C.jsx)("feOffset",{dx:"3.33333",dy:"3.33333"}),(0,C.jsx)("feGaussianBlur",{stdDeviation:"1.66667"}),(0,C.jsx)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,C.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.25 0"}),(0,C.jsx)("feBlend",{mode:"normal",in2:"shape",result:"effect1_innerShadow_7257_25"})]})]})]})})});const Xs=function(e){var t=e.transcribedMessage,r=e.isUserSpeaking,n=e.partialTranscribedMessage,a=e.handleMicrophoneButton;return(0,C.jsxs)("div",{className:"flex min-h-20 flex-col items-center justify-center gap-aria-5",children:[(0,C.jsx)("p",{className:"text-subheader-m flex h-5 w-full items-center justify-center text-color-text-03",children:r?n:t}),(0,C.jsxs)("div",{className:"relative flex items-center justify-center",children:[r&&(0,C.jsx)("div",{className:"absolute",children:(0,C.jsx)("div",{className:"h-7 w-7 animate-ping rounded-full bg-[#AD45FF] blur-sm"})}),(0,C.jsx)(k.K0,{type:"primary",className:r?"animate-size-down":"",disabled:r,disabledClickable:!0,onClick:a,children:(0,C.jsx)(lo.$,{color:r?"var(--color-text-01)":"",src:Vo,size:17,bgSize:"100% 100%"})})]})]})};var Zs=r(12908);const Js=function(e){var t=e.onClose,r=e.conversationId,n=e.lastMessage,a=e.showOnCloseError,i=(0,Zs.A)().isAriaInTabView,l=(0,w.Bd)().t,d=(0,c.A$)().loggerService,m=(0,c.hN)(),v=m.pushNotification,x=m.notifications,g=m.closeNotification,b=st().sendPrompt,y=(0,o.useCallback)(function(e,t){d.debug("VoiceOverlay: Voice input completed",{transcribedText:e,conversationId:t}),D(!1),b(e,{isVoice:!0})},[d,b]),j=(0,qs.C$)(y),k=j.transcribedText,O=j.partialText,_=j.isRecording,N=j.startVoiceInput,A=j.stopVoiceInput,E=j.clearVoiceInputSession,S=j.disableAutoRestart,I=(0,o.useState)(!0),P=(0,Ce.A)(I,2),M=P[0],D=P[1],T=(0,s.uHm)().chatContext,R=(0,s.hiN)().userCapabilities,L=(0,s.c36)().setIsVoiceMode,U=(0,o.useMemo)(function(){return(null==n?void 0:n.sender)===z.U1.aria?n.content:""},[n]),B=(0,qs.RF)(r,(null==n?void 0:n.id)||"",_),F=B.isSpeaking,H=B.stop,W=B.scale,G=(0,o.useCallback)(function(){A(),S(),H(),L(!1),t()},[t,A,S,H,L]),V=(0,o.useMemo)(function(){return k.length>=h.b8?k.slice(0,h.b8):k},[k]),Y=function(){var e=(0,u.A)(f().mark(function e(){return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(d.debug("VoiceOverlay: microphone button clicked",{isRecording:_,transcribedText:k,chatContextWorking:T.working,isSpeaking:F}),H(),!T.working&&!F){e.next=2;break}return T.working&&b("",{isVoice:!0}),e.next=1,$();case 1:e.next=4;break;case 2:if(!_&&!k){e.next=3;break}V&&(0,Je.nr)({action:z._b.CLICK,element:z.Q3.VOICE,context:i?z.dd.BROWSER_TAB:z.dd.SIDEBAR,str_value:"voice_in_out:message_send"},R),K(),e.next=4;break;case 3:return e.next=4,$();case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),K=function(){D(!1);var e=V;b(e,{isVoice:!0}),e||_||d.debug("User didn't say anything",e),setTimeout(function(){return E()},2e3)},$=function(){var e=(0,u.A)(f().mark(function e(){var t;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.debug("VoiceOverlay: listenForUserSpeech called",{conversationId:r}),L(!0),e.prev=1,e.next=2,N(r);case 2:d.debug("VoiceOverlay: startVoiceInput completed"),e.next=4;break;case 3:e.prev=3,t=e.catch(1),d.error("VoiceOverlay: startVoiceInput failed",t);case 4:case"end":return e.stop()}},e,null,[[1,3]])}));return function(){return e.apply(this,arguments)}}();(0,o.useEffect)(function(){k.length>=h.b8?(setTimeout(function(){a&&a(l("your_question_reached_maximum_length",{maxInputLength:h.b8}),"error")},.5*h.Z2),K()):k.length>=h.E0&&(x.length&&x.forEach(function(e){return g(e.id)}),v(l("your_question_approaches_maximum_length",{transcribedMessageLength:k.length,maxInputLength:h.b8}),"info"))},[k]),(0,o.useEffect)(function(){$()},[]),(0,o.useEffect)(function(){_&&H()},[_]);var q=(0,o.useMemo)(function(){return _?"i_m_listening":F?"i_m_speaking":T.working?"i_m_thinking":(d.debug("Voice mode encountered unexpected state","chatContext.working, lastAriaMessage, isSpeaking, isRecording",T.working,U,F,_),"")},[_,F,T.working,d,U]),Q=(0,o.useMemo)(function(){return!!U&&U.includes("![](")&&!M&&!T.working&&(_||F||!q)},[T.working,M,F,_,U,q]);return(0,Rr.createPortal)((0,C.jsx)("dialog",{tabIndex:-1,id:"voice-overlay",className:(0,p.xW)("fixed inset-x-0 inset-y-0 z-10 h-screen w-screen bg-color-neutral-98","flex flex-col items-center justify-center","gap-3",i?"px-[52px]":"px-[24px]"),open:!0,ref:function(e){null==e||e.focus()},children:(0,C.jsxs)("div",{className:"relative flex h-full w-full flex-col justify-between p-aria-7",children:[(0,C.jsxs)("div",{className:"z-50",children:[(0,C.jsx)("div",{className:"flex w-full flex-row justify-end",children:(0,C.jsx)(Rt,{testId:ft.Y.ARIA_VOICE_IN_OUT_PREVIEW_CLOSE_BUTTON,type:"tertiary",onClick:function(){(0,Je.nr)({action:z._b.CLICK,element:z.Q3.VOICE,context:i?z.dd.BROWSER_TAB:z.dd.SIDEBAR,str_value:"voice_in_out:close"},R),G()},icon:Ot,iconSize:32})}),(0,C.jsx)("div",{className:"flex w-full items-center justify-center",children:(0,C.jsx)("p",{className:"text-header-m min-h-5 animate-wavyBlinking text-color-text-01",children:l(q)})})]}),(0,C.jsxs)("div",{className:"relative flex w-full flex-col items-center",children:[(0,C.jsx)("div",{className:(0,p.xW)("relative max-h-[500px] items-center transition-transform duration-500 ease-in-out",Q&&"-translate-y-[100px] items-end"),children:(0,C.jsx)(Qs,{isSpeaking:F,scale:W})}),Q&&(0,C.jsx)("div",{className:"relative mb-24 translate-y-0 animate-appear-slowly transition-all duration-500 ease-in-out",children:(0,C.jsx)(ra,{text:U})})]}),(0,C.jsx)(Xs,{transcribedMessage:k,handleMicrophoneButton:Y,isUserSpeaking:_,partialTranscribedMessage:O})]})}),document.body)};var ei=function(e){var t=e.url,r=e.onClick;return(0,C.jsx)("div",{className:"group relative inline-block",children:(0,C.jsxs)("a",{href:t,onClick:function(e){e.preventDefault(),e.stopPropagation(),r(t)},className:"text-body-s flex cursor-pointer items-center gap-1 rounded-md bg-color-level-2 px-1.5 py-1 text-color-text-02 transition-colors hover:bg-color-level-3 hover:text-color-text-01",rel:"noopener noreferrer",children:[(0,C.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"flex-shrink-0",children:(0,C.jsx)("path",{d:"M10.5 10.5H1.5V1.5H6V0.75H1.5C1.0875 0.75 0.75 1.0875 0.75 1.5V10.5C0.75 10.9125 1.0875 11.25 1.5 11.25H10.5C10.9125 11.25 11.25 10.9125 11.25 10.5V6H10.5V10.5ZM6.75 0.75V1.5H9.4425L3.5175 7.425L4.0575 7.965L9.9825 2.04V4.7325H10.7325V0.75H6.75Z",fill:"currentColor"})}),(0,C.jsx)("span",{className:"font-medium",children:function(e){try{return new URL(e).hostname.replace("www.","")}catch(t){return e}}(t)})]})})};const ti=function(e){var t=e.urls,r=e.onClick;return t&&0!==t.length?(0,C.jsx)("div",{className:"flex flex-wrap gap-0.5 pl-[14px]",children:t.map(function(e,t){return(0,C.jsx)(ei,{url:e,onClick:r},t)})}):null};const ri=function(e){var t=e.overlay,r=(0,o.useState)(!1),n=(0,Ce.A)(r,2),a=n[0],s=n[1],i=(0,o.useState)(!1),c=(0,Ce.A)(i,2),l=c[0],u=c[1],d=function(){s(!a),u(!0)};return(0,o.useEffect)(function(){t.actions.length>0&&!l&&s(!0)},[t.actions,l]),(0,C.jsxs)("div",{className:"mt-4 rounded-lg p-1","data-testId":ft.Y.OVERLAY_CONTAINER,style:{background:"linear-gradient(90deg, rgba(24, 119, 215, 0.20) 0%, rgba(206, 123, 247, 0.20) 58.04%, rgba(146, 172, 232, 0.20) 100%)"},children:[(0,C.jsx)("div",{className:"overflow-hidden rounded-md transition-all duration-300 ease-in-out ".concat(a?"h-[128px]":"h-0"),children:(0,C.jsx)("div",{className:"bg-color-neutral-98 p-1.5",children:(0,C.jsx)("div",{className:"chat-scroll h-[122px] overflow-y-auto pb-1.5",children:t.actions.map(function(e){return(0,C.jsxs)("div",{className:"rounded pb-1 pr-1 last:mb-0 hover:bg-color-level-2 [&:not(:first-child)]:pt-2",children:[(0,C.jsxs)("div",{className:"flex items-center gap-1 pb-1.5",children:[(0,C.jsx)(Pt.A,{Icon:e.iconUrl,spacing:!1,size:16}),(0,C.jsx)("div",{className:"text-body-m font-medium text-color-text-01",children:e.label})]}),(0,C.jsxs)("div",{className:"text-body-m text-color-text-03",children:[e.description,e.urls&&e.urls.length>0&&e.onUrlClick&&(0,C.jsx)(ti,{urls:e.urls,onClick:e.onUrlClick})]})]},e.id)})})})}),(0,C.jsx)("div",{className:F()("flex items-center justify-between pb-aria-1 pl-aria-2.5 pr-0.5 transition-all duration-300",a?"pt-aria-2.5 ease-out":"pt-0 ease-in"),children:(0,C.jsx)("div",{className:"chat-overlay text-body-l flex w-full items-center rounded-lg",onClick:d,onKeyUp:function(e){"Enter"!==e.key&&" "!==e.key||d()},role:"button",tabIndex:0,children:(0,C.jsxs)("div",{className:"flex min-h-7 w-full flex-row items-center justify-between gap-2",children:[(0,C.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,C.jsx)(Pt.A,{Icon:t.iconUrl,spacing:!1,size:16,className:"flex-grow-0"}),(0,C.jsx)("div",{className:"text-body-m cursor-pointer select-none text-color-text-01",children:t.title})]}),(0,C.jsx)("div",{className:"flex flex-row items-center gap-1.5",children:t.buttons&&t.buttons.length>0&&t.buttons.filter(Boolean).map(function(e,t){return(0,C.jsx)("div",{className:"flex h-7 w-7 items-center justify-center gap-2 rounded-aria-radius-2 bg-color-neutral-98",children:(0,C.jsx)("span",{className:"cursor-pointer",onClick:function(t){t.stopPropagation(),e.action()},onKeyDown:(0,Y.lO)(e.action),tabIndex:0,role:"button",children:(0,C.jsx)(Pt.A,{Icon:e.iconUrl,spacing:!1,size:16},t)},t)},t)})})]})})})]})};var ni=function(e){var t=e.title,r=e.message,n=e.confirmMessage,a=e.cancelMessage,o=e.onConfirm,s=e.onCancel,i=e.className,c=e.width,l=void 0===c?324:c,u=e.actionButtonVariant,d=void 0===u?lr.Ak.Primary:u;return(0,C.jsxs)("div",{style:{minWidth:l,maxWidth:"92vw"},className:F()("flex flex-col items-center justify-center gap-aria-5 break-words rounded-xl bg-color-level-5 p-aria-6",i),children:[(0,C.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,C.jsx)("div",{className:"text-subheader-m text-[14px] first-letter:capitalize",children:t}),(0,C.jsx)("div",{children:(0,C.jsx)(Rt,{icon:Ot,onClick:s,type:"tertiary",iconSize:20})})]}),(0,C.jsx)("div",{className:"flex w-full items-start text-[14px]",children:r}),(0,C.jsxs)("div",{className:"flex w-full flex-row gap-aria-3",children:[(0,C.jsx)(lr.$n,{action:s,variant:lr.Ak.Secondary,className:"button-default h-10 w-full capitalize",children:a}),(0,C.jsx)(lr.$n,{action:o,variant:d,className:"button-default h-10 w-full capitalize",children:n})]})]})},ai=function(e){return e.CLEAR_CONTEXT="CLEAR_CONTEXT",e.NEW_CHAT="NEW_CHAT",e}({}),oi=r(96763);function si(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ii(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?si(Object(r),!0).forEach(function(t){(0,b.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):si(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var ci=function(e){var t,r=e.isPageContextEnabled,n=e.includeChatSuggestions,a=void 0!==n&&n,i=e.selectedModel,l=hs().pageUrl,u=(0,w.Bd)().t,d=(0,c.D6)().isConsentNeeded,f=st(),p=f.sendSuggestionMessage,m=f.sendPrompt,v=f.setConsentMessage,h=f.refreshPageSuggestions,x=f.refreshChatSuggestions,g=(0,s.VUi)().remoteConfig,b=null!==(t=null==g?void 0:g.chat_suggestions)&&void 0!==t&&t,y=(0,ve.jl)(),j=y.shouldRefetch,k=y.isLoading,C=(0,ve.qS)(),O=C.shouldRefetch,_=C.isLoading,N=(0,ve.vy)();(0,o.useEffect)(function(){b&&(j&&!k&&h(),a&&O&&!_&&x())},[b,j,O,k,_]);var A=(0,o.useMemo)(function(){return function(e){if(e)try{return new URL(e).hostname.replace(/^www\./,"")}catch(e){return void oi.warn("Failed to extract domain from URL:",e)}}(l)},[l]),E=(0,ve.fB)(A||""),S=(0,o.useMemo)(function(){return E&&l?E.filter(function(e){return function(e,t){try{var r=new URL(e).pathname||"/";if(r.startsWith("/")||(r="/"+r),"/"===t)return"/"===r||""===r;if("/*"===t)return"/"!==r&&""!==r;"/"===r||r.endsWith("/")||(r+="/");var n=t.replace(/[.+?^${}()|[\]\\]/g,"\\$&").replace(/\*/g,".*");return new RegExp("^".concat(n,"$"),"i").test(r)}catch(e){return oi.warn("Failed to match URL pattern:",e),!1}}(l,e.path_regex)}).slice(0,4):[]},[E,l]),I=(0,o.useCallback)(function(){var e="".concat(u("summarize")," - ").concat(u("extract_the_key_points_from_this_page"));d?v(e):p(e,{isPageContextEnabled:r,selectedModel:i})},[u,d,p,r,i,v]),P=(0,o.useCallback)(function(){var e="".concat(u("what_is_happening_on_this_page_right_now"));d?v(e):p(e,{isPageContextEnabled:r,selectedModel:i})},[d,r,i,p,v,u]),M=(0,o.useCallback)(function(e,t){d?v(e):m(e,{isPageContextEnabled:r,displayText:t,selectedModel:i})},[d,r,i,m,v]),D=(0,o.useMemo)(function(){return Boolean((0,xs.Wg)(l))},[l]),T=(0,o.useMemo)(function(){return a&&b&&N&&0!==N.length?(0,de.A)(N).sort(function(){return.5-Math.random()}).slice(0,4):[]},[a,b,N]);return{baseTiles:(0,o.useMemo)(function(){var e={isDisabled:D};return function(e){if(!e)return!0;try{var t=(new URL(e).pathname||"/").replace(/\/{2,}/g,"/").trim();return"/"===t||""===t||/^\/(?:index(?:\.\w+)?)$/i.test(t)}catch(t){return oi.warn(t),"/"===e||""===e}}(l)?[ii({description:u("what_is_happening_on_this_page_right_now"),icon:ne,onClick:P},e)]:[ii({description:u("extract_the_key_points_from_this_page"),icon:ne,onClick:I},e)]},[D,l,u,P,I]),pageSuggestionTiles:(0,o.useMemo)(function(){if(!b)return[];var e={isDisabled:D};return(null==S?void 0:S.map(function(t){return ii({title:t.prompt_name,description:"",icon:ne,onClick:function(){M(t.prompt,t.prompt_name)}},e)}))||[]},[b,D,S,M]),chatSuggestionTiles:(0,o.useMemo)(function(){return T.map(function(e){return{title:e.text,description:"",icon:ne,onClick:function(){M(e.text)}}})},[T,M]),isCurrentUrlBlacklisted:D,isChatSuggestionsEnabled:b}},li=r(15840),ui=r(96763),di=function(e){var t=e.title,r=e.description,n=e.icon,a=e.onClick,o=e.isDisabled,s=void 0!==o&&o,i=e.isLoading,c=void 0!==i&&i;return(0,C.jsxs)("button",{onClick:s||c?void 0:a,className:"suggestion flex w-full flex-row items-center gap-[6px] rounded-aria-radius-3 bg-color-neutral-98 p-2 pr-3 hover:bg-color-neutral-92-60",children:[(0,C.jsx)("div",{className:"h-full",children:(0,C.jsx)(Pt.A,{Icon:n,color:F()((s||c)&&"bg-color-text-03"),className:F()("flex h-8 w-8 items-center justify-center rounded-aria-radius-3",!s&&!c&&"bg-color-neutral-92-60"),size:17,spacing:!1})}),(0,C.jsxs)("div",{className:"flex flex-col items-start justify-center gap-aria-2",children:[t&&(0,C.jsx)("p",{className:F()(s||c?"text-color-text-03":"text-color-text-02","text-left","text-body-m"),children:t}),(0,C.jsx)("p",{className:F()(s?"text-color-text-04":"text-color-text-02","text-left","text-body-m"),children:r})]}),c&&(0,C.jsx)("div",{className:"ml-auto mr-2",children:(0,C.jsx)(li.A,{sizeClass:"h-5 w-5"})})]})},fi=function(e){var t=e.isSingleTask,r=e.isPageContextEnabled,n=e.selectedModel,a=ci({includeChatSuggestions:!0,isPageContextEnabled:r,selectedModel:n}),o=a.baseTiles,s=a.chatSuggestionTiles,i=s.length>0?s.filter(function(e){return!e.isDisabled}):t?o.filter(function(e){return!e.isDisabled}):[];return i.length?(0,C.jsx)("div",{className:"mt-aria-3 flex flex-col gap-2",children:i.map(function(e,t){return(0,C.jsx)(di,{title:e.title,description:e.description,icon:e.icon,onClick:e.onClick},"".concat(e.title,"-").concat(t))})}):null},pi=function(e){var t=e.additionalClasses,r=void 0===t?"":t,n=e.isPageContextEnabled,a=e.selectedModel,s=(0,o.useState)(!0),i=(0,Ce.A)(s,2),c=i[0],l=i[1],d=ci({isPageContextEnabled:n,selectedModel:a}),p=d.baseTiles,m=d.pageSuggestionTiles,v=d.isCurrentUrlBlacklisted,h=m.length>0?m:p,x=function(e){l("loading"===e)},g=function(e,t,r){r.active&&t.status&&x(t.status)},b=function(){var e=(0,u.A)(f().mark(function e(){var t,r;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,(0,Ke.wy)();case 1:null!=(t=e.sent)&&t.status&&x(t.status),e.next=3;break;case 2:e.prev=2,r=e.catch(0),ui.error("Error getting active tab:",r);case 3:case"end":return e.stop()}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}();return(0,o.useEffect)(function(){return chrome.tabs.onUpdated.addListener(g),chrome.tabs.onActivated.addListener(b),function(){chrome.tabs.onUpdated.removeListener(g),chrome.tabs.onActivated.removeListener(b)}},[]),(0,o.useEffect)(function(){var e=function(){var e=(0,u.A)(f().mark(function e(){var t;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,(0,Ke.wy)();case 1:(t=e.sent)&&l("loading"===t.status);case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();e()},[]),(0,C.jsx)("div",{className:F()("mt-aria-5","flex flex-col gap-2",r,v||c?"cursor-not-allowed":"cursor-pointer"),children:h.filter(function(e){return!e.isDisabled}).map(function(e){return(0,C.jsx)(di,{isLoading:c,title:e.title,description:e.description,icon:e.icon,onClick:e.onClick},e.title)})})},mi=function(e){var t=e.navigateToResearch,r=e.state,n=(0,w.Bd)().t,a=(0,o.useCallback)(function(){t()},[t]),s=r===V.lj.Completed?n("research_disclaimer_completed"):n("research_disclaimer");return(0,C.jsxs)("div",{className:"flex min-h-14 w-full items-center justify-center gap-aria-4 p-aria-3 text-color-text-03",children:[(0,C.jsx)("span",{className:"text-center",children:s}),(0,C.jsx)(lr.$n,{className:"text-nowrap",variant:lr.Ak.Primary,action:a,children:n("research_disclaimer_button")})]})},vi=r(95274);function hi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function xi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hi(Object(r),!0).forEach(function(t){(0,b.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hi(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var gi=function(e){var t=e.isNewChat,r=e.isPageContextEnabled,n=e.setPageContextEnabled,a=e.isPageAccessBlocked,s=e.className,i=e.tooltipPlacement,c=void 0===i?"bottom":i,l=(0,w.Bd)().t,u=(0,o.useMemo)(function(){return l(a||t||r?a?"website_content_blocked_for_your_security":r?"chat_has_an_access_to_this_site":"webpage_and_tab_group_access_is_disabled":"chat_has_no_access_to_this_site")},[t,a,r,l]),d=function(e){n(e,!0)};return(0,C.jsxs)("div",{className:(0,p.xW)("flex w-full items-center justify-between",s),children:[(0,C.jsx)("div",{children:(0,C.jsx)("p",{className:"text-body-m text-color-text-03",children:l("allow_access_to_page_content")})}),(0,C.jsx)(er,{placement:c,title:u,className:"max-w-[98vw] overflow-hidden",children:function(e){var n=e.ref,o=e.referenceProps;return(0,C.jsx)("div",xi(xi({ref:n},o),{},{children:(0,C.jsx)(vi.l,{id:"ChatWebpageAccesToggle",disabled:!t||a,checked:r,setChecked:d})}))}})]})},bi=function(e){return e.Collapsed="collapsed",e.Pinned="pinned",e.Expanded="expanded",e}({}),yi=function(e){var t=e.menuStatus,r=e.children,n=e.setMenuStatus,a=(0,o.useCallback)(function(){var e=window.innerWidth>593;t!==bi.Collapsed&&n(e?bi.Pinned:bi.Expanded)},[t,n]);(0,o.useEffect)(function(){return a(),window.addEventListener("resize",a),function(){window.removeEventListener("resize",a)}},[a]);var s=(0,o.useRef)(null);return(0,fo.Wr)(s,function(){t===bi.Expanded&&n(bi.Collapsed)}),(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:F()({"w-[48px]":t===bi.Expanded,"w-[256px]":t===bi.Pinned,"w-[0px]":t===bi.Collapsed})}),(0,C.jsx)("div",{ref:s,className:F()("box-border text-color-text-01 flex flex-0 flex-col h-screen justify-between top-0 z-[11] select-none ease-in-out border-r w-64 min-w-64","absolute","transition-[left] ease-in","z-4 overflow-hidden border-r-color-neutral-88",t===bi.Pinned&&"left-0",t===bi.Collapsed&&"-left-[207px]",t===bi.Expanded&&"sidepanel-expanded left-0 z-[12] bg-color-neutral-100 shadow-2xl"),children:r})]})};var ji=function(e){var t,r=e.children,n=e.topic,a=e.arrow,s=void 0===a?"TOP_RIGHT":a,i=e.onDone,c=e.popupAnchorId,l=(0,o.useCallback)(function(e){e.preventDefault(),e.stopPropagation();var t=function(e,t){var r=e.getBoundingClientRect();return{frameSize:{height:Math.floor(window.innerHeight),width:Math.floor(window.innerWidth)},anchorBounds:{x:Math.floor(r.x),y:Math.floor(r.y),width:Math.floor(r.width),height:Math.floor(r.height)},anchorId:null!=t?t:opr.feedbackPopupPrivate.AnchorId.PAGE}}(e.target,c),r=t.frameSize,a=t.anchorBounds,o=t.anchorId;return opr.feedbackPopupPrivate.showPopupWithDesc({topic:n,anchorId:o,frameSize:r,anchorBounds:a,arrow:s,hideLearnMore:!0},function(){null==i||i()})},[c,n,s,i]);return null!==(t=opr)&&void 0!==t&&t.feedbackPopupPrivate?r({onClick:l}):null};const wi=ji;var ki=["message"];function Ci(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Oi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ci(Object(r),!0).forEach(function(t){(0,b.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ci(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var _i=(0,o.memo)(function(e){var t,r,n=e.conversationModel,a=e.conversationId,i=e.conversationType,c=e.isNewChat,l=e.showNewChatDialog,u=e.navigateToChatMode,d=e.setPageContextEnabled,f=(0,w.Bd)().t,m=Xe(),v=m.navigateToOperator,x=m.navigateToResearch,g=m.navigateToOneMinuteResearch,b=st(),y=b.startNewConversation,j=b.startNewOperatorConversation,k=b.cancelOperator,O=b.setChatMode,_=(0,ke.D)(),N=_.view,E=_.isNeonEdition,S=_.source,I=(0,s.hiN)().userCapabilities,P=(0,s.VUi)().remoteConfig,M=(0,o.useState)(!1),D=(0,Ce.A)(M,2),T=D[0],R=D[1],L=function(){R(function(e){return!e})},U=null!==(t=null==P?void 0:P.deep_research)&&void 0!==t&&t,B=null!==(r=null==P?void 0:P.one_minute_research)&&void 0!==r&&r,H=N===A.Ss.Sidebar,W=i===V.He.Operator,G=i===V.He.Research||i===V.He.OneMinuteResearch,K=(0,o.useMemo)(function(){return i&&V.d4[i]||ls.Fz.CHAT},[i]),$=(0,o.useMemo)(function(){return E?K:h.iq},[E,K]),q=(0,o.useMemo)(function(){return E&&H},[E,H]),Q=(0,o.useMemo)(function(){return Object.keys(opr.feedbackPopupPrivate.AnchorId).includes("AI_CHAT_SIDE_PANEL")},[]),X=(0,o.useCallback)(function(){if((0,Je.nr)({action:z._b.CLICK,element:z.Q3.CHAT,context:(0,Je.g$)(S),str_value:"Reset"},I),W){if(!c)return void l(function(){k(),j()});j()}else k(),y(),d(!0)},[S,I,W,c,j,l,k,y,d]),J=(0,o.useCallback)(function(){(0,Je.nr)({action:z._b.CLICK,element:z.Q3.CHAT,context:(0,Je.g$)(S),str_value:"Close"},I),opr.browserSplitViewPrivate.SetSidePanelVisibility(!1)},[S,I]),ee=(0,o.useCallback)(function(){W||(O(z.M5.DO),v())},[W,v,O]),te=(0,o.useCallback)(function(){G||(O(z.M5.RESEARCH),x())},[G,x,O]),re=(0,o.useCallback)(function(){i!==V.He.OneMinuteResearch&&(O(z.M5.ONE_MINUTE_RESEARCH),g())},[i,g,O]),ne=(0,o.useMemo)(function(){var e=[{label:ls.Fz.CHAT,icon:_t,action:u},{label:ls.Fz.DO,icon:Z,action:ee}];return U&&e.push({label:ls.Fz.RESEARCH,icon:Nt,action:te}),B&&e.push({label:ls.Fz.ONE_MINUTE_RESEARCH,icon:Nt,action:re}),e},[U,B,u,ee,te,re]);return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)("div",{className:F()("chat-header m-auto flex flex-col self-start",(0,Y.EU)(N)),children:(0,C.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[(0,C.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col justify-center",children:[(0,C.jsxs)("div",{className:"flex items-center",children:[(0,C.jsx)("div",Oi(Oi({title:$,className:"text-body-l mr-1 select-none overflow-hidden text-ellipsis whitespace-nowrap text-left !font-bold text-color-text-01"},q?{role:"button",tabIndex:0,onClick:L,onKeyDown:(0,Y.lO)(L)}:{}),{},{children:$})),(0,C.jsxs)("div",{className:"flex flex-row items-center justify-center",children:[q&&(0,C.jsx)($s,{type:Ks.chevron,crossAxisShift:!0,placement:"bottom-start",isOpen:T,setIsOpen:R,items:ne}),Q&&(0,C.jsx)(er,{placement:"bottom",title:f("feedback"),children:function(e){var t=e.ref,r=e.referenceProps;return(0,C.jsx)(wi,{topic:"opera-chat-ai-settings",arrow:"RIGHT_TOP",popupAnchorId:opr.feedbackPopupPrivate.AnchorId.AI_CHAT_SIDE_PANEL,children:function(e){var n=e.onClick;return(0,C.jsx)(Rt,Oi(Oi({ref:t},r),{},{icon:At,type:"tertiary",tabIndex:0,onClick:n,className:"box-content px-0.5",iconSize:17}))}})}})]})]}),!H&&(0,C.jsx)(kt,{conversationModel:n})]}),(0,C.jsxs)("div",{className:"-mr-0.5 flex flex-row items-center justify-center",children:[(0,C.jsx)(er,{placement:"bottom",title:f("new"),children:function(e){var t=e.ref,r=e.referenceProps;return(0,C.jsx)(Rt,Oi(Oi({ref:t},r),{},{testId:ft.Y.HEADER_NEW_CHAT_BUTTON,type:"tertiary",onClick:X,tabIndex:0,iconSize:17,icon:Ct,className:"box-content px-0.5"}))}}),H&&!W&&(0,C.jsx)(Us,{conversationId:a,className:"box-content px-0.5"}),(0,C.jsx)(er,{placement:"bottom",title:(0,p.Zr)(f("close")),children:function(e){var t=e.ref,r=e.referenceProps;return(0,C.jsx)(Rt,Oi(Oi({ref:t},r),{},{type:"tertiary",onClick:J,tabIndex:0,iconSize:17,icon:Ot,className:"box-content px-0.5"}))}})]})]})})})}),Ni=function(e){var t=e.isOperator,r=(0,ke.D)(),n=r.view,a=r.isSwitchToTabEnabled,o=(0,w.Bd)().t;return(0,C.jsx)("div",{className:F()("flex flex-col items-center pb-4",{"flex-grow justify-center":a}),children:!t&&n===A.Ss.Tab&&(0,C.jsx)("div",{className:"text-header-xl animate-waveWelcomeOnce select-none bg-welcome-text bg-[length:400%_200%] bg-clip-text pt-2 text-transparent",children:o("hi_there_what_can_i_help_with")})})},Ai=(0,o.memo)(function(e){var t=e.conversation,r=e.state,n=e.thinkingStatus,a=e.operatorStatus,i=e.overlay,l=(0,s.Yei)().currentModel,u=(0,s.uHm)().chatContext,d=(0,s.m9w)().consentMessage,f=(0,as.$)().availableModels,p=(0,v.Zp)(),m=(0,ke.D)(),x=m.isNeonEdition,g=m.isConsentNeeded,b=m.isSwitchToTabEnabled,y=m.view,j=st(),k=j.abortConversation,O=j.sendPrompt,_=j.sendToOperator,N=j.sendToResearch,E=j.cancelOperator,S=j.setConsentMessage,I=j.clearConsentMessage,P=j.setChatMode,M=j.setPageContextEnabled,D=(0,G.I7)().isPageContextEnabled,T=(0,c.A$)().neonMakeService,R=(0,c.lN)({currentModel:l,conversationId:t.id}),L=ys(),U=L.isSingleTask,B=L.pageTabsGroup,H=function(){var e=(0,w.Bd)().t,t=Et(),r=t.dialogProps,n=t.closeDialog,a=t.openDialog,s=(0,o.useRef)(function(){}),i=(0,o.useRef)(null),c=(0,o.useCallback)(function(e){s.current=e,i.current=ai.CLEAR_CONTEXT,a()},[a]),l=(0,o.useCallback)(function(e){s.current=e,i.current=ai.NEW_CHAT,a()},[a]),u=(0,o.useCallback)(function(){s.current(),n()},[n]),d=(0,o.useCallback)(function(){switch(i.current){case ai.CLEAR_CONTEXT:return{title:e("operator_clear_change_mode_title"),message:e("operator_clear_change_mode_subtitle"),confirmMessage:e("operator_clear_change_mode_title"),cancelMessage:e("go_back")};case ai.NEW_CHAT:return{title:e("operator_clear_context_title"),message:e("operator_clear_context_subtitle"),confirmMessage:e("operator_clear_context_button"),cancelMessage:e("go_back")};default:return{title:"",message:"",confirmMessage:"",cancelMessage:""}}},[e]);return{dialogProps:r,showClearContextDialog:c,showNewChatDialog:l,closeDialog:n,handleConfirm:u,getDialogConfig:d}}(),W=H.dialogProps,K=H.showClearContextDialog,$=H.showNewChatDialog,q=H.closeDialog,Q=H.handleConfirm,X=H.getDialogConfig,Z=Xe(),J=Z.navigateToChat,ee=Z.navigateToResearch,te=Z.navigateToOneMinuteResearch,re=function(e){var t=e.conversation,r=(0,o.useState)(-1),n=(0,Ce.A)(r,2),a=n[0],s=n[1],i=(0,o.useState)(),c=(0,Ce.A)(i,2),l=c[0],u=c[1],d=(0,o.useMemo)(function(){return t.groups.flatMap(function(e){return e.messages}).filter(function(e){return e.sender===z.U1.user}).map(function(e){var t=e.content;return{id:e.id,message:t}}).reverse()},[t.groups.length,t.id]),f=(0,o.useCallback)(function(e){var t=a;"ArrowUp"===e&&(t=Math.min(d.length-1,t+1)),"ArrowDown"===e&&(t=Math.max(-1,t-1)),s(t)},[d,a]);(0,o.useEffect)(function(){u(d[a])},[d,a]);var p=(0,o.useCallback)(function(){s(-1)},[]);return{userQueriesHistory:d,userQueryHistoryIndex:a,setUserQueryHistoryIndex:s,selectQueryFromHistory:f,resetHistoryIndex:p,activeHistoryMessage:l}}({conversation:t}),ne=re.userQueryHistoryIndex,ae=re.selectQueryFromHistory,se=re.activeHistoryMessage,ie=re.resetHistoryIndex,ce=re.setUserQueryHistoryIndex,le=function(e){var t=e.conversationId,r=(0,c.D6)().isNeonEdition,n=(0,o.useState)(bi.Collapsed),a=(0,Ce.A)(n,2),s=a[0],i=a[1],l=(0,o.useCallback)(function(){var e=r?h.YC:h.HU,t=window.innerWidth>e;i(t?bi.Pinned:bi.Collapsed)},[r]);(0,o.useEffect)(function(){i(bi.Collapsed)},[t]),(0,o.useEffect)(function(){return l(),window.addEventListener("resize",l),function(){window.removeEventListener("resize",l)}},[l]);var u=(0,o.useCallback)(function(){var e=r?h.YC:h.HU,t=window.innerWidth>e,n=s===bi.Pinned||s===bi.Expanded;i(!n&&t?bi.Pinned:n||t?bi.Collapsed:bi.Expanded)},[r,s]);return{menuStatus:s,toggleMenu:u}}({conversationId:t.id}),ue=le.menuStatus,de=le.toggleMenu;!function(e){var t=e.conversation,r=(0,c.D6)(),n=r.isNeonEdition,a=r.product;(0,o.useEffect)(function(){var e=t.label,r=n?a:h.iq;document.title="".concat(r).concat(e?" - ".concat(e):"")},[t.label,n,a])}({conversation:t});var fe=(0,o.useState)(!1),pe=(0,Ce.A)(fe,2),me=pe[0],ve=pe[1],he=(0,o.useState)(function(){return t.modelSelection?t.modelSelection:(null==f?void 0:f.length)>0?f[0].id:void 0}),xe=(0,Ce.A)(he,2),ge=xe[0],be=xe[1],ye=t.type===V.He.Operator,je=t.type===V.He.OneMinuteResearch,we=t.type===V.He.Research||je,Oe=t.id===h.BR&&!d,_e=function(e){var t=e.conversationType,r=e.isNewConversation,n=e.conversationPageContextEnabled,a=(0,G.q$)().handleConversationPageAccessUpdated,s=(0,G.I7)().isEnabledChangedByUser,i=hs().pageUrl,l=(0,c.D6)().view,u=ys().pageTabsGroup,d=(0,o.useState)(t===V.He.Chat&&Boolean(l===A.Ss.Sidebar||l===A.Ss.Tab&&u.length)),f=(0,Ce.A)(d,2),p=f[0],m=f[1],v=(0,o.useMemo)(function(){if(l===A.Ss.Sidebar){var e=u.length&&u.filter(function(e){return(0,xs.Wg)(e.url)}).length===u.length;return Boolean(u.length>1?e:i&&(0,xs.Wg)(i))}var t=u.filter(function(e){return"current_page"!==e.placement}),r=t.length&&t.filter(function(e){return(0,xs.Wg)(e.url)}).length===t.length;return Boolean(!t.length||r)},[u,i,l]);return(0,o.useEffect)(function(){m(t===V.He.Chat&&Boolean(l===A.Ss.Sidebar||l===A.Ss.Tab&&u.length))},[t,u.length,l]),(0,o.useEffect)(function(){r||t!==V.He.Chat||"boolean"!=typeof n||v||a({isEnabled:n}),t===V.He.Chat&&v&&void 0===n&&a({isEnabled:!1})},[n,t,a,r,v,i]),(0,o.useEffect)(function(){r&&!s&&a({isEnabled:t!==V.He.Chat||Boolean(p&&!v)})},[r,i,!s]),(0,o.useEffect)(function(){v&&a({isEnabled:!1}),v||!r||s||a({isEnabled:p})},[a,p,s,r,v]),{isChatWebpageAccessorAvailable:p,isPageAccessBlocked:v,setChatWebpageAccessorAvailable:m}}({conversationType:t.type,isNewConversation:Oe,conversationPageContextEnabled:t.isPageContextEnabled}),Ne=_e.isChatWebpageAccessorAvailable,Ae=_e.isPageAccessBlocked,Ee=_e.setChatWebpageAccessorAvailable,Se=(0,o.useCallback)(function(e){var r=e.message,n=e.files,a=e.skills,o=e.localChatMode,s=e.selectedModel;if(g&&r)S(r,{files:n,skills:a,localChatMode:o,selectedModel:s});else if(o===z.M5.MAKE)T.transformAppToMake({text:r,files:n,navigate:p,isTabView:y===A.Ss.Tab,conversationGroups:t.groups});else if(o===z.M5.DO)_({text:r,files:n,skills:a,isFromChat:!0});else if(o===z.M5.RESEARCH||o===z.M5.ONE_MINUTE_RESEARCH){var i=t.id&&t.id!==h.BR?t.id:void 0;N({query:r,conversationId:t.type===V.He.Research||t.type===V.He.OneMinuteResearch?i:void 0,isFromChat:t.type===V.He.Chat&&!!i,files:n,skills:a,researchDepth:t.type===V.He.OneMinuteResearch||o===z.M5.ONE_MINUTE_RESEARCH?z.Fw.MINUTE:void 0})}else O(r,{files:n,skills:a,isPageContextEnabled:D,selectedModel:s});ce(-1)},[t,g,ce,S,T,p,y,_,N,O,D]),Ie=(0,o.useRef)(null);(0,o.useEffect)(function(){if(!g&&d&&Ie.current!==d){var e=d.message,t=(0,dt.A)(d,ki);Ie.current=d,e&&O(e,Oi({isPageContextEnabled:D},t)),I()}!g&&d||(Ie.current=null)},[O,d,g,D,I]),(0,o.useEffect)(function(){var e;t.modelSelection||Oe?be(t.modelSelection||(null===(e=f[0])||void 0===e?void 0:e.id)):(null==f?void 0:f.length)>0&&be(f[0].id)},[t.id,null==f?void 0:f.length]);var Pe=(0,o.useMemo)(function(){return t.groups.reduce(function(e,t){return e+t.messages.length},0)},[t.groups]),Me=(0,o.useMemo)(function(){var e;return null===(e=t.groups.at(-1))||void 0===e?void 0:e.messages.at(-1)},[t.groups]),De=0===Pe&&!ye&&!we&&D,Te=we&&Pe>0,Re=!(Te||y===A.Ss.Tab&&ye),Le=(0,o.useMemo)(function(){return y===A.Ss.Tab&&De&&D},[De,y,D]),Ue="Aria"===l,Be=(0,o.useCallback)(function(){return ve(!0)},[]),Fe=(0,o.useCallback)(function(){return ve(!1)},[]),He=(0,o.useCallback)(function(){ye&&a&&a===oe.T.IN_PROGRESS?K(function(){P(z.M5.CHAT),E(),J()}):(P(z.M5.CHAT),J())},[E,ye,J,a,P,K]);!function(e){var t=e.navigateToChatMode,r=e.imageHandlers,n=e.conversationType,a=(0,s.dWt)().newConversationRequest,i=(0,s.q1m)().chatMode,l=(0,s.zKC)().files,u=(0,c.D6)().isConsentNeeded,d=st(),f=d.sendPrompt,p=d.sendToOperator,m=d.sendToResearch,v=d.deleteFilesFromStartPage,h=d.cleanConversation,x=d.sendAiPrompt,g=d.setConsentMessage;(0,o.useEffect)(function(){var e,o,s,c,d,b,y,j,w=r.files,k=r.isProcessingFiles,C=(null==l?void 0:l.length)&&!w.length;if("selected-content-prompt"===(null==a?void 0:a.message.source))if(i===z.M5.CHAT){var O;if(u)return void g("".concat(null==a?void 0:a.message.placeholder),{files:w});x(null==a||null===(O=a.message)||void 0===O?void 0:O.promptId,a.message.placeholder),h()}else t();else if(null!=a&&a.message&&"neon-start-page"===a.message.source&&!C&&!k){var _=a.message,N=_.skills,A=_.agents;if(w.length){if(h(),u)return void g("".concat(null==a?void 0:a.message),{files:w,skills:N});switch(n){case V.He.Operator:p({text:null!==(e=null===(o=a.message)||void 0===o?void 0:o.text)&&void 0!==e?e:"",files:w,skills:N,agents:A,isFromChat:!1,isNewConversation:!0});break;case V.He.Research:m({query:null!==(s=null===(c=a.message)||void 0===c?void 0:c.text)&&void 0!==s?s:"",files:w,skills:N,isFromChat:!1});break;case V.He.OneMinuteResearch:m({query:null!==(d=null===(b=a.message)||void 0===b?void 0:b.text)&&void 0!==d?d:"",files:w,skills:N,isFromChat:!1,researchDepth:z.Fw.MINUTE});break;default:f(null!==(y=null===(j=a.message)||void 0===j?void 0:j.text)&&void 0!==y?y:"",{files:w,skills:N})}v(),r.reset()}else if(!w.length){var E,S;h(),f(null!==(E=null===(S=a.message)||void 0===S?void 0:S.text)&&void 0!==E?E:"",{skills:N})}}},[a,r.isProcessingFiles,i])}({navigateToChatMode:He,imageHandlers:R,conversationType:t.type});var ze=t.type===V.He.Research||t.type===V.He.OneMinuteResearch?r===V.lj.Ongoing:u.working,We=(0,o.useCallback)(function(){k(t.id,(0,Y.sy)(t.type))},[k,t.id,t.type]);return(0,C.jsxs)("div",{className:"flex h-full w-full justify-center",children:[(0,C.jsxs)("div",{className:F()("relative flex h-full w-full flex-col items-center",(!x||!b||t.id!==h.BR)&&"grow",b&&"z-1 m-auto px-3"),children:[(0,C.jsxs)("div",{className:F()("flex w-full flex-col",y!==A.Ss.Tab&&"border-b border-b-color-neutral-92 py-3"),children:[y!==A.Ss.Tab&&(0,C.jsx)(_i,{navigateToChatMode:He,showNewChatDialog:$,conversationModel:t.model,conversationId:t.id,menuStatus:ue,toggleMenu:de,conversationType:t.type,isNewChat:Oe,setPageContextEnabled:M}),y===A.Ss.Sidebar&&Ne&&(0,C.jsx)("div",{className:F()("m-auto flex",(0,Y.EU)(y)),children:(0,C.jsx)(gi,{setPageContextEnabled:M,isPageContextEnabled:D,isNewChat:Oe,isPageAccessBlocked:Ae})})]}),(0,C.jsx)(Mo,{}),!Oe&&(0,C.jsx)("div",{className:"flex h-full w-full flex-col overflow-hidden",children:(0,C.jsx)(So,{activeHistoryMessageId:null==se?void 0:se.id,conversation:t,state:r,thinkingStatus:n||null,selectedModel:ge})}),(0,C.jsxs)("div",{className:F()("scrollbar-gutter-input-adjustment m-auto flex flex-col justify-center",(0,Y.EU)(y),Oe?"h-full overflow-hidden":"flex-shrink-0"),children:[De&&y===A.Ss.Sidebar&&(0,C.jsx)(pi,{isPageContextEnabled:D,selectedModel:ge}),Oe&&(0,C.jsx)(Ni,{isOperator:ye}),i&&!Oe&&(0,C.jsx)(ri,{overlay:i}),Te&&(0,C.jsx)(mi,{navigateToResearch:je?te:ee,state:r}),!Re&&!Te&&(0,C.jsx)("div",{className:"mt-aria-7"}),Re&&(0,C.jsx)(Ts,{state:r,onQueryInput:ie,onQuerySelect:ae,isPageAccessBlocked:Ae,onSend:Se,sendToOperator:_,sendToResearch:N,onAbort:We,isNewConversation:Oe,isDisclaimerShown:!Oe&&Ue||y===A.Ss.Sidebar,defaultValue:null==se?void 0:se.message,disabled:!1,showVoiceOverlay:Be,userQueryHistoryIndex:ne,selectedModel:ge,onModelChange:be,conversationDataSize:Pe,conversationId:t.id,conversationModel:t.model,conversationType:t.type,isStreaming:ze,setChatWebpageAccessorAvailable:Ee}),me&&(0,C.jsx)(Js,{onClose:Fe,conversationId:t.id,lastMessage:Me}),Le&&(0,C.jsx)(fi,{isPageContextEnabled:D,isSingleTask:!U&&Boolean(B.length),selectedModel:ge}),Oe&&y!==A.Ss.Sidebar&&(0,C.jsx)("div",{className:"absolute bottom-[32px] left-[50%] translate-x-[-50%] p-aria-4",children:(0,C.jsx)("div",{className:"\n      transition-opacity duration-300\n      ".concat(Ne?"opacity-100":"pointer-events-none opacity-0","\n    "),children:(0,C.jsx)(gi,{setPageContextEnabled:M,isPageContextEnabled:D,isNewChat:!0,isPageAccessBlocked:Ae,className:"gap-aria-4",tooltipPlacement:"top"})})})]})]}),(0,o.createElement)(St,Oi(Oi({},W),{},{key:"confirmation-dialog"}),(0,C.jsx)(ni,{message:X().message,confirmMessage:X().confirmMessage,cancelMessage:X().cancelMessage,onCancel:q,onConfirm:Q,actionButtonVariant:lr.Ak.Delete,title:X().title}))]})});const Ei=Ai;var Si=function(e){var t,r,n,a,o=e.chatMode,i=(t=(0,s.idg)(),r=t.activeConversationData,n=t.thinkingStatus,{conversation:a=Q(r),state:(0,W.d4)((0,G.XK)(a.id)),thinkingStatus:n,operatorStatus:null,overlay:null}),l=function(){var e=(0,w.Bd)().t,t=(0,c.D6)().product,r=st(),n=me(),a=n.activeConversation,o=n.executedSteps,s=n.operation,i=n.operatorStatus,l=Q(a,V.He.Operator),u={title:e(s,{productName:t}),actions:ie(o),buttons:ce(s,r),iconUrl:le(s)};return{conversation:l,state:V.lj.Completed,thinkingStatus:null,operatorStatus:i,overlay:u}}(),u=ut(o),d=function(){switch(o){case z.M5.DO:return l;case z.M5.RESEARCH:case z.M5.ONE_MINUTE_RESEARCH:return u;case z.M5.CHAT:default:return i}}();return(0,C.jsx)(Ei,{conversation:d.conversation,state:d.state,thinkingStatus:d.thinkingStatus,operatorStatus:d.operatorStatus,overlay:d.overlay})};const Ii=r.p+"assets/7c80ba2197f7442550f5.png",Pi=r.p+"assets/c29b0169cebbbb89e407.png",Mi=r.p+"assets/dc4ffb19f5ba021a3e19.png",Di=r.p+"assets/bb29886cdb783f305958.png",Ti=r.p+"assets/2d5b2d2e081a2dfc57bf.png",Ri=r.p+"assets/a23af3eed8f1c3868b5c.png",Li=r.p+"assets/b1d4e4cf323ede0331d5.png",Ui=r.p+"assets/b7eca6cc610f59b52ccc.png";var Bi=["type","text"];function Fi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Hi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fi(Object(r),!0).forEach(function(t){(0,b.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fi(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var zi=function(e){var t=e.icon,r=e.actionConfig,n=e.testname,a=e.id,o=e.header,s=e.description,i=e.infoIcon,c=function(){if("toggle"===r.type)return(0,C.jsx)(vi.l,{id:a,testName:n,checked:r.checked,setChecked:r.setChecked});if("button"===r.type){r.type;var e=r.text,t=(0,dt.A)(r,Bi);return(0,C.jsx)(lr.$n,Hi(Hi({},t),{},{children:e}))}return null};return(0,C.jsxs)("div",{className:F()("flex items-center justify-between"),children:[(0,C.jsxs)("div",{className:"flex gap-aria-4",children:[t?(0,C.jsx)("div",{className:F()("box-border h-[51px] w-[51px] min-w-[51px] overflow-hidden rounded-xl border border-color-neutral-90 bg-color-level-0 pl-aria-2.5 pt-aria-2.5","[@media(max-width:320px)]:hidden"),children:(0,C.jsx)("img",{src:t,alt:"img ".concat(o),className:"w-full max-w-[45px] rounded-tl-aria-radius-2"})}):(0,C.jsx)("div",{className:"h-aria-9 w-aria-9 min-w-aria-9 rounded-xl bg-color-neutral-22"}),(0,C.jsxs)("div",{className:"flex flex-col justify-center gap-aria-2",children:[(0,C.jsx)("p",{className:"text-subheader-m text-color-text-01",children:o}),(0,C.jsxs)("div",{className:"flex flex-row items-center gap-aria-2",children:[(0,C.jsx)("div",{className:"flex-1",children:(0,C.jsx)("p",{className:"text-body-s text-color-text-02",children:s})}),i&&(0,C.jsxs)("div",{children:[" ",i]})]})]})]}),(0,C.jsx)(c,{})]})},Wi=function(){var e=(0,c.D6)().isNeonEdition,t=function(){(0,p.CZ)(e?h.CI:h.l$)};return(0,C.jsx)("div",{role:"button",onClick:t,onKeyUp:t,className:"cursor-pointer",tabIndex:-1,children:(0,C.jsx)(Pt.A,{Icon:ur,spacing:!1})})},Gi=function(){var e=(0,w.Bd)().t,t=(0,c.D6)(),r=t.productName,n=t.isDarkTheme,a=t.product,o=(0,s.Xt$)().profileMemoryEnabled,i=st().setUserSetting,l=(0,b.A)((0,b.A)((0,b.A)((0,b.A)({},A.Yt.Air,n?Pi:Ii),A.Yt.GX,n?Di:Mi),A.Yt.One,n?Ri:Ti),A.Yt.Neon,n?Ui:Li);return(0,C.jsx)(zi,{id:"MemoryToggle",description:e("enjoy_personalized_chat_experience_with_ai"),icon:l[a],infoIcon:(0,C.jsx)(Wi,{}),header:e("profile_settings_tab",{productName:r}),actionConfig:{type:"toggle",checked:o,setChecked:function(e){return i(ze.PROFILE_MEMORY,e)}}})},Vi=function(){return(0,C.jsx)("div",{className:"w-full p-aria-3",children:(0,C.jsx)(li.A,{})})};function Yi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ki(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yi(Object(r),!0).forEach(function(t){(0,b.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yi(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var $i=function(){var e=(0,w.Bd)().t,t=Et(),r=t.openDialog,n=t.dialogProps,a=t.closeDialog,s=st().clearMemory;return(0,C.jsxs)(o.Fragment,{children:[(0,C.jsx)(lr.$n,{variant:lr.Ak.Tertiary,action:r,size:"s",className:"capitalize",children:e("profile_settings_clear_memory")}),(0,C.jsx)(St,Ki(Ki({},n),{},{children:(0,C.jsx)(ni,{message:e("profile_memory_clear_alert_title"),confirmMessage:e("profile_memory_clear_alert_confirm"),cancelMessage:e("profile_memory_clear_alert_cancel"),onCancel:a,onConfirm:s,actionButtonVariant:lr.Ak.Delete,title:e("profile_settings_clear_memory")})}))]})};const qi=r.p+"assets/f559cb185249b5e50822.svg";var Qi=function(){return(0,C.jsx)(Pt.A,{Icon:qi,spacing:!1,size:17,spacing17:!0})},Xi=function(e){var t=e.itemDescription,r=e.value,n=e.onDeleteRequested;return(0,C.jsxs)("div",{className:"group flex cursor-pointer flex-row items-center",onClick:n,onKeyUp:n,tabIndex:-1,role:"button",children:[(0,C.jsx)("div",{className:"flex-1",children:(0,C.jsxs)("span",{className:"",children:[t,": ",r]})}),(0,C.jsx)("div",{className:"opacity-0 transition-opacity duration-75 ease-in group-hover:opacity-100",children:(0,C.jsx)(Qi,{})})]})};function Zi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ji(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zi(Object(r),!0).forEach(function(t){(0,b.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zi(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var ec=function(e){var t=e.itemRemoveRequest,r=e.setItemRemoveRequest,n=(0,w.Bd)().t,a=Et(),s=a.openDialog,i=a.closeDialog,c=a.dialogProps,l=st().removeMemoryItem;(0,o.useEffect)(function(){t?s():i()},[i,t,s]);var u=function(){r(void 0)};return(0,C.jsx)(St,Ji(Ji({},c),{},{children:(0,C.jsx)(ni,{actionButtonVariant:lr.Ak.Delete,message:n("profile_memory_remove_item_alert_title"),confirmMessage:n("profile_memory_remove_item_alert_confirm"),cancelMessage:n("profile_memory_remove_item_alert_cancel"),onConfirm:function(){t&&(u(),l(t))},onCancel:u,title:n("profile_memory_remove_item_alert_confirm")})}))};function tc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function rc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tc(Object(r),!0).forEach(function(t){(0,b.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tc(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var nc=(0,C.jsx)("div",{className:"my-aria-5 h-px bg-color-neutral-90"}),ac=function(e){var t,r,n=e.memory,a=(0,o.useState)(void 0),i=(0,Ce.A)(a,2),l=i[0],u=i[1],d=(0,s.Q6S)().profileClearMomoryError;return t=d,r=(0,w.Bd)().t,(0,c.RK)({trigger:t,errorMessage:r("profile_memory_failed_cleaning")}),(0,C.jsxs)("div",{className:"flex flex-col ",children:[(0,C.jsx)("div",{className:"py-aria-5",children:(0,C.jsx)("div",{className:"overflow-hidden",children:(0,C.jsx)("div",{className:"py-aria-2",children:n.map(function(e,t){var r=t===n.length-1;return(0,C.jsxs)("div",{children:[(0,C.jsx)(Xi,rc(rc({},e),{},{onDeleteRequested:function(){u(e.id)}})),!r&&nc]},e.id)})})})}),(0,C.jsx)("div",{className:"mt-aria-2",children:(0,C.jsx)($i,{})}),(0,C.jsx)(ec,{itemRemoveRequest:l,setItemRemoveRequest:u})]})},oc=function(){var e,t=(0,s.Q6S)(),r=t.profileLoading,n=t.profileViewModel,a=function(e){var t=e.profileViewModel;return{shouldRenderLoader:e.profileLoading&&!t}}({profileViewModel:n,profileLoading:r});return a.shouldRenderLoader?(0,C.jsx)(Vi,{}):n&&null!==(e=n.memory)&&void 0!==e&&e.length?(0,C.jsx)(ac,{memory:n.memory}):void 0},sc=function(){var e=st().loadProfile,t=(0,w.Bd)().t,r=(0,s.V7e)().isAccountLessUser,n=(0,c.D6)().productName,a=(0,s.Xt$)().profileMemoryEnabled;return function(e){var t=(0,w.Bd)().t;(0,c.RK)({trigger:e,errorMessage:t("profile_memory_failed_loading")})}((0,s.Q6S)().profileLoadingError),(0,o.useEffect)(function(){r||e()},[r]),(0,C.jsx)("div",{className:"w-full",children:(0,C.jsx)($t.WE.Wrapper,{children:(0,C.jsxs)($t.WE.Section,{children:[(0,C.jsx)(Gi,{}),(0,C.jsx)("div",{className:"mt-aria-5 w-full",children:(0,C.jsx)("span",{className:"text-aria-body-s text-color-text-03",children:t("memory_remember_details_create_response_easily_delete_info",{productName:n})})}),a&&(0,C.jsx)(oc,{})]})})})},ic=function(e){var t=e.title;return(0,C.jsx)("div",{id:"aria_header",className:F()("relative box-border flex h-14 min-h-14 w-full items-center justify-center p-3"),children:(0,C.jsx)("span",{className:F()("text-subheader-l !font-semibold text-color-text-01"),children:t})})},cc=function(e){var t=e.children,r=e.separator;return o.Children.toArray(t).filter(function(e){return null!==e}).map(function(e,t,n){return(0,C.jsxs)(o.Fragment,{children:[e,t<n.length-1&&r]},t)})},lc=(0,C.jsx)("div",{className:"my-aria-4 h-px bg-color-neutral-90"}),uc=function(e){var t=e.children,r=e.wrapperClassname;return(0,C.jsx)("div",{className:F()("h-full w-full rounded-aria-radius-4 border border-color-neutral-90 p-aria-3",r),children:(0,C.jsx)(cc,{separator:lc,children:t})})},dc=function(e){var t=e.children,r=e.testId;return(0,C.jsx)("div",{className:"p-aria-4","data-testid":r,children:t})},fc=r(24377),pc=function(){var e=(0,w.Bd)().t,t=(0,c.D6)(),r=t.productName,n=t.view,a=t.isNeonEdition,i=(0,o.useMemo)(function(){return a?r:h.iq},[a,r]),l=(0,s.V7e)().isAccountLessMode,u=(0,s.h_I)().appVersion,d=(0,s.BFY)().networkEnvironment,f=st().setAccountlessLoginData,m=a?h.CI:h.l$,v=(0,o.useCallback)(function(){var e="tab"===n?z.dd.BROWSER_TAB:z.dd.SIDEBAR;f({context:e,initTime:Date.now(),source:"settings"}),(0,$e.CC)((0,et.zP)(h.IQ.EMAIL,d))},[n,f,d]);return(0,C.jsxs)("div",{className:"text-body-s mt-aria-6 flex flex-col justify-around gap-2 p-aria-4 text-center text-color-text-02 opacity-80",children:[(0,C.jsx)("span",{children:l?(0,C.jsx)(w.x6,{i18nKey:e("consent_login_for_free",{productName:i}),components:{link1:(0,C.jsx)("span",{role:"button",tabIndex:-1,className:"underline",onClick:v,onKeyUp:(0,Y.lO)(v)})}}):(0,C.jsx)(w.x6,{i18nKey:e("menu_to_log_out",{productName:i}),components:{link1:(0,C.jsx)("span",{role:"button",tabIndex:-1,className:"underline",onClick:fc.Uh,onKeyUp:(0,Y.lO)(fc.Uh)})}})}),(0,C.jsx)("span",{children:(0,C.jsx)(w.x6,{i18nKey:e("privacy_policy_and_terms_of_service"),components:{link1:(0,C.jsx)(Na,{className:"cursor-pointer text-inherit underline",to:a?h.kz:h.Kq},"privacy"),link2:(0,C.jsx)(Na,{className:"cursor-pointer text-inherit underline",to:a?h.tn:h.qh},"terms")}})}),(0,C.jsx)("span",{children:(0,C.jsx)(Na,{className:"uppercase underline",to:m,children:e("faq")})}),(0,C.jsxs)("span",{"data-testid":ft.Y.EXTENSION_VERSION_SPAN,children:[(0,C.jsx)(w.x6,{i18nKey:e("aria_version",{appVersion:u,productName:i})},"trans"),!(0,p.O_)()&&(0,C.jsxs)("span",{children:["-",(0,p.t4)()]},"env"),!(0,p.O_)()&&(0,C.jsxs)("span",{children:["-",chrome.runtime.id]},"runtime"),!(0,p.O_)()&&"production"!==d&&(0,C.jsxs)("span",{children:["-",d.toUpperCase()]},"network")]})]})},mc=(0,o.memo)(pc),vc=function(){var e=(0,w.Bd)().t,t=(0,c.A$)().loggerService,r=(0,c.D6)(),n=r.productName,a=r.view,l=(0,s.gHd)(),d=l.isLocalModelsEnabled,p=l.isLocalModelsEnabledPending,m=(0,s.hiN)().userCapabilities,v=(0,s.wAg)(),h=v.setLocalModels,x=v.setLocalModelsPending,g=(0,s.slU)().setModel,b=(0,s.wAg)().setLocalModelsChangedByUser,y=(0,o.useCallback)(function(){var e=(0,u.A)(f().mark(function e(r){var n,a;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,x(!0),!r){e.next=2;break}return e.next=1,(0,i.w7)();case 1:(n=e.sent)&&h(n),e.next=4;break;case 2:return e.next=3,(0,i.C$)();case 3:e.sent&&h(!1),g("Aria");case 4:e.next=6;break;case 5:e.prev=5,a=e.catch(0),t.error("LOCAL MODELS ENABLE ERROR",a);case 6:return e.prev=6,x(!1),e.finish(6);case 7:case"end":return e.stop()}},e,null,[[0,5,6,7]])}));return function(t){return e.apply(this,arguments)}}(),[t,h,x,g]),j=(0,o.useCallback)(function(){var e=(0,u.A)(f().mark(function e(t){return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(0,Je.nr)({action:z._b.SETTINGS_CHANGED,element:z.Q3.AI_SETTING,context:a===A.Ss.Tab?z.dd.BROWSER_TAB:z.dd.SIDEBAR,model:null,str_value:"local_model:".concat(t?"enabled":"disabled")},m),b(!0),e.next=1,y(t);case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[a,y,b,m]);return(0,C.jsxs)("div",{className:"flex flex-row items-center justify-between gap-3 rounded-aria-radius-4 border border-color-neutral-36 p-aria-4",children:[(0,C.jsxs)("div",{className:"flex flex-col gap-aria-3",children:[(0,C.jsx)("p",{className:"text-header-s-bold w-full text-left text-color-text-01",children:e("enable_local_models_toggle_title")}),(0,C.jsx)("p",{className:"text-body-s text-color-text-03",children:e("local_models_legal_disclaimer",{productName:n})})]}),(0,C.jsx)(vi.l,{id:"LocalModelsToggle",checked:d,disabled:p,setChecked:j})]})},hc=r(70713);function xc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function gc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xc(Object(r),!0).forEach(function(t){(0,b.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xc(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function bc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(!+e)return"0 Bytes";var r=t<0?0:t,n=Math.floor(Math.log(e)/Math.log(1024));return"".concat(parseFloat((e/Math.pow(1024,n)).toFixed(r))," ").concat(["Bytes","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"][n])}var yc=function(e){return e.map(function(e){var t=e.name,r=e.size,n=e.name.split("/"),a=n[n.length-1];return gc(gc({},e),{},{id:t,name:a,tag:a,size:bc(r),download:{timestamp:Date.parse(e.modified_at),inProgress:null,status:null,total:null}})})},jc=function(e,t,r){return e&&t?Math.round(e/t*100):r?0:void 0},wc=function(e,t){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:new TextDecoder("utf-8")).decode(e).split("\n").filter(function(e){return e.length});return t.push.apply(t,(0,de.A)(r)),t[t.length-1]},kc=function(e,t){var r,n,a,o,s,i;if(!e.download||!t.download)return NaN;var c=!(null!==(r=e.download)&&void 0!==r&&r.timestamp)&&(null===(n=t.download)||void 0===n?void 0:n.timestamp),l=(null===(a=e.download)||void 0===a?void 0:a.timestamp)&&!(null!==(o=t.download)&&void 0!==o&&o.timestamp),u=!(null!==(s=e.download)&&void 0!==s&&s.timestamp||null!==(i=t.download)&&void 0!==i&&i.timestamp);return c?-1:l?1:u?jc(e.download.inProgress,e.download.total,e.download)-jc(t.download.inProgress,t.download.total,t.download):t.download.timestamp-e.download.timestamp},Cc=(0,jt.A)(function(e,t,r){return{items:e,handleItemToggling:t,getItemState:r}}),Oc=r(77738);const _c=function(e){var t,r,n=e.item,a=e.index,s=e.isLast,i=e.getItemState,c=e.handleItemToggling,l=(0,w.Bd)().t,u=n.title,d=n.description,f=void 0===d?"":d,p=n.icon,m=n.reference_url,v=n.onItemClick,h=n.action,x=(0,o.useCallback)(function(){null==v||v(n)},[n,v]);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{role:"button",onClick:x,onKeyDown:x,tabIndex:0,className:F()("flex p-aria-2",v&&"cursor-pointer"),children:(0,C.jsxs)("div",{className:"flex w-full items-center gap-aria-4",children:[p&&(0,C.jsx)("div",{className:"inline-flex h-12 w-12 min-w-[3rem] items-center justify-center rounded-xl bg-extra-content-bg p-1",children:p}),(0,C.jsxs)("div",{className:"flex flex-grow flex-col gap-aria-1 overflow-hidden",children:[(0,C.jsx)("p",{className:"text-header-s-bold text-color-text-01",children:u}),m&&(0,C.jsx)(Na,{className:"text-body-s text-color-text-03 underline",to:m,testName:u.toString(),children:l("terms_of_service")}),Boolean(f)&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:F()("text-ellipsis break-words text-xxs text-color-text-01",null!==(t=i(a))&&void 0!==t&&t.isShortened?"max-h-6 truncate whitespace-nowrap":""),children:(0,C.jsx)(ra,{text:f.trim()})}),f.length>80&&(0,C.jsx)("div",{role:"button",tabIndex:-1,className:"bold underline",onClick:c(a),onKeyDown:c(a),children:null!==(r=i(a))&&void 0!==r&&r.isShortened?l("show_more"):l("show_less")})]})]}),h]})}),!s&&(0,C.jsx)("div",{className:"my-aria-3 h-px w-full bg-color-neutral-36"})]})};var Nc=(0,o.memo)(function(e){var t=e.data,r=e.index,n=e.style,a=t.items,o=t.handleItemToggling,s=t.getItemState,i=a[r],c=r===a.length-1;return(0,C.jsx)("div",{style:n,children:(0,C.jsx)(_c,{index:r,item:i,handleItemToggling:o,getItemState:s,isLast:c})})},Oc.t7);Nc.displayName="ModelRowWrapper";const Ac=Nc;function Ec(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var Sc=Oc._m,Ic=function(e){var t=e.collapsible,r=void 0!==t&&t,n=e.items,a=e.title,s=void 0===a?"":a,i=e.maxHeight,l=((0,pt.Bc)().isCurrentThemeDark,(0,o.useState)([])),u=(0,Ce.A)(l,2),d=u[0],f=u[1],m=(0,o.useState)(!1),v=(0,Ce.A)(m,2),x=v[0],g=v[1],y=(0,o.useCallback)(function(e){var t;return null!==(t=d.find(function(t){return t.index===e}))&&void 0!==t?t:{index:e,isShortened:!0}},[d]),j=(0,o.useCallback)(function(e){return function(t){var r;t.stopPropagation(),f([{index:e,isShortened:!(null!==(r=y(e))&&void 0!==r&&r.isShortened)}])}},[y]),w=Cc(n,j,y),k=(0,c.sh)({modelListWrapper:{operaOne:"rounded-aria-radius-4 font-normal",operaGx:"rounded-aria-radius-2 font-bold"}},"modelListWrapper");return(0,C.jsx)("div",{className:(0,p.xW)("border border-color-neutral-36 p-aria-3",k,!x&&"flex-1"),style:{maxHeight:i},children:(0,C.jsx)("div",{className:"h-full border border-none border-color-neutral-36",children:(0,C.jsxs)("div",{className:"flex h-full flex-col",children:[!!s&&(0,C.jsxs)("div",{className:"flex h-7 items-center justify-between p-1",children:[function(e){return(0,C.jsx)("p",{className:"text-header-s-bold text-color-text-01",children:e})}(s),r&&(0,C.jsx)("button",{onClick:function(){g(function(e){return!e})},children:(0,C.jsx)("img",{className:(0,p.xW)("h-4 w-4",x?"rotate-0":"rotate-180"),src:os,alt:"Chevron bottom icon"})})]}),(0,C.jsx)("div",{className:"flex-1",children:(0,C.jsx)("div",{className:(0,p.xW)("flex h-full flex-col gap-aria-3",x&&"hidden"),children:(0,C.jsx)("div",{className:"flex-1",children:(0,C.jsx)(hc.Ay,{children:function(e){var t=e.height,r=e.width;return(0,C.jsx)(Sc,{height:t,width:r,itemCount:n.length,itemSize:function(){return h.Eh},itemData:w,children:function(e){return(0,C.jsx)(Ac,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ec(Object(r),!0).forEach(function(t){(0,b.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ec(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e))}})}})})})})]})})})},Pc=r(96763),Mc=function(){return(0,x.A)(function e(){(0,g.A)(this,e)},null,[{key:"abortModelPull",value:function(e,t){var r=this.abortControllersPool.get(e);r?r.abort(t):Pc.error("Object with key",e,"does not exists")}},{key:"abortAll",value:function(e){this.abortControllersPool.forEach(function(t){t.abort(e)}),this.abortControllersPool.clear()}},{key:"createModelPullAbort",value:function(e){var t=this,r=new AbortController,n=e;return n||(n=crypto.randomUUID()),r.signal.addEventListener("abort",function(e){var r=e.target.reason;Pc.error("ABORT REASON:",r),t.abortControllersPool.delete(n)}),this.abortControllersPool.set(n,r),{id:n,signal:r.signal}}}])}();(0,b.A)(Mc,"abortControllersPool",new Map);var Dc=r(18562),Tc=r(96763);function Rc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Lc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Rc(Object(r),!0).forEach(function(t){(0,b.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rc(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Uc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Bc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Uc(Object(r),!0).forEach(function(t){(0,b.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Uc(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}const Fc=function(){var e=(0,w.Bd)().t;return(0,C.jsx)(Jt.m,{placement:"bottom",offsetValue:20,title:e("not_recommended"),delay:h.NE,children:function(e){var t=e.ref,r=e.referenceProps;return(0,C.jsx)("span",Bc(Bc({className:"flex",ref:t},r),{},{children:(0,C.jsx)(Pt.A,{Icon:ae,size:"17px",spacing17:!0})}))}})};const Hc=function(e){var t=e.downloading,r=void 0!==t&&t,n=e.modelId,a=e.onClick;return(0,C.jsx)(lr.$n,{className:"flex !h-8 w-8 cursor-pointer flex-col items-center justify-center rounded-aria-radius-3 bg-color-neutral-22 duration-200 ease-in-out hover:bg-color-level-2",action:function(){null==a||a(n)},variant:lr.Ak.Secondary,children:(0,C.jsx)(Pt.A,{Icon:r?Ot:Lr,size:"17px",spacing17:!0})})};var zc=function(e){var t=e.localModel,r=e.setShowDeleteConfirm,n=e.setModelNameInPopup,a=e.pullModel,o=(0,w.Bd)().t,i=(0,s.slU)().removeLocalModel;if(t.download){var c=t.size,l=t.download,u=l.error,d=l.inProgress,f=l.status;return u&&"USER_ABORT"!==u?(0,C.jsx)(lr.$n,{className:"text-button-s h-aria-7 px-[5px]",variant:lr.Ak.Secondary,action:function(){return a(t.id)},children:o("retry")}):d||!c||f&&"success"!==f&&"writing manifest"!==f?(0,C.jsx)(Hc,{modelId:t.id,onClick:function(e){Mc.abortModelPull(e,"USER_ABORT"),i(e)},downloading:Boolean(f)}):(0,C.jsx)(lr.$n,{className:"h-aria-7",variant:lr.Ak.Secondary,action:function(){n(t.name),r(!0)},children:o("delete")})}return(0,C.jsx)(Hc,{modelId:t.id,onClick:a,downloading:!1})},Wc=function(e){var t,r=e.localModel,n=e.setShowDeleteConfirm,a=e.setModelNameInPopup,o=e.pullModel,s=(0,w.Bd)().t,i=null!==(t=r.download)&&void 0!==t?t:{},c=i.error,l=i.inProgress,u=void 0===l?"":l,d=i.status,f=i.total;return(0,C.jsxs)("div",{className:"flex",children:[(0,C.jsxs)("div",{className:"flex items-center justify-center",children:[(null==r?void 0:r.isNotRecommended)&&!d&&(0,C.jsx)(Fc,{}),d&&"success"!=d&&(0,C.jsxs)("div",{className:"mr-2 flex max-w-[170px] flex-col items-center justify-center gap-2 truncate whitespace-break-spaces break-words text-xxs",children:[(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("img",{className:"animate-spin",src:Gt,alt:"spinner"}),(0,C.jsx)("p",{className:F()("whitespace-nowrap  text-color-text-03"),children:s("downloading",{status:[void 0,0,100].includes(jc(u,f,r.download))?"":new Intl.NumberFormat(navigator.language,{style:"percent"}).format(jc(u,f,r.download)/100)})})]}),c&&"USER_ABORT"!==c&&(0,C.jsx)("p",{className:F()("w-full  text-other-warning"),children:c})]})]}),(0,C.jsx)(zc,{pullModel:o,localModel:r,setModelNameInPopup:a,setShowDeleteConfirm:n})]})},Gc=function(e){var t=e.downloadingHardwareAccelerationLibrary,r=e.hardwareAccelerationLibraryName,n=e.setDownloadingHardwareAccelerationLibrary,a=e.setHardwareAccelerationLibraryInstalled,s=(0,w.Bd)().t,l=(0,c.A$)().loggerService,d=(0,o.useCallback)((0,u.A)(f().mark(function e(){var t,r,o;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n(!0),l.info("Loading acceleration library"),e.next=1,(0,i.Kw)();case 1:if(t=e.sent,l.info("Hardware acceleration library download status:",t),"SUCCESS"!==t){e.next=2;break}return e.next=2,(0,i.FO)();case 2:return e.next=3,(0,i.gk)();case 3:r=e.sent,a(r),e.next=5;break;case 4:e.prev=4,o=e.catch(0),l.error("Loading acceleration library error:",o);case 5:return e.prev=5,n(!1),e.finish(5);case 6:case"end":return e.stop()}},e,null,[[0,4,5,6]])})),[]);return(0,C.jsx)("span",{className:F()("inline-block w-full text-center  font-normal normal-case text-color-text-03"),children:t?(0,C.jsxs)("span",{className:"flex w-full items-center justify-between text-xxs uppercase",children:[s("local_models_hardware_acceleration_lib_downloading",{libraryName:r}),(0,C.jsx)("img",{className:"animate-spin",src:Gt,alt:"spinner"})]}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("span",{children:s("local_models_hardware_acceleration_lib_suggestion")}),(0,C.jsx)("span",{children:" "}),(0,C.jsx)("button",{onClick:d,className:"underline",children:s("download_file_button_title")})]})})};function Vc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Yc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vc(Object(r),!0).forEach(function(t){(0,b.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vc(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Kc=function(e){var t=e.setShowDeleteConfirm,r=e.setModelNameInPopup,n=e.pullModel,a=(0,w.Bd)().t,c=(0,o.useState)([]),l=(0,Ce.A)(c,2),d=l[0],m=l[1],v=(0,o.useState)(!1),x=(0,Ce.A)(v,2),g=x[0],b=x[1],y=(0,o.useState)("NO_ACCELERATION"),j=(0,Ce.A)(y,2),k=j[0],O=j[1],_=(0,o.useState)(!1),N=(0,Ce.A)(_,2),A=N[0],E=N[1],S=(0,o.useState)(!1),I=(0,Ce.A)(S,2),P=I[0],M=I[1],D=(0,o.useState)(""),T=(0,Ce.A)(D,2),R=T[0],L=T[1],U=(0,s.Yei)(),B=U.localModels,F=U.localModelsServiceStatus,H=function(){var e=(0,s.slU)().setFetchedModels,t=(0,s.Yei)(),r=t.fetchedModels,n=t.localModels,a=(0,o.useMemo)(function(){return r.flatMap(function(e){var t=e.tags,r=e.reference_url;return t.map(function(e){return Lc(Lc({},e),{},{reference_url:r})})})},[r]),i=(0,o.useMemo)(function(){return a.filter(function(e){return!n.some(function(t){return t.name===e.detailed_name})})},[a,n]),c=(0,s.IU7)().endpointLocalModels;return(0,o.useEffect)(function(){(0,u.A)(f().mark(function t(){var r;return f().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Tc.info("Fetching local models list"),t.next=1,(0,p.FE)(c,{method:"GET"});case 1:r=t.sent,e(r);case 2:case"end":return t.stop()}},t)}))()},[]),{availableModels:i,originalAvailableModels:a}}(),z=H.availableModels,W=H.originalAvailableModels,G=(0,o.useCallback)(function(e){var t=e.target.value.trim();L(t.toLocaleLowerCase())},[]),V=(0,o.useCallback)((0,u.A)(f().mark(function e(){var t,r,n;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,(0,i.QQ)();case 1:return t=e.sent,e.next=2,(0,i.gk)();case 2:return r=e.sent,e.next=3,(0,i.W$)();case 3:n=e.sent,b(t),E(r),O(n);case 4:case"end":return e.stop()}},e)})),[]),Y=(0,o.useMemo)(function(){return z.filter(function(e){var t=e.detailed_name;if(R){var r=R.toLocaleLowerCase();return t.toLocaleLowerCase().indexOf(r)>-1}return!0}).map(function(e){var a=B.find(function(t){return t.id===e.tag})||{id:e.detailed_name,name:e.detailed_name,size:e.disk_usage,isNotRecommended:e.not_recommended,reference_url:e.reference_url};return{action:(0,C.jsx)(Wc,{localModel:a,setShowDeleteConfirm:t,setModelNameInPopup:r,pullModel:n}),title:"".concat(a.name," (").concat(a.size,")"),reference_url:a.reference_url,id:(0,Dc.A)()}})},[z,R,B]);return(0,o.useEffect)(function(){var e=B.sort(kc).map(function(e){var a,o,s=e.name,i=e.size,c=(null===(a=W.find(function(t){return t.detailed_name===(null==e?void 0:e.tag)}))||void 0===a?void 0:a.not_recommended)||!1,l=null===(o=W.find(function(t){return t.detailed_name===(null==e?void 0:e.tag)}))||void 0===o?void 0:o.reference_url;return{action:(0,C.jsx)(Wc,{localModel:Yc(Yc({},e),{},{isNotRecommended:c}),setShowDeleteConfirm:t,setModelNameInPopup:r,pullModel:n}),title:"".concat(s," (").concat(i,")"),reference_url:l}});g&&!A&&e.push({title:(0,C.jsx)(Gc,{downloadingHardwareAccelerationLibrary:P,hardwareAccelerationLibraryName:k,setDownloadingHardwareAccelerationLibrary:M,setHardwareAccelerationLibraryInstalled:E})}),m(e)},[P,A,k,g,B,W,n,r,t]),(0,o.useEffect)(function(){"UNAVAILABLE"===F&&Mc.abortAll(a("chat_error_processing_request"))},[F]),(0,o.useEffect)(function(){V()},[V]),(0,C.jsxs)("div",{className:"flex h-full flex-col gap-aria-6",children:[!!d.length&&(0,C.jsx)(Ic,{collapsible:!0,items:d,title:a("downloaded_local_models_list_title",{localModelsCount:d.length}),maxHeight:Math.min(d.length*h.Eh,4*h.Eh)+h.JQ},"downloaded-models"),(0,C.jsx)(Ic,{items:Y,onSearchBarInput:G,searchBar:!0,searchBarPlaceholder:a("search_local_model_placeholder")},"available-models")]})};function $c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function qc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$c(Object(r),!0).forEach(function(t){(0,b.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Qc=function(e){var t=e.dialogProps,r=e.title,n=e.message,a=e.confirmMessage,o=e.cancelMessage,s=e.onConfirm,i=e.onCancel,l=(0,c.sh)({buttonsRow:"gap-aria-4",operaAir:{container:"air-level-02",buttonsRow:"gap-aria-5"}},["container","buttonsRow"]);return(0,C.jsx)(St,qc(qc({},t),{},{children:(0,C.jsxs)("div",{className:(0,p.xW)("box-border flex h-auto w-93 flex-col items-center justify-center gap-4 break-words rounded-aria-radius-5 bg-color-legacy-level-5 p-aria-6",l.container),children:[(0,C.jsxs)("div",{className:"text-body-l w-full text-color-legacy-text-1",children:[!!r&&(0,C.jsx)("div",{children:r}),(0,C.jsx)("span",{children:n})]}),(0,C.jsxs)("div",{className:(0,p.xW)("flex w-full select-none flex-row",l.buttonsRow),children:[(0,C.jsx)($t.$n,{type:"secondary",className:"w-full",onClick:i,size:"m",children:o}),(0,C.jsx)($t.$n,{type:"primary",className:"w-full",onClick:s,size:"m",children:a})]})]})}))},Xc=r(7350),Zc=r.n(Xc),Jc=r(23957);function el(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?el(Object(r),!0).forEach(function(t){(0,b.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):el(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var rl=function(){var e=(0,s.gHd)(),t=e.isLocalModelsEnabled,r=e.isLocalModelsEnabledPending,n=(0,o.useState)(!1),a=(0,Ce.A)(n,2),i=a[0],l=a[1],d=(0,o.useState)(""),m=(0,Ce.A)(d,2),v=m[0],h=m[1],x=(0,s.wAg)().setSelectedLocalModel,g=(0,w.Bd)().t,b=(0,c.D6)().view,y=Et(),j=function(){var e=(0,w.Bd)().t,t=(0,c.A$)().loggerService,r=(0,c.D6)().view,n=(0,c.hN)().pushNotification,a=(0,s.Yei)(),i=a.fetchedModels,l=a.localModels,d=(0,s.hiN)().userCapabilities,m=(0,s.slU)(),v=m.addModel,h=m.updateModel,x=m.addModelList,g=m.removeLocalModel,b=(0,o.useMemo)(function(){return i.flatMap(function(e){var t=e.tags,r=e.reference_url;return t.map(function(e){return tl(tl({},e),{},{reference_url:r})})})},[i]),y=(0,o.useMemo)(function(){return b.filter(function(e){return!l.some(function(t){return t.name===e.detailed_name})})},[b,l]),j=(0,o.useCallback)(function(){var e=(0,u.A)(f().mark(function e(n,a){var o,s,i,c,l,u,m,v,g,b,y,j,w,k,C,O,_,N;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o=n.getReader(),s=new TextDecoder("utf-8"),i=[],c=Date.now(),l={inProgress:null,status:null,timestamp:c,total:null},u=Zc()(function(e){h(e)},1e3),e.prev=1;case 2:return e.next=3,o.read();case 3:if(m=e.sent,v=m.done,g=m.value,!v){e.next=5;break}return t.info("PULLING MODEL",a.id,"DONE"),null===Je.nr||void 0===Je.nr||(0,Je.nr)({action:null===z._b||void 0===z._b?void 0:z._b.MODEL_DOWNLOADED,element:null===z.Q3||void 0===z.Q3?void 0:z.Q3.AI_SETTING,context:r===A.Ss.Tab?null===z.dd||void 0===z.dd?void 0:z.dd.BROWSER_TAB:null===z.dd||void 0===z.dd?void 0:z.dd.SIDEBAR,model:null,str_value:a.id,ai_provider:null===Je.n$||void 0===Je.n$?void 0:(0,Je.n$)(null==d?void 0:d.ai_provider)}),_=x,N=yc,e.next=4,(0,p.zJ)();case 4:return _(N(e.sent)),e.abrupt("continue",8);case 5:if(!g){e.next=7;break}if(b=JSON.parse(wc(g,i,s)),y=b.status,j=b.completed,w=b.total,!(k=b.error)){e.next=6;break}throw Error(k);case 6:l=tl(tl({},l),{},{error:k,inProgress:j,status:y,timestamp:c,total:w}),u(tl(tl({},a),{},{download:l}));case 7:e.next=2;break;case 8:return e.prev=8,null===(C=(O=u).flush)||void 0===C||C.call(O),e.finish(8);case 9:case"end":return e.stop()}},e,null,[[1,,8,9]])}));return function(t,r){return e.apply(this,arguments)}}(),[x,h,t,d,r]),k=(0,o.useCallback)(function(e){var t=l.find(function(t){return t.id===e});if(t)return t;var r=y.find(function(t){return t.detailed_name===e});if(r){var n=r,a=n.detailed_name,o=n.disk_usage;return{id:e,name:a,size:o}}return{id:e,name:"",size:""}},[y,l]),C=(0,o.useCallback)(function(){var r=(0,u.A)(f().mark(function r(a){var o,s,i,c,u,d,p,m,x,g,b;return f().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return o=k(a),s=Mc.createModelPullAbort(a),(i=s.signal).addEventListener("abort",function(e){var t,r,n=e.target.reason,a=Error(n);h(tl(tl({},o),{},{download:{timestamp:null!==(t=null===(r=o.download)||void 0===r?void 0:r.timestamp)&&void 0!==t?t:Date.now(),status:null,inProgress:null,total:null,error:a.message||a.name}}))}),r.prev=1,t.info("PULLING MODEL",a,"STARTED..."),d=tl(tl({},o),{},{download:{timestamp:null!==(c=null===(u=o.download)||void 0===u?void 0:u.timestamp)&&void 0!==c?c:null,status:"progress",inProgress:null,total:null}}),l.some(function(e){return e.id===o.id})?h(d):v(d),r.next=2,Jc.A.pullModel({name:a,stream:!0},i);case 2:if(!(p=r.sent).body){r.next=3;break}return r.next=3,j(p.body,o);case 3:r.next=5;break;case 4:r.prev=4,b=r.catch(1),g=e("chat_error_processing_request"),b instanceof DOMException&&"AbortError"===b.name||(t.error("PULL MODEL",a,"ERROR",b),Mc.abortModelPull(a),n(g,"error")),h(tl(tl({},o),{},{download:{timestamp:null!==(m=null===(x=o.download)||void 0===x?void 0:x.timestamp)&&void 0!==m?m:null,total:null,inProgress:null,status:null,error:g}}));case 5:case"end":return r.stop()}},r,null,[[1,4]])}));return function(e){return r.apply(this,arguments)}}(),[v,k,t,j,e,h]),O=(0,o.useCallback)(function(){var r=(0,u.A)(f().mark(function r(a,o){var s,i,c;return f().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(s=l.find(function(e){return e.name===a}))){r.next=6;break}return i={timestamp:null,status:null,inProgress:null,total:null},h(tl(tl({},s),{},{download:i})),r.prev=1,r.next=2,Jc.A.deleteModel(s.id||a);case 2:g(a),r.next=4;break;case 3:r.prev=3,c=r.catch(1),t.error("Loading error",c),n(e("loading_wrong"),"error");case 4:return r.prev=4,o(),r.finish(4);case 5:r.next=7;break;case 6:throw new Error("Could not find the model to delete | modelName: ".concat(a,", model ").concat(s));case 7:case"end":return r.stop()}},r,null,[[1,3,4,5]])}));return function(e,t){return r.apply(this,arguments)}}(),[l,t,n,g,e,h]);return{deleteModel:O,pullModel:C}}(),k=j.deleteModel,O=j.pullModel;(0,o.useEffect)(function(){return function(){return x(null)}},[x]);var _=(0,o.useCallback)(function(){k(v,function(){h(""),y.onOpenChange(!1)}),y.onOpenChange(!1)},[y,k,v]);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:F()("flex h-full flex-col gap-aria-6 overflow-hidden",b!==A.Ss.Tab&&"px-aria-4"),children:[(0,C.jsx)("div",{children:(0,C.jsx)(vc,{})}),(0,C.jsxs)("div",{className:"flex-1",children:[!t&&r&&(0,C.jsx)("div",{className:"flex w-full flex-col items-center overflow-hidden",children:(0,C.jsx)(Pt.A,{className:"animate-spin",Icon:Gt,size:32})}),t&&(0,C.jsx)(Kc,{pullModel:O,setShowDeleteConfirm:l,setModelNameInPopup:h})]})]}),i&&""!==v&&(0,C.jsx)(Qc,{dialogProps:y.dialogProps,message:g("are_you_sure_you_want_to_delete_model",{model:(0,p.fF)(v)}),confirmMessage:g("delete"),cancelMessage:g("cancel"),onCancel:function(){y.onOpenChange(!1)},onConfirm:_})]})};const nl=r.p+"assets/f4ef12766af454961478.png",al=r.p+"assets/874e5adf2bfbba256aa1.png",ol=r.p+"assets/8757f381a27b6951608a.png",sl=r.p+"assets/1d471d83557eefcc788b.png",il=r.p+"assets/d10aa27b3da5331ce45d.png",cl=r.p+"assets/eec1407f8c5be36e8532.png",ll=r.p+"assets/7438d3f0731264539099.png",ul=r.p+"assets/f9182f3179d4f60e32db.png",dl=r.p+"assets/fa7318d9656d18c55d2a.png",fl=r.p+"assets/756bbc29440792db3115.png",pl=r.p+"assets/5127c748c47af7120780.png",ml=r.p+"assets/d0ab675cf5edf5404248.png",vl=r.p+"assets/9b43c96171c90814e9a0.png",hl=r.p+"assets/d48faf463d2f26462eb6.png",xl=r.p+"assets/5de39061027510c1d607.png",gl=r.p+"assets/33ed0b24b1eccc20a0b6.png",bl=r.p+"assets/a6ba86a7d03fc259b70c.png",yl=r.p+"assets/d44d2a69cd202abe4d2c.png",jl=r.p+"assets/6357a3e3490502dc1b56.png",wl=r.p+"assets/5de99ceb18a64dbb3bf4.png",kl=r.p+"assets/52f07776bbe0af8f49e9.png",Cl=r.p+"assets/ac5adf1015e9b8572b6f.png",Ol=r.p+"assets/b5639e870da3ab3bcf30.png",_l=r.p+"assets/f5c602e8f14174d86046.png",Nl=r.p+"assets/8eef120a97a18ea1631b.png",Al=r.p+"assets/d51d04fd8d8a57a505c8.png",El=r.p+"assets/7e3a4e5f602446deb831.svg",Sl=r.p+"assets/50213ec62631532e45e4.svg";function Il(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Pl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Il(Object(r),!0).forEach(function(t){(0,b.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Il(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Ml=function(){var e=Xe().navigateToRoot,t=(0,v.zy)().state,r=(0,w.Bd)().t,n=(0,c.D6)().view,a=st().openAriaForumPage,i=Et(),l=i.dialogProps,d=i.closeDialog,p=i.openDialog,m=(0,s.dWt)().newConversationRequest,x=(0,s.idg)().activeConversationId,g=(0,s.uHm)().chatContext,y=(0,s.H49)(),j=y.handleDeleteAll,O=y.handleAbortConversation,_=(0,s.dny)().handleDeleteAllOperatorConversations,N=(0,Es.U)().chatMode===U.M5.DO,E=function(e){var t=e.openDialog,r=st(),n=r.setUserSetting,a=r.acceptShoppingSuggestionsConsent,i=(0,w.Bd)().t,l=(0,s.V7e)(),u=l.isAccountLessMode,d=l.shoppingSuggestionsConsentAccepted,f=(0,c.D6)(),p=f.product,m=f.isDarkTheme,v=f.isNeonEdition,x=(0,o.useMemo)(function(){return v?p:h.iq},[v,p]),g=(0,s.VUi)().remoteConfig,y=(0,s.Ybv)().isSourceLinksEnabled,j=(0,s.OuW)().isSiaEnabled,k=(0,s.UmG)().setIsSiaEnabled,C=(0,o.useMemo)(function(){return(0,b.A)((0,b.A)((0,b.A)((0,b.A)({},A.Yt.Air,m?fl:dl),A.Yt.GX,m?ml:pl),A.Yt.One,m?hl:vl),A.Yt.Neon,m?gl:xl)},[m]),O=(0,o.useMemo)(function(){return(0,b.A)((0,b.A)((0,b.A)((0,b.A)({},A.Yt.Air,m?al:nl),A.Yt.GX,m?sl:ol),A.Yt.One,m?cl:il),A.Yt.Neon,m?ul:ll)},[m]),_=(0,o.useMemo)(function(){return(0,b.A)((0,b.A)((0,b.A)((0,b.A)({},A.Yt.Air,m?yl:bl),A.Yt.GX,m?wl:jl),A.Yt.One,m?Cl:kl),A.Yt.Neon,m?_l:Ol)},[m]),N=(0,o.useMemo)(function(){return(0,b.A)((0,b.A)((0,b.A)((0,b.A)({},A.Yt.Air,m?Nl:Al),A.Yt.GX,m?Nl:Al),A.Yt.One,m?Nl:Al),A.Yt.Neon,m?Nl:Al)},[m]),E=(0,o.useCallback)(function(e){k(e)},[k]);return{settingsItems:(0,o.useMemo)(function(){var e=[{description:i("include_links_to_information_sources_within_response",{productName:x}),header:i("source_links"),icon:C[p],shouldShow:!0,testname:"source_links",actionConfig:{type:"toggle",checked:y,setChecked:function(){return n(ze.SOURCE_LINKS,!y)}},testId:ft.Y.SETTINGS_SOURCE_LINKS_SECTION_CONTAINER},{description:i("sia_setting_description",{productName:x}),header:i("google_suggestions"),icon:O[p],shouldShow:!v,testname:"sia",actionConfig:{type:"toggle",checked:j,setChecked:function(e){return E(e)}},testId:ft.Y.SETTINGS_GOOGLE_SUGGESTION_SECTION_CONTAINER}];void 0!==d&&e.push({description:i("shopping_suggestions_consent_setting_description"),header:i("shopping_suggestions_consent_setting_header"),icon:N[p],shouldShow:!v,testname:"shopping_suggestions_consent_setting",actionConfig:{type:"toggle",checked:!0===d,setChecked:function(e){return a(e)}},testId:ft.Y.SETTINGS_SHOPPING_SUGGESTIONS_CONSENT_SETTING});var r=[{description:i("clear_all_chat_history_instantly"),header:i("delete_all_chats"),icon:_[p],shouldShow:!0,testname:"source_links",actionConfig:{type:"button",action:t,variant:lr.Ak.Error,text:i("delete_all"),size:"s"},testId:ft.Y.SETTINGS_DELETE_ALL_CHATS_CONTAINER}];return[].concat(e,(0,de.A)(u?[]:r))},[i,x,C,p,y,O,v,j,d,_,t,u,n,E,N,a]),sections:(0,o.useMemo)(function(){return[{icon:El,title:i("general"),testId:ft.Y.SETTINGS_SECTION_GENERAL_BUTTON,name:"GENERAL",isVisible:!0},{icon:dr,name:"LOCAL_MODELS",isVisible:!1,title:i("local_models"),testId:ft.Y.SETTINGS_SECTION_LOCAL_MODELS_BUTTON,iconWidth:21},{icon:Sl,title:i("profile_settings_tab"),name:"USER_PROFILE",testId:ft.Y.SETTINGS_SECTION_PROFILE_BUTTON,isVisible:g.longterm_memory&&!u},{icon:At,title:i("feedback"),name:"FEEDBACK",testId:ft.Y.SETTINGS_SECTION_FEEDBACK_BUTTON,isVisible:!0}]},[g.longterm_memory,i,u])}}({openDialog:p}),S=E.settingsItems,I=E.sections,P=function(){var e=(0,u.A)(f().mark(function e(){return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:g.working&&O(x),N?_():j(),d();case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),M=(0,o.useCallback)(function(){if(t){var e=t.initialSection;if(e){var r=I.find(function(t){return t.name===e});if(r)return r.name}}return"GENERAL"},[t,I]),D=(0,o.useState)(M()),T=(0,Ce.A)(D,2),R=T[0],L=T[1],B=function(e){return function(){"FEEDBACK"===e?a():L(e)}};return(0,o.useEffect)(function(){var t=!("selected-content-prompt"===(null==m?void 0:m.message.source));m&&t&&e(!0)},[m,x]),(0,C.jsxs)("div",{className:F()("relative flex h-full w-full flex-col"),children:[(0,C.jsx)(k.Eg,{}),(0,C.jsx)("div",{children:(0,C.jsx)(ic,{title:r("settings")})}),(0,C.jsx)("div",{className:"z-1 flex-1",children:(0,C.jsxs)("div",{className:F()("flex h-full flex-col px-aria-3","tab"===n&&"z-1 mx-auto max-w-tab-view"),children:[(0,C.jsx)("div",{className:"flex-0",children:(0,C.jsx)("div",{className:"pb-aria-9 pt-aria-4",children:(0,C.jsx)("div",{className:"flex flex-row items-center justify-center gap-aria-5",children:I.filter(function(e){return e.isVisible}).map(function(e){var t=R===e.name;return"FEEDBACK"===e.name?(0,C.jsx)(ji,{topic:"opera-chat-ai-settings",children:function(r){var n=r.onClick;return(0,C.jsx)(Rt,{testId:e.testId,className:F()("mx-5 !h-8 !w-8",!t&&"border-none"),icon:e.icon,type:t?"secondary":"tertiary",tabIndex:-1,iconWidth:e.iconWidth,onClick:n,caption:e.title,border:!0},e.name)}},e.name):(0,C.jsx)(Rt,{testId:e.testId,className:F()("mx-5 !h-8 !w-8",!t&&"border-none"),icon:e.icon,type:t?"secondary":"tertiary",tabIndex:-1,iconWidth:e.iconWidth,onKeyDown:B(e.name),onClick:B(e.name),caption:e.title,border:!0},e.name)})})})}),(0,C.jsxs)("div",{className:"flex-1",children:["GENERAL"===R&&(0,C.jsxs)("div",{children:[(0,C.jsx)(uc,{children:S.filter(function(e){return e.shouldShow}).map(function(e,t){return(0,C.jsx)(dc,{testId:e.testId,children:(0,C.jsx)(zi,{icon:e.icon,header:e.header,description:e.description,actionConfig:e.actionConfig,id:"settings_item_".concat(String(t))})},e.header)})}),(0,C.jsx)(mc,{})]}),"USER_PROFILE"===R&&(0,C.jsx)(sc,{}),"LOCAL_MODELS"===R&&(0,C.jsx)(rl,{})]})]})}),(0,C.jsx)(St,Pl(Pl({},l),{},{children:(0,C.jsx)(ni,{title:r("delete_all_chats"),message:r("are_you_sure_you_want_to_clear_your_entire_chat_history"),cancelMessage:r("cancel"),confirmMessage:r("delete_all"),onCancel:d,onConfirm:P,actionButtonVariant:lr.Ak.Delete})}))]})},Dl={0:"bg-color-level-0",1:"bg-color-level-1",2:"bg-color-level-2",3:"bg-color-level-3",4:"bg-color-level-4",5:"bg-color-level-5",6:"bg-color-level-6"},Tl={0:"bg-color-accent-0",10:"bg-color-accent-10",20:"bg-color-accent-20",30:"bg-color-accent-30",40:"bg-color-accent-40",45:"bg-color-accent-45",50:"bg-color-accent-50",60:"bg-color-accent-60",80:"bg-color-accent-80",95:"bg-color-accent-95",100:"bg-color-accent-100"},Rl={0:"bg-color-neutral-0",10:"bg-color-neutral-10",12:"bg-color-neutral-12",15:"bg-color-neutral-15",18:"bg-color-neutral-18",22:"bg-color-neutral-22",36:"bg-color-neutral-36",42:"bg-color-neutral-42",88:"bg-color-neutral-88",90:"bg-color-neutral-90",92:"bg-color-neutral-92",93:"bg-color-neutral-93",98:"bg-color-neutral-98",100:"bg-color-neutral-100"},Ll={0:"text-color-text-00",1:"text-color-text-01",2:"text-color-text-02",3:"text-color-text-03",4:"text-color-text-04",a:"text-color-text-a",b:"text-color-text-b",e:"text-color-text-e"},Ul=function(e){var t=e.level,r=e.size,n=e.children,a=Dl[t];return(0,C.jsx)("div",{className:"box-border ".concat(a," flex items-center justify-center border border-color-neutral-88"),style:{height:"".concat(r,"px"),width:"".concat(r,"px")},children:n})},Bl=function(e){var t=e.type,r=e.value,n="accent"===t?Tl[r]:Rl[r];return(0,C.jsx)("div",{className:"box-border ".concat(n," mb-2 border border-color-neutral-88"),style:{width:"".concat(260,"px"),height:"".concat(20,"px")}})},Fl=function(e){var t=e.children;return(0,C.jsx)("h2",{className:"text-subheader-m pb-4 font-semibold text-color-text-02",children:t})},Hl=function(e){var t=e.type,r=e.label,n=Ll[t],a="".concat(t,") ").concat(r);return(0,C.jsx)("div",{className:"".concat(n," text-body-m pb-2"),style:{fontSize:"13px"},children:a})},zl=function(){var e=(0,c.D6)().productName;return(0,o.useEffect)(function(){document.title="".concat(e," - Design System")},[e]),(0,C.jsx)("div",{className:"flex justify-center px-12 pt-8",children:(0,C.jsx)("div",{className:"max-w-none rounded-aria-radius-2 border border-color-neutral-88 bg-color-level-2 px-16 py-4",children:(0,C.jsxs)("div",{className:"grid grid-cols-2 gap-8",children:[(0,C.jsxs)("section",{className:"flex flex-col items-center",children:[(0,C.jsx)(Fl,{children:"Levels"}),(0,C.jsx)(Ul,{level:6,size:260,children:(0,C.jsx)(Ul,{level:5,size:220,children:(0,C.jsx)(Ul,{level:4,size:180,children:(0,C.jsx)(Ul,{level:3,size:140,children:(0,C.jsx)(Ul,{level:2,size:100,children:(0,C.jsx)(Ul,{level:1,size:60,children:(0,C.jsx)(Ul,{level:0,size:20})})})})})})})]}),(0,C.jsxs)("section",{className:"flex flex-col items-center",children:[(0,C.jsx)(Fl,{children:"Text Color"}),(0,C.jsxs)("div",{className:"pt-12",children:[(0,C.jsx)(Hl,{type:0,label:"Contrasting to accent"}),(0,C.jsx)(Hl,{type:1,label:"Primary"}),(0,C.jsx)(Hl,{type:2,label:"Secondary"}),(0,C.jsx)(Hl,{type:3,label:"Disabled"}),(0,C.jsx)(Hl,{type:4,label:"Other"}),(0,C.jsx)(Hl,{type:"a",label:"Accent"}),(0,C.jsx)(Hl,{type:"b",label:"White"}),(0,C.jsx)(Hl,{type:"e",label:"Error"})]})]}),(0,C.jsxs)("section",{className:"flex flex-col items-center",children:[(0,C.jsx)(Fl,{children:"Accent Color"}),(0,C.jsxs)("div",{children:[(0,C.jsx)(Bl,{type:"accent",value:100}),(0,C.jsx)(Bl,{type:"accent",value:95}),(0,C.jsx)(Bl,{type:"accent",value:80}),(0,C.jsx)(Bl,{type:"accent",value:60}),(0,C.jsx)(Bl,{type:"accent",value:50}),(0,C.jsx)(Bl,{type:"accent",value:45}),(0,C.jsx)(Bl,{type:"accent",value:40}),(0,C.jsx)(Bl,{type:"accent",value:30}),(0,C.jsx)(Bl,{type:"accent",value:20}),(0,C.jsx)(Bl,{type:"accent",value:10}),(0,C.jsx)(Bl,{type:"accent",value:0})]})]}),(0,C.jsxs)("section",{className:"flex flex-col items-center",children:[(0,C.jsx)(Fl,{children:"Neutral Color"}),(0,C.jsxs)("div",{children:[(0,C.jsx)(Bl,{type:"neutral",value:100}),(0,C.jsx)(Bl,{type:"neutral",value:98}),(0,C.jsx)(Bl,{type:"neutral",value:93}),(0,C.jsx)(Bl,{type:"neutral",value:92}),(0,C.jsx)(Bl,{type:"neutral",value:90}),(0,C.jsx)(Bl,{type:"neutral",value:88}),(0,C.jsx)(Bl,{type:"neutral",value:42}),(0,C.jsx)(Bl,{type:"neutral",value:36}),(0,C.jsx)(Bl,{type:"neutral",value:22}),(0,C.jsx)(Bl,{type:"neutral",value:18}),(0,C.jsx)(Bl,{type:"neutral",value:15}),(0,C.jsx)(Bl,{type:"neutral",value:12}),(0,C.jsx)(Bl,{type:"neutral",value:10}),(0,C.jsx)(Bl,{type:"neutral",value:0})]})]})]})})})};function Wl(){var e=ot();return(0,C.jsx)(we,{value:e,children:(0,C.jsx)(v.sv,{})})}var Gl=r(36768);const Vl=r.p+"assets/7dbb29aece31a02591f2.svg",Yl=r.p+"assets/0206aa13123daf6c4352.svg",Kl=r.p+"assets/ef33801301d25785a06b.svg",$l=r.p+"assets/9b6a46a74168c2fd7e6b.svg",ql=r.p+"assets/d8c997123e645906d03c.svg",Ql=r.p+"assets/745aeb76875985654993.svg",Xl=r.p+"assets/367eb723245679db4a93.svg",Zl=r.p+"assets/1f78e61eadaa91b15450.svg";var Jl=function(e){return e.Email="email",e.Google="google",e.Facebook="facebook",e.Apple="apple",e}({}),eu=function(e){var t=e.type,r=(0,w.Bd)().t,n=st().redirectToLogin,a=(0,c.D6)().isDarkTheme,o=(0,b.A)((0,b.A)((0,b.A)((0,b.A)({},Jl.Google,{action:function(){return n(h.IQ.GOOGLE)},logo:ql,altText:"GoogleIcon",label:"Google"}),Jl.Apple,{action:function(){return n(h.IQ.APPLE)},logo:Ql,altText:"AppleIcon",label:"Apple"}),Jl.Facebook,{action:function(){return n(h.IQ.FACEBOOK)},logo:Xl,altText:"FacebookIcon",label:"Facebook"}),Jl.Email,{action:function(){return n(h.IQ.EMAIL)},logo:Zl,altText:"",label:r("log_in_via_email")})[t],s=o.action,i=o.logo,l=o.altText,u=o.label;return t===Jl.Email?(0,C.jsx)(lr.$n,{variant:lr.Ak.Secondary,action:s,className:"mb-2 min-h-10 w-full justify-between bg-color-neutral-93 p-2 font-bold hover:bg-color-neutral-92",children:(0,C.jsxs)(C.Fragment,{children:[u," ",(0,C.jsx)(Pt.A,{Icon:i})]})}):(0,C.jsx)(lr.$n,{variant:lr.Ak.Secondary,action:s,className:"align-center mb-2 min-h-10 w-full bg-color-neutral-93 font-bold",children:(0,C.jsxs)(C.Fragment,{children:[t===Jl.Apple?(0,C.jsx)(Pt.A,{Icon:i,color:a?"bg-white":"bg-black"}):(0,C.jsx)("img",{src:i,alt:l,className:"mr-2"}),r(u)]})})};const tu=r.p+"assets/768798b99b1af2d7075c.svg";var ru=["className","type"];function nu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function au(e){var t=e.className,r=e.type,n=(0,dt.A)(e,ru);return(0,C.jsx)("input",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nu(Object(r),!0).forEach(function(t){(0,b.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nu(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({type:r,"data-slot":"input",className:F()("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input shadow-xs flex h-9 w-full min-w-0 rounded-aria-radius-3 bg-color-level-2 px-3 py-1  text-xs outline-none transition-[color,box-shadow] file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t)},n))}function ou(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function su(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ou(Object(r),!0).forEach(function(t){(0,b.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ou(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var iu=function(e){var t=e.id,r=e.mode,n=e.label,a=e.icon,s=e.setIsEditing,i=e.onDeleteRequest,l=(0,c.D6)().isSwitchToTabEnabled,u=(0,w.Bd)().t,d=(0,o.useState)(!1),f=(0,Ce.A)(d,2),p=f[0],m=f[1],v=(0,o.useCallback)(function(){s(!0)},[s]),h=(0,o.useCallback)(function(){i(t,r,n)},[t,r,n,i]);return(0,C.jsx)(er,{className:"z-[24]",placement:"bottom",title:n,children:function(e){var r=e.ref,o=e.referenceProps;return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",su(su({className:"flex flex-grow flex-row items-center truncate",ref:r},o),{},{children:(0,C.jsx)("span",{className:"text-body-m truncate",children:n})})),!!a&&(0,C.jsx)("span",{className:F()("inline-block group-hover:hidden",{hidden:p}),children:(0,C.jsx)(Pt.A,{color:"bg-color-text-03 ml-4",spacing:!1,Icon:a,size:"17px"})}),(0,C.jsxs)("div",{className:F()("ml-4 group-hover:flex",{hidden:!p}),children:[(0,C.jsx)($s,{yOffset:-8,xOffset:68,placement:"bottom-end",isOpen:p,setIsOpen:m,items:[{label:u("edit"),icon:tu,action:v},{label:u("delete"),icon:qi,action:h,className:"text-color-state-error",iconClassName:"bg-color-state-error"}]}),l&&(0,C.jsx)(Us,{className:"hover:bg-color-neutral-22",conversationId:t})]})]})}})},cu=function(e){var t=e.setIsEditing,r=e.label,n=e.id,a=e.mode,s=(0,o.useState)(r),i=(0,Ce.A)(s,2),c=i[0],l=i[1],u=st().renameConversation,d=(0,w.Bd)().t,f=function(){u(n,c.trim()||d("empty_title"),a),t(!1)};return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:"relative -left-2 -mr-3 flex flex-grow flex-row items-center truncate",children:(0,C.jsx)(au,{defaultValue:r,onChange:function(e){var t=e.target.value;l(t)},onKeyUp:function(e){"Enter"==e.key&&0==e.shiftKey&&(e.preventDefault(),f())},className:"text-body-m !h-8 !px-2"})}),(0,C.jsxs)("div",{className:"-mr-2 flex",children:[(0,C.jsx)(Rt,{tabIndex:0,type:"secondary",onClick:function(){t(!1)},className:"mx-1 ml-2",icon:Ot}),(0,C.jsx)(Rt,{tabIndex:0,type:"primary",onClick:f,icon:sn})]})]})},lu=(0,o.memo)(function(e){var t=e.id,r=e.label,n=e.mode,a=e.isActive,s=e.status,i=e.thinkingType,c=e.onDeleteRequest,l=Xe(),u=l.navigateTo,d=l.getUrl,f=(0,o.useState)(!1),p=(0,Ce.A)(f,2),m=p[0],v=p[1],h=(0,o.useCallback)(function(){u(n,t)},[u,n,t]),x=s===V.lj.Ongoing,g=void 0;n===z.M5.RESEARCH||n===z.M5.ONE_MINUTE_RESEARCH?g=x?it:n===z.M5.ONE_MINUTE_RESEARCH?go:Nt:n===z.M5.DO?g=Z:n===z.M5.MAKE?g=xo:n===z.M5.CHAT&&x&&(g=Ca(i||z.V4.GeneralThinking));var b=(0,o.useCallback)(function(e){var a="".concat(location.origin).concat(location.pathname,"#").concat(d(n,t)),o=r;e.dataTransfer&&(e.dataTransfer.setData("text/uri-list",a),e.dataTransfer.setData("text/plain",o),e.dataTransfer.setData("text/html",'<a href="'.concat(a,'">').concat(o,"</a>")))},[d,t,r,n]);return(0,C.jsx)("div",{draggable:"true",onDragStart:function(e){return b(e.nativeEvent)},role:"button",onClick:h,onKeyUp:(0,Y.lO)(h),tabIndex:0,className:F()("menu-item",m&&"editing",lr.hb[lr.Ak.Ghost],"align-center group mr-2 min-h-[36px] items-center justify-between rounded-aria-radius-3 px-[10px] py-[2px]",{"bg-color-neutral-92-60 hover:!bg-color-neutral-92-60":a},{"bg-transparent hover:bg-transparent":m}),children:m?(0,C.jsx)(cu,{id:t,mode:n,setIsEditing:v,label:r}):(0,C.jsx)(iu,{id:t,mode:n,label:r,icon:g,setIsEditing:v,onDeleteRequest:c})})});lu.displayName="MenuItem";var uu=(0,o.memo)(function(e){var t=e.items,r=(0,o.useState)(null),n=(0,Ce.A)(r,2),a=n[0],s=n[1],i=Et(),c=i.dialogProps,l=i.closeDialog,u=i.openDialog,d=st().deleteConversation,f=(0,w.Bd)().t,p=function(e,t,r){s({id:e,mode:t,label:r}),u()};return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:"flex flex-grow flex-col gap-aria-1 overflow-auto",children:t.map(function(e){return(0,C.jsx)(lu,{id:e.id,label:e.label,isActive:e.isActive,mode:e.mode,status:e.status,thinkingType:e.thinkingType,onDeleteRequest:p},"menu-item-".concat(e.id))})}),(0,C.jsx)(St,su(su({},c),{},{children:(0,C.jsx)(ni,{title:f("delete_chat"),message:f("menu_delete_message_confirm_this"),confirmMessage:f("delete"),cancelMessage:f("go_back"),onCancel:function(){s(null),l()},onConfirm:function(){a&&(d(a.id,a.mode),s(null),l())},actionButtonVariant:lr.Ak.Delete})}))]})});function du(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function fu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?du(Object(r),!0).forEach(function(t){(0,b.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):du(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}uu.displayName="MenuItems";var pu=(0,o.memo)(function(e){var t=e.items,r=e.toggleMenu,n=(0,ke.D)(),a=n.authUserDetails,i=n.authStatus,c=n.product,l=n.isNeonEdition,u=n.isSwitchToTabEnabled,d=st(),f=d.startNewConversation,m=d.openSettings,v=d.openNeonDo,x=d.openNeonMake,g=d.openNeonResearch,b=d.openNeonOneMinuteResearch,y=d.redirectToLogin,j="loggedIn"===i,k=(null==a?void 0:a.fullname)||(null==a?void 0:a.email),O=(0,w.Bd)().t,_=(0,s.VUi)().remoteConfig,N=null==_?void 0:_.deep_research,E=null==_?void 0:_.one_minute_research,S=(0,o.useRef)(null),I=(0,o.useState)(!1),P=(0,Ce.A)(I,2),M=P[0],D=P[1];(0,o.useEffect)(function(){var e=S.current;if(e){var t=function(){var t=e.scrollHeight>e.clientHeight,r=e.scrollTop<e.scrollHeight-e.clientHeight;D(t&&r)};return window.addEventListener("resize",t),e.addEventListener("scroll",t),t(),function(){window.removeEventListener("resize",t),e.removeEventListener("scroll",t)}}},[S]);var T=(0,o.useCallback)(function(){f(),window.innerWidth<h.YC&&r()},[f,r]),R=(0,o.useCallback)(function(){m()},[m]),L=(0,o.useCallback)(function(){return v()},[v]),U=(0,o.useCallback)(function(){return x()},[x]),B=(0,o.useCallback)(function(){g(),r()},[g,r]),H=(0,o.useCallback)(function(){b(),r()},[b,r]),z=(0,o.useMemo)(function(){return l?O("chat_ai"):h.iq},[l,O]),W=(0,o.useCallback)(function(){y(h.IQ.EMAIL)},[y]);return(0,C.jsxs)("div",{className:"flex h-full flex-col gap-aria-5 p-3 pl-2",children:[(0,C.jsxs)("div",{className:"mb-1 flex flex-row items-center justify-between pl-2",children:[(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("button",{type:"button",onClick:T,className:"m-0 flex p-0",children:(0,C.jsx)("span",{className:"text-header-s flex items-center",children:z})}),(0,C.jsx)("span",{className:"flex-grow"}),u&&(0,C.jsx)(Us,{className:"ml-1"})]}),(0,C.jsx)(er,{title:(0,p.Zr)(O("close")),children:function(e){var t=e.ref,n=e.referenceProps;return(0,C.jsx)(Rt,fu(fu({ref:t},n),{},{type:"tertiary",onClick:r,icon:Vl,iconSize:17,className:"h-8 w-8"}))}})]}),(0,C.jsxs)("div",{className:"flex flex-col gap-aria-6",children:[(0,C.jsxs)("div",{className:"flex flex-col gap-aria-1",children:[(0,C.jsx)(lr.$n,{variant:lr.Ak.Ghost,action:T,className:"flex h-8 w-full flex-row !justify-start gap-1 !pl-0",children:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(Pt.A,{Icon:Ct,size:"17px",spacing17:!0}),(0,C.jsx)("span",{className:"text-body-m",children:O("new_chat")})]})}),c===A.Yt.Neon&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(lr.$n,{variant:lr.Ak.Ghost,action:L,className:"flex h-8 w-full flex-row !justify-start gap-1 !pl-0",children:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(Pt.A,{Icon:Z,size:"17px",spacing17:!0}),(0,C.jsx)("span",{className:"text-body-m",children:O("do")})]})}),(0,C.jsx)(lr.$n,{variant:lr.Ak.Ghost,action:U,className:"flex h-8 w-full flex-row !justify-start gap-1 !pl-0",children:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(Pt.A,{Icon:xo,size:"17px",spacing17:!0}),(0,C.jsx)("span",{className:"text-body-m",children:O("make")})]})}),N&&(0,C.jsx)(lr.$n,{variant:lr.Ak.Ghost,action:B,className:"flex h-8 w-full flex-row !justify-start gap-1 !pl-0",children:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(Pt.A,{Icon:Nt,size:"17px",spacing17:!0}),(0,C.jsx)("span",{className:"text-body-m",children:O("research")})]})}),E&&(0,C.jsx)(lr.$n,{variant:lr.Ak.Ghost,action:H,className:"flex h-8 w-full flex-row !justify-start gap-1 !pl-0",children:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(Pt.A,{Icon:go,size:"17px",spacing17:!0}),(0,C.jsx)("span",{className:"text-body-m",children:O("minute_research")})]})})]})]}),(0,C.jsx)("div",{className:"flex flex-col gap-[2px]",children:(0,C.jsx)("p",{className:"text-body-s mx-aria-3 pb-aria-3 text-color-text-03",children:O("your_chats")})})]}),(0,C.jsx)("div",{ref:S,className:"hover-scrollbar -my-4 -mr-3 flex h-full flex-col gap-aria-6 overflow-auto",children:(0,C.jsx)("div",{className:"flex flex-col gap-[2px]",children:j?(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(uu,{items:t})}):(0,C.jsxs)("div",{className:"mt-3 rounded-aria-radius-3 border border-color-neutral-88 p-3",children:[(0,C.jsx)("div",{className:"mb-2 text-center",children:O("log_in_to_enable_chat_history")}),(0,C.jsx)(eu,{type:Jl.Email}),(0,C.jsx)("hr",{className:"my-4 border border-b-0 border-color-neutral-88"}),(0,C.jsx)(eu,{type:Jl.Google}),(0,C.jsx)(eu,{type:Jl.Apple}),(0,C.jsx)(eu,{type:Jl.Facebook})]})})}),(0,C.jsxs)("div",{className:F()("mb-2 border-t border-transparent",{"border-t-color-neutral-92":M}),children:[j?(0,C.jsx)(lr.$n,{variant:lr.Ak.Ghost,action:fc.Uh,className:"w-full !justify-start !pl-0",children:(0,C.jsxs)(C.Fragment,{children:[a&&null!=a&&a.picture?(0,C.jsx)(Dt,{Icon:null==a?void 0:a.picture,className:"rounded-aria-radius-1",size:"17px",spacing17:!0}):(0,C.jsx)(Pt.A,{Icon:j?Sl:Kl,size:"17px",spacing17:!0}),(0,C.jsx)("span",{title:k,className:"text-body-m ml-2 overflow-hidden overflow-ellipsis normal-case",children:k})]})}):(0,C.jsx)(lr.$n,{variant:lr.Ak.Ghost,action:W,className:"w-full !justify-start !pl-0",children:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(er,{className:"z-[24]",placement:"top",title:k||O("opera_account"),children:function(e){var t=e.ref,r=e.referenceProps;return(0,C.jsx)(Rt,fu(fu({ref:t},r),{},{type:"secondary",onClick:W,tabIndex:0,icon:$l,iconSize:17}))}}),(0,C.jsx)("span",{title:O("sign_in"),className:"text-body-m ml-2 overflow-hidden overflow-ellipsis normal-case",children:O("sign_in")})]})}),(0,C.jsx)(lr.$n,{variant:lr.Ak.Ghost,action:R,className:"w-full !justify-start !pl-0",children:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(Pt.A,{Icon:Yl,size:"17px",spacing17:!0}),(0,C.jsx)("span",{className:"text-body-m p-2",children:O("settings")})]})})]})]})}),mu=function(e){return e.reduce(function(e,t){return"".concat(e,"-").concat(t.id,":").concat(t.label)},"")};function vu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function hu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vu(Object(r),!0).forEach(function(t){(0,b.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vu(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function xu(){var e,t,r,n,a,i,l,u,d,f,p,m,x,g,b,y,j,k,O="user_ui_sidemenu_status",_=window.innerWidth>h.YC&&"expanded"===localStorage.getItem(O),N=(0,c.D6)(),E=N.view,S=N.source,I=st(),P=I.startNewConversation,M=I.openSettings,D=(0,s.hiN)().userCapabilities,T=(0,o.useState)(_?bi.Expanded:bi.Collapsed),R=(0,Ce.A)(T,2),L=R[0],U=R[1],B=(0,w.Bd)().t,F=(e=(0,ke.D)().isNeonEdition,t=(0,s.VUi)().remoteConfig,r=(0,s.N8m)().conversations,n=(0,Ze.b2)(),a=n.conversations,i=n.activeConversationId,l=(0,s.tIb)(),u=l.conversations,d=l.activeConversationId,f=(0,s.idg)().activeConversationId,p=(0,W.d4)(function(e){var t;return(null===(t=e.ariaChatState)||void 0===t?void 0:t.conversationStates)||{}}),m=(0,W.d4)(function(e){var t;return(null===(t=e.ariaChatMessaging)||void 0===t?void 0:t.thinkingStatuses)||{}}),x=(null==t?void 0:t.deep_research)||(null==t?void 0:t.one_minute_research),g=e&&(null==t?void 0:t.operator_menu),b=mu(r),y=mu(a),j=(0,o.useMemo)(function(){return Object.values(u)},[u]),k=mu(j),{items:(0,o.useMemo)(function(){var e=function(e){return e.reduce(function(e,t){if(t.id){var r,n=t.updatedAt||t.createdAt||0,a=Date.now()-n>6e4;e.push({id:t.id,label:t.label,mode:(0,Y.sy)(t.type),isActive:[f,i,d].includes(t.id),createdAt:t.createdAt,status:p[t.id]||V.lj.Completed,thinkingType:a?null:(null===(r=m[t.id])||void 0===r?void 0:r.type)||null})}return e},[])},t=e(r.map(function(e){return Q(e,V.He.Chat)})),n=x?e(a):[],o=g?e(j.map(function(e){return Q(e,V.He.Operator)})):[];return[].concat((0,de.A)(t),(0,de.A)(n),(0,de.A)(o)).sort(function(e,t){var r,n;return(null!==(r=t.createdAt)&&void 0!==r?r:0)-(null!==(n=e.createdAt)&&void 0!==n?n:0)})},[f,i,d,x,g,b,y,k,p,m])}),H=(0,c.D6)(),G=H.authUserDetails,K="loggedIn"===H.authStatus,$=(null==G?void 0:G.fullname)||(null==G?void 0:G.email),q=(0,o.useCallback)(function(){var e=L===bi.Pinned||L===bi.Expanded;!e&&_?U(bi.Pinned):e||_?(localStorage.setItem(O,"collapsed"),U(bi.Collapsed)):((0,Je.nr)({action:z._b.CLICK,element:z.Q3.CHAT,context:(0,Je.g$)(S),ai_provider:(0,Je.n$)(null==D?void 0:D.ai_provider),str_value:"ViewHistory"}),U(bi.Expanded),localStorage.setItem(O,"expanded"))},[S,L,_,null==D?void 0:D.ai_provider]),X=(0,o.useCallback)(function(){P()},[P]),Z=(0,o.useCallback)(function(){M()},[M]);return(0,C.jsxs)("div",{className:"flex h-full w-full",children:[F&&E===A.Ss.Tab&&(0,C.jsx)(yi,{menuStatus:L,setMenuStatus:U,children:(0,C.jsxs)(C.Fragment,{children:[L===bi.Collapsed&&(0,C.jsxs)("div",{className:"flex h-full w-full flex-col items-end justify-start gap-aria-5 pb-[28px] pr-2 pt-3",children:[(0,C.jsx)(er,{className:"z-[24]",placement:"bottom",title:B("history_and_settings"),children:function(e){var t=e.ref,r=e.referenceProps;return(0,C.jsx)(Rt,hu(hu({ref:t},r),{},{type:"tertiary",onClick:q,icon:Vl,iconSize:17,className:"mb-1"}))}}),(0,C.jsx)(er,{className:"z-[24]",placement:"bottom",title:B("new"),children:function(e){var t=e.ref,r=e.referenceProps;return(0,C.jsx)(Rt,hu(hu({ref:t},r),{},{type:"tertiary",onClick:X,tabIndex:0,icon:Ct,iconSize:17}))}}),(0,C.jsx)("div",{className:"flex-grow"}),(0,C.jsx)("div",{children:(0,C.jsx)(er,{className:"z-[24]",placement:"top",title:$||B("opera_account"),children:function(e){var t=e.ref,r=e.referenceProps;return(0,C.jsx)(Rt,hu(hu({ref:t},r),{},{type:"secondary",onClick:fc.Uh,tabIndex:0,icon:G&&null!=G&&G.picture||!K?$l:Sl,photo:G&&(null==G?void 0:G.picture),iconSize:17}))}})}),(0,C.jsx)("div",{className:"mt-[0.5px]",children:(0,C.jsx)(er,{className:"z-[24]",placement:"top",title:B("settings"),children:function(e){var t=e.ref,r=e.referenceProps;return(0,C.jsx)(Rt,hu(hu({ref:t},r),{},{type:"tertiary",onClick:Z,tabIndex:0,icon:Yl,iconSize:17}))}})})]}),L!==bi.Collapsed&&(0,C.jsx)(pu,{items:F.items,toggleMenu:q})]})}),F&&E===A.Ss.Tab&&L===bi.Collapsed&&(0,C.jsx)("div",{className:"h-full w-[48px] flex-shrink-0"}),(0,C.jsx)("div",{className:"flex h-full flex-1 justify-center overflow-auto @container",children:(0,C.jsx)(v.sv,{})})]})}var gu=function(){var e,t,r=(0,s.VUi)().remoteConfig,n=(0,c.D6)(),a=n.product,i=function(e,t){var r=(0,s.q1m)().chatMode;return e!==A.Yt.Neon||t!==A.Ss.Sidebar&&r===U.M5.DO?U.M5.CHAT:null!=r?r:(0,Es.U)().chatMode}(a,n.view);!function(){var e=(0,ke.D)(),t=e.tabId,r=e.windowId,n=Xe().navigateToOperator;(0,Gl.n)(h.uF.NEON_DO_OPEN_START_PAGE,function(e){var a=e.conversationId,o=e.tabId,s=e.windowId;o===t&&s===r&&n(a)})}(),e=(0,ke.D)().tabId,t=Xe().navigateTo,(0,Gl.n)(h.lC.NAVIGATE,function(r){var n=r.conversationId,a=r.mode;r.tabId===e&&t(a,n)});var l=null!=r?r:{},u=function(e,t,r){return e===U.M5.DO?(0,C.jsx)(o.StrictMode,{children:(0,C.jsx)(Si,{chatMode:U.M5.DO})}):e===U.M5.RESEARCH&&t?(0,C.jsx)(o.StrictMode,{children:(0,C.jsx)(Si,{chatMode:U.M5.RESEARCH})}):e===U.M5.ONE_MINUTE_RESEARCH&&r?(0,C.jsx)(o.StrictMode,{children:(0,C.jsx)(Si,{chatMode:U.M5.ONE_MINUTE_RESEARCH})}):(0,C.jsx)(o.StrictMode,{children:(0,C.jsx)(Si,{chatMode:U.M5.CHAT})})}(i,a===A.Yt.Neon&&l.deep_research,a===A.Yt.Neon&&l.one_minute_research);return(0,C.jsx)("div",{className:"h-full w-full",children:(0,C.jsx)(H,{children:(0,C.jsx)(v.BV,{children:(0,C.jsxs)(v.qh,{element:(0,C.jsx)(Wl,{}),children:[(0,C.jsxs)(v.qh,{element:(0,C.jsx)(xu,{}),children:[(0,C.jsx)(v.qh,{path:"/".concat(h.p4.SETTINGS,"/*"),Component:Ml}),(0,C.jsx)(v.qh,{path:"/*",element:u})]}),(0,C.jsx)(v.qh,{path:"/".concat(h.p4.DESIGN_SYSTEM,"/*"),Component:zl})]})})})})},bu=r(16750);function yu(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return ju(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ju(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){i=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(i)throw o}}}}function ju(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var wu,ku=function(){function e(){(0,g.A)(this,e)}return(0,x.A)(e,[{key:"buildUrl",value:function(t,r){var n=e.buildQuery(r);return n?"".concat(t).concat(t.includes("?")?"&":"?").concat(n):t}}],[{key:"buildQuery",value:function(e){for(var t=new URLSearchParams,r=0,n=Object.entries(e);r<n.length;r++){var a=(0,Ce.A)(n[r],2),o=a[0],s=a[1];if(null!=s)if(Array.isArray(s)){var i,c=yu(s);try{for(c.s();!(i=c.n()).done;){var l=i.value;null!=l&&t.append(o,String(l))}}catch(e){c.e(e)}finally{c.f()}}else t.append(o,String(s))}return t.toString()}}])}(),Cu=(null===(wu="https://replay.operaneon.op-test.net,https://replay-qa.operaneon.op-test.net,https://replay.operaneon.com")?void 0:wu.split(","))||[],Ou="application_x_env_index",_u=function(){var e=Number(localStorage.getItem(Ou))||0,t=Cu[e],r=(0,o.useState)(!1),n=(0,Ce.A)(r,2),a=n[0],s=n[1];return(0,o.useEffect)(function(){function e(e){"F4"===e.key&&s(function(e){return!e})}return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}},[]),(0,C.jsx)("div",{className:(0,p.xW)("bg-white p-2 text-black",!a&&"hidden"),children:(0,C.jsx)("select",{value:t,onChange:function(e){localStorage.setItem(Ou,Cu.indexOf(e.target.value).toString()),chrome.runtime.getBackgroundPage(function(e){e&&e.location.reload()})},className:"rounded-md border-2 border-gray-300 p-2",children:Cu.map(function(e){return(0,C.jsx)("option",{value:e,children:e},e)})})})},Nu=function(){return(0,x.A)(function e(){(0,g.A)(this,e),(0,b.A)(this,"data",null),(0,b.A)(this,"resolver",null)},[{key:"request",value:function(){var e=this;return this.data?Promise.resolve(this.data):new Promise(function(t){e.resolver=t})}},{key:"triggerMake",value:(e=(0,u.A)(f().mark(function e(t){var r,n,a,o,s,i,c,l;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=function(e){return new Promise(function(t,r){var n=new FileReader;n.onload=function(e){var r,n=null===(r=e.target)||void 0===r||null===(r=r.result)||void 0===r?void 0:r.toString().split(",")[1];t(n)},n.onerror=r,n.readAsDataURL(e)})},n=t.prompt,a=t.urls,o=new He.HH,i=[],null==a||!a.length){e.next=3;break}return e.next=1,Promise.all(a.map(function(e){return o.loadFile(e)}));case 1:return c=e.sent,e.next=2,Promise.all(c.filter(function(e){return null!=e}).map(function(){var e=(0,u.A)(f().mark(function e(t){var r,n,a;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.name,n=t.type,e.next=1,s(t);case 1:return a=e.sent,e.abrupt("return",{name:r,mime:n,binary:a});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 2:i=e.sent;case 3:l={prompt:n,files:i},this.data=l,null===(r=this.resolver)||void 0===r||r.call(this,l),this.resolver=null;case 4:case"end":return e.stop()}},e,this)})),function(t){return e.apply(this,arguments)})},{key:"clear",value:function(){this.data=null,this.resolver=null}}]);var e}(),Au=new Nu,Eu={FILES_DROPPED:"FILES_DROPPED",DRAG_INACTIVE:"DRAG_INACTIVE",DRAG_ACTIVE:"DRAG_ACTIVE"},Su=function(){var e=(0,u.A)(f().mark(function e(t){var r;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(e){return new Promise(function(t){var r=new FileReader;r.onload=function(){return t({name:e.name,type:e.type,size:e.size,content:r.result})},r.readAsDataURL(e)})},e.abrupt("return",Promise.all(t.map(r)));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),Iu={width:"100%",height:"100%",border:"none"},Pu=function(){var e=(0,o.useRef)(null),t=function(){if((0,p.Nu)()){var e=localStorage.getItem(Ou);return e?Cu[Number(e)]:Cu[0]}return"https://replay.operaneon.com"}(),r=function(e){var t=e.iframeRef,r=e.src,n=(0,c.A$)().loggerService,a=(0,m.ok)(),s=(0,Ce.A)(a,2),i=s[0],l=s[1],d=(0,o.useRef)("true"===i.get("pending")).current;return(0,o.useEffect)(function(){var e=function(){var e=(0,u.A)(f().mark(function e(a){var o,s,i,c;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.source===(null===(o=t.current)||void 0===o?void 0:o.contentWindow)){e.next=1;break}return e.abrupt("return");case 1:if("external-prompt-request"===a.data.type){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=3,Au.request();case 3:i=e.sent,null===(s=t.current)||void 0===s||null===(s=s.contentWindow)||void 0===s||s.postMessage({type:"external-prompt-response",data:i},r),e.next=5;break;case 4:e.prev=4,c=e.catch(2),n.error("externalPrompt request error: ".concat(c));case 5:case"end":return e.stop()}},e,null,[[2,4]])}));return function(t){return e.apply(this,arguments)}}();return window.addEventListener("message",e),function(){return window.removeEventListener("message",e)}},[t,n,r]),(0,o.useEffect)(function(){if("true"===i.get("pending")){var e=i.get("prompt"),t=i.get("cacheUrls");if(e){var r={prompt:e,urls:t?JSON.parse(t):void 0};Au.triggerMake(r)}l(function(e){return e.delete("pending"),e.delete("prompt"),e.delete("cacheUrls"),e})}},[i,l]),{withInitialPrompt:d}}({iframeRef:e,src:t}),n=r.withInitialPrompt;!function(e){var t=e.src,r=e.iframeRef,n=(0,c.A$)().clientService;(0,o.useEffect)(function(){var e,a=null===(e=r.current)||void 0===e?void 0:e.contentWindow;if(a){var o=function(e){a.postMessage({loginStateChange:e},t)};n.authProvider.onLoginStateChange(o);var s=function(){var e=(0,u.A)(f().mark(function e(r){var o,s,i,c,l,u,d,p;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r.source===a){e.next=1;break}return e.abrupt("return");case 1:if(o=r.data||{},s=o.type,i=o.requestId,c=o.method,l=o.args,"authProviderRequest"===s){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=3,(u=n.authProvider)[c].apply(u,(0,de.A)(l));case 3:d=e.sent,a.postMessage({type:"authProviderResponse",requestId:i,result:d},t),e.next=5;break;case 4:e.prev=4,p=e.catch(2),a.postMessage({type:"authProviderResponse",requestId:i,error:JSON.stringify(p)},t);case 5:case"end":return e.stop()}},e,null,[[2,4]])}));return function(t){return e.apply(this,arguments)}}();return window.addEventListener("message",s),function(){window.removeEventListener("message",s),n.authProvider.onLoginStateChangeUnsubscribe(o)}}},[n,t,r])}({src:t,iframeRef:e}),function(e){var t=e.src,r=e.iframeRef;(0,o.useEffect)(function(){var e,n=null===(e=r.current)||void 0===e?void 0:e.contentWindow;if(n){var a=function(){var e=(0,u.A)(f().mark(function e(r){var a,o,s,i,c;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r.source===n){e.next=1;break}return e.abrupt("return");case 1:if(a=r.data||{},o=a.type,s=a.requestId,i=a.statReport,"statsProviderRequest"===o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=3,(0,Je.nr)(i);case 3:n.postMessage({type:"statsProviderResponse",requestId:s,success:!0},t),e.next=5;break;case 4:e.prev=4,c=e.catch(2),n.postMessage({type:"statsProviderResponse",requestId:s,error:JSON.stringify(c)},t);case 5:case"end":return e.stop()}},e,null,[[2,4]])}));return function(t){return e.apply(this,arguments)}}();return window.addEventListener("message",a),function(){window.removeEventListener("message",a)}}},[t,r])}({src:t,iframeRef:e});var a=function(e){var t=e.networkEnvironment,r=e.src,n=e.withInitialPrompt,a=new ku,o=(0,v.zy)().pathname,s=(0,c.D6)().product,i="/".concat(h.p4.APPLICATION_X),l=o.startsWith(i)?o.slice(i.length).replace(/^\/+/,""):void 0,u="".concat(r).concat(l?"/".concat(l):"");return{url:(0,bu.J)(a.buildUrl(u,{env:t,appStream:"main",withInitialPrompt:n||void 0,product:s}))}}({networkEnvironment:(0,s.BFY)().networkEnvironment,src:t,withInitialPrompt:n}),i=a.url;return(0,o.useEffect)(function(){var e=document.title;return document.title=(0,ls.oT)(ls.Fe.MAKE),function(){document.title=e}},[]),function(e){var t=e.iframeRef,r=e.src,n=e.POST_MESSAGES;(0,o.useEffect)(function(){var e=function(e){var a;e.preventDefault(),null===(a=t.current)||void 0===a||null===(a=a.contentWindow)||void 0===a||a.postMessage({type:n.DRAG_ACTIVE},r)},a=function(){var e;null===(e=t.current)||void 0===e||null===(e=e.contentWindow)||void 0===e||e.postMessage({type:n.DRAG_INACTIVE},r)},o=function(){var e=(0,u.A)(f().mark(function e(a){var o,s,i,c,l;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),null===(o=t.current)||void 0===o||null===(o=o.contentWindow)||void 0===o||o.postMessage({type:n.DRAG_INACTIVE},r),0!==(c=Array.from((null===(s=a.dataTransfer)||void 0===s?void 0:s.files)||[])).length&&t.current){e.next=1;break}return e.abrupt("return");case 1:return e.next=2,Su(c);case 2:l=e.sent,null===(i=t.current.contentWindow)||void 0===i||i.postMessage({type:n.FILES_DROPPED,files:l},r);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return window.addEventListener("dragover",e),window.addEventListener("dragleave",a),window.addEventListener("drop",o),function(){window.removeEventListener("dragover",e),window.removeEventListener("dragleave",a),window.removeEventListener("drop",o)}},[n.DRAG_ACTIVE,n.DRAG_INACTIVE,n.FILES_DROPPED,t,r])}({iframeRef:e,src:t,POST_MESSAGES:Eu}),(0,C.jsx)("iframe",{title:"Neon Make",ref:e,src:i,style:Iu,allow:"clipboard-write"})},Mu=(0,o.memo)(Pu),Du=r(66166),Tu=function(){var e=(0,c.D6)(),t=e.view,r=e.isNeonEdition,n=e.product,a=e.isDarkTheme;(0,o.useEffect)(function(){r&&(0,s.CQm)(),r?document.body.classList.add("neon-edition"):document.body.classList.remove("neon-edition")},[r]);var l=(0,s.bHd)(),d=l.handleAuthFlowRequested,x=l.authStateChanged,g=(0,s.YAT)().handleAriaPinned,b=(0,s.wvn)().handleActiveConversationChanged,y=t===A.Ss.Tab;(0,c.ev)(y?"tab-view":"sidebar"),M(),(0,c.Hq)(),(0,o.useEffect)(function(){d({openAuthWhenUnauthorized:!1,forceAuthorization:!0})},[]),(0,o.useEffect)(function(){function e(){return(e=(0,u.A)(f().mark(function e(){var t;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=g,e.next=1,(0,i.e$)();case 1:t(e.sent);case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function t(e){e.source==window&&e.data&&"FROM_SELENIUM"===e.data.type&&new j({authStateChanged:x}).handle(e)}return function(){e.apply(this,arguments)}(),window.addEventListener("message",t,!1),function(){window.removeEventListener("message",t)}},[]),(0,o.useEffect)(function(){(0,p.Yl)(a,n)},[a,n]),(0,o.useEffect)(function(){y?(document.body.classList.add("tab-view"),document.body.classList.remove("sidepanel-view")):(document.body.classList.remove("tab-view"),document.body.classList.add("sidepanel-view"))},[y]);(0,c.nG)(h.PQ.WELCOME_PAGE_START_NEW_CHAT,function(){b(h.BR,"tab-view"),window.location.hash="/".concat(h.p4.MAIN)});var w=(0,C.jsxs)(m.I9,{children:[!(0,p.O_)()&&(0,C.jsx)(L.t,{}),(0,p.Nu)()&&(0,C.jsx)(_u,{}),(0,C.jsxs)(v.BV,{children:[r&&(0,C.jsx)(v.qh,{path:"/".concat(h.p4.APPLICATION_X,"/*"),Component:Mu,errorElement:R}),(0,C.jsx)(v.qh,{path:"/".concat(h.p4.MAIN,"/*"),Component:gu,errorElement:R}),(0,C.jsx)(v.qh,{path:"/".concat(h.p4.PRIVATE_MODE),Component:E,errorElement:R}),(0,C.jsx)(v.qh,{path:"/",element:(0,C.jsx)(v.C5,{to:"/".concat(h.p4.MAIN)}),errorElement:R}),(0,C.jsx)(v.qh,{path:"*",Component:T})]})]});return r?(0,C.jsx)(Du.A,{children:w}):w};(0,r(92253).i)("chat");var Ru=function(){return(0,C.jsx)(a.b,{children:(0,C.jsx)(l,{children:(0,C.jsx)(Tu,{})})})},Lu=document.getElementById("root");document.body.parentNode&&Lu&&(0,n.createRoot)(Lu).render((0,C.jsx)(Ru,{}))},68427:(e,t,r)=>{r.d(t,{Yl:()=>o,s8:()=>a});var n=r(65300);r(11278);function a(e){for(var t=["pre",".hljs",".table-wrapper"],r=0;r<t.length;r++)document.querySelectorAll(t[r]).forEach(function(t){"mask"===e?t.classList.add("!overflow-hidden"):t.classList.remove("!overflow-hidden")})}var o=function(e,t){var r,a;switch(t){case n.Yt.GX:a=e?"opera-gx-dark":"opera-gx";break;case n.Yt.Air:a=e?"opera-air-dark":"opera-air";break;default:a=e?"opera-dark":"opera"}null===(r=document.querySelector("html"))||void 0===r||r.setAttribute("data-theme",a)}},87713:(e,t,r)=>{r.d(t,{$n:()=>n.$n,Eg:()=>n.Eg,K0:()=>n.K0});var n=r(5223)},91974:(e,t,r)=>{r.d(t,{$n:()=>v,Ak:()=>f,hb:()=>p});var n=r(80045),a=r(64467),o=r(46942),s=r.n(o),i=r(3028),c=r(74848),l=["variant","children","tabIndex","className","action","testId","url","size"];function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach(function(t){(0,a.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var f=function(e){return e.Primary="primary",e.Secondary="secondary",e.Tertiary="tertiary",e.Ghost="ghost",e.Link="link",e.Error="error",e.Delete="delete",e}({}),p=(0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)({},f.Primary,"button-primary flex items-center justify-center bg-color-accent-50 hover:bg-color-accent-40 text-color-text-00 disabled:bg-color-neutral-92 disabled:text-color-text-03"),f.Secondary,"button-secondary flex items-center justify-center bg-color-neutral-92 hover:bg-color-neutral-90 text-color-text-01 disabled:text-color-text-03"),f.Tertiary,"button-tertiary flex items-center justify-center border border-color-neutral-88 bg-transparent text-color-text-01 hover:bg-color-secondary-s-921560 disabled:text-color-text-03"),f.Ghost,"justify-center flex flex-row items-center rounded-aria-radius-3 hover:bg-color-neutral-98"),f.Link,"justify-center items-center justify-center flex flex-row items-center rounded-aria-radius-3 underline"),f.Error,"bg-transparent border flex items-center justify-center border-solid border-color-state-error text-color-state-error"),f.Delete,"bg-color-state-error flex items-center justify-center hover:bg-color-state-error text-color-text-00"),m={l:"text-button-l px-aria-6 py-aria-4 rounded-aria-radius-3",m:"text-button-m px-aria-4 py-aria-3 rounded-aria-radius-3",s:"text-button-s px-aria-4 py-aria-3 rounded-aria-radius-3"},v=function(e){var t=e.variant,r=e.children,a=e.tabIndex,o=void 0===a?0:a,u=e.className,v=void 0===u?"":u,h=e.action,x=e.testId,g=void 0===x?"":x,b=e.url,y=e.size,j=void 0===y?"m":y,w=(0,n.A)(e,l);return t===f.Link&&b?(0,c.jsx)("a",d(d({href:b,rel:"noopener noreferrer",target:"_blank"},w),{},{className:s()(p[t],v,"cursor-pointer"),children:r})):(0,c.jsx)("button",d(d({className:s()(p[t],m[j],v),tabIndex:o,onClick:h,onKeyUp:h?(0,i.lO)(h):void 0,"data-testid":g},w),{},{children:r}))}},92587:(e,t,r)=>{r.d(t,{HU:()=>a,YC:()=>n});var n=1e3,a=700}},a={};function o(e){var t=a[e];if(void 0!==t)return t.exports;var r=a[e]={id:e,loaded:!1,exports:{}};return n[e].call(r.exports,r,r.exports,o),r.loaded=!0,r.exports}o.m=n,e=[],o.O=(t,r,n,a)=>{if(!r){var s=1/0;for(u=0;u<e.length;u++){for(var[r,n,a]=e[u],i=!0,c=0;c<r.length;c++)(!1&a||s>=a)&&Object.keys(o.O).every(e=>o.O[e](r[c]))?r.splice(c--,1):(i=!1,a<s&&(s=a));if(i){e.splice(u--,1);var l=n();void 0!==l&&(t=l)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[r,n,a]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},r=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,o.t=function(e,n){if(1&n&&(e=this(e)),8&n)return e;if("object"==typeof e&&e){if(4&n&&e.__esModule)return e;if(16&n&&"function"==typeof e.then)return e}var a=Object.create(null);o.r(a);var s={};t=t||[null,r({}),r([]),r(r)];for(var i=2&n&&e;("object"==typeof i||"function"==typeof i)&&!~t.indexOf(i);i=r(i))Object.getOwnPropertyNames(i).forEach(t=>s[t]=()=>e[t]);return s.default=()=>e,o.d(a,s),a},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),o.j=736,o.p="",(()=>{o.b="undefined"!=typeof document&&document.baseURI||self.location.href;var e={736:0};o.O.j=t=>0===e[t];var t=(t,r)=>{var n,a,[s,i,c]=r,l=0;if(s.some(t=>0!==e[t])){for(n in i)o.o(i,n)&&(o.m[n]=i[n]);if(c)var u=c(o)}for(t&&t(r);l<s.length;l++)a=s[l],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(u)},r=self.webpackChunkaria_extension=self.webpackChunkaria_extension||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var s=o.O(void 0,[96,76],()=>o(68204));s=o.O(s)})();