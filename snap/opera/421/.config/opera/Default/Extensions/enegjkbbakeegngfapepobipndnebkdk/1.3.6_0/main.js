(()=>{"use strict";var e={100:e=>{var t,r="object"==typeof Reflect?Reflect:null,a=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(r,a){function i(r){e.removeListener(t,s),a(r)}function s(){"function"==typeof e.removeListener&&e.removeListener("error",i),r([].slice.call(arguments))}p(e,t,s,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&p(e,"error",t,{once:!0})}(e,i)}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var n=10;function o(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function l(e,t,r,a){var i,s,n,l;if(o(r),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),n=s[t]),void 0===n)n=s[t]=r,++e._eventsCount;else if("function"==typeof n?n=s[t]=a?[r,n]:[n,r]:a?n.unshift(r):n.push(r),(i=c(e))>0&&n.length>i&&!n.warned){n.warned=!0;var v=new Error("Possible EventEmitter memory leak detected. "+n.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");v.name="MaxListenersExceededWarning",v.emitter=e,v.type=t,v.count=n.length,l=v,console&&console.warn&&console.warn(l)}return e}function v(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,r){var a={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=v.bind(a);return i.listener=r,a.wrapFn=i,i}function u(e,t,r){var a=e._events;if(void 0===a)return[];var i=a[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):h(i,i.length)}function b(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function h(e,t){for(var r=new Array(t),a=0;a<t;++a)r[a]=e[a];return r}function p(e,t,r,a){if("function"==typeof e.on)a.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(s){a.once&&e.removeEventListener(t,i),r(s)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return n},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");n=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,s=this._events;if(void 0!==s)i=i&&void 0===s.error;else if(!i)return!1;if(i){var n;if(t.length>0&&(n=t[0]),n instanceof Error)throw n;var o=new Error("Unhandled error."+(n?" ("+n.message+")":""));throw o.context=n,o}var c=s[e];if(void 0===c)return!1;if("function"==typeof c)a(c,this,t);else{var l=c.length,v=h(c,l);for(r=0;r<l;++r)a(v[r],this,t)}return!0},s.prototype.addListener=function(e,t){return l(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return l(this,e,t,!0)},s.prototype.once=function(e,t){return o(t),this.on(e,d(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return o(t),this.prependListener(e,d(this,e,t)),this},s.prototype.removeListener=function(e,t){var r,a,i,s,n;if(o(t),void 0===(a=this._events))return this;if(void 0===(r=a[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete a[e],a.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,s=r.length-1;s>=0;s--)if(r[s]===t||r[s].listener===t){n=r[s].listener,i=s;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(a[e]=r[0]),void 0!==a.removeListener&&this.emit("removeListener",e,n||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,r,a;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,s=Object.keys(r);for(a=0;a<s.length;++a)"removeListener"!==(i=s[a])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(a=t.length-1;a>=0;a--)this.removeListener(e,t[a]);return this},s.prototype.listeners=function(e){return u(this,e,!0)},s.prototype.rawListeners=function(e){return u(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):b.call(e,t)},s.prototype.listenerCount=b,s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},701:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Adblock=void 0;const r="adblocker.enabled";t.Adblock=class{variableStore;static VARIABLES={adblocker_enabled:{default:0,description:"Whether the adblocker is enabled"}};constructor(e){this.variableStore=e,void 0!==chrome.settingsPrivate&&this.initialize()}async initialize(){const e=await chrome.settingsPrivate.getPref(r);this.variableStore.setInt("adblocker_enabled",e.value?1:0)}updateVariable(e){e.forEach((e=>{e.key===r&&this.variableStore.setInt("adblocker_enabled",e.value?1:0)}))}static registerVariables(e){e.registerIntVariable("adblocker_enabled",0)}}},338:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncFlag=void 0,t.AsyncFlag=class{promise;resolve;constructor(){this.promise=Promise.resolve(),this.resolve=null}block(){this.resolve||(this.promise=new Promise((e=>{this.resolve=e})))}unblock(){this.resolve&&(this.resolve(),this.resolve=null,this.promise=Promise.resolve())}async waitIfBlocked(){await this.promise}}},570:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CategoryEventSource=t.CategoryType=void 0;const a=r(903);var i;!function(e){e.WORK="work",e.ENTERTAINMENT="entertainment",e.GAMING="gaming",e.TRAVEL="travel",e.SPORT="sport",e.SHOPPING="shopping",e.OTHER="other"}(i||(t.CategoryType=i={}));const s={work:["google.com","microsoft.com","live.com","outlook.com"],entertainment:["apple.com/apple-music/","archiveofourown.org","biletyna.pl","bonito.pl","cda.pl","discogs.com","disneyplus.com","ebilet.pl","empik.com","eska.pl","eventbrite.de","eventim.de","eventim.pl","filmweb.pl","genius.com","hbomax.com","hulu.com","imdb.com","kupbilecik.pl","legimi.pl","lubimyczytac.pl","nbc.com","ndr.de","netflix.com","overdrive.com","primevideo.com","publio.pl","radiozet.pl","rmffm.pl","soundcloud.com","spotify.com","tekstowo.pl","thomann.de","ticketmaster.de","ticketmaster.pl","viagogo.de","wattpad.com","woblink.com","worldstar.com","youtube.com","zdf.de"],gaming:["browsergames.de","buffed.de","computerbild.de/spiele/news","cybersport.pl","dekudeals.com","eneba.com","esportnow.pl","g2a.com/pl","gameduell.de/gd","gameforge.com/de-de","gamestar.de/news","gamingsociety.pl","gg.deals","giga.de/games/news","gry-online.pl","ign.com","inside-digital.de/entertainment/news/gaming-news","kinguin.net","lowcygier.pl","metacritic.com/game","miastogier.pl","pl.egamersworld.com","planetagracza.pl","prosiebengames.de","psdeals.net","theverge.com/games","xbdeals.net"],travel:["aa.com","aerotelegraph.de","airbnb.com","airbnb.de","airbnb.pl","avis.com","billiger-mietwagen.de","blablacar.de","blablacar.pl","booking.com","budget.com","carfree.pl","delta.com","discovercars.com","e-podroznik.pl","enterprise.com","europcar.de","eurowings.com","expedia.com","fewo-direkt.de","fly4free.pl","getyourguide.com","hamburg.de","hertz.com","holidaycheck.de","hometogo.de","intercity.pl","itaka.pl","jetblue.com","kayak.com","lot.com","lufthansa.com","marriott.com","noclegi.pl","profitroom.com","rentalcars.com","rentalcars.de","rozklad-pkp.pl","ryanair.com","sixt.de","skyscanner.de","skyscanner.pl","southwest.com","travelbook.de","travelerdreams.com","tripadvisor.com","tripadvisor.de","trivago.de","trivago.pl","tui.com","united.com","universalorlando.com","viator.com","vrbo.com","wakacje.pl","wizzair.com"],sport:["247sports.com","bet365.de","betfan.pl/zaklady-bukmacherskie","betonline.ag","betus.com.pa","cbssports.com","dazn.com","efortuna.pl","espn.com","eurosport.de","eurosport.tvn24.pl","flashscore.com","flashscore.de","flashscore.pl","kicktipp.de","lephaush.net","livescore.com","lvbet.pl/pl","mybookie.ag","nbcsports.com","sofascore.com","sport.bild.de","sport.interia.pl","sport.pl","sport.tvp.pl","sport1.de","sports.tipico.de","sports.yahoo.com","sportschau.de","sts.pl","superbet.pl/intro","tipico.de","topnewsfeeds.net"],shopping:["adcell.com","alerabat.com","allegro.pl","allegrolokalnie.pl","amazon.com","amazon.pl","bizrate.com","ceneo.pl","coolblue.de","ebay-kleinanzeigen.de","ebay.com","empik.com","geizhals.de","groupon.com","groupon.de","groupon.pl","hereswhatstrending.com","idealo.de","ikea.com/pl/pl","kaufda.de","letyshops.com","markt.de","michaels.com","mydealz.de","offerup.com","okazje.info.pl","okazjum.pl","olx.pl","otomoto.pl","pepper.pl","poshmark.com","prospektangebote.de","prospektmaschine.de","qvc.com","searchiqnet.com","skapiec.pl","slickdeals.net","swagbucks.com","thalia.de","tradechaser.com"]};class n{fireEvent;variableStore;storeTabsWithCategory;storeCategoryCounters;extensionLaunchType;static NUMBER_OF_TABS_TO_TRIGGER_EVENT=3;static VARIABLES={category:{default:"unknown",description:"Current category by number of open tabs (work, entertainment, gaming, travel, sport, shopping)"}};static EVENT_SOURCE_NAME="category";tabsWithCategory=new Map;categoryCounters=new Map;state=a.State.Inactive;constructor(e,t,r,a,i){this.fireEvent=e,this.variableStore=t,this.storeTabsWithCategory=r,this.storeCategoryCounters=a,this.extensionLaunchType=i}static registerVariables(e){e.registerStringVariable("category",this.VARIABLES.category.default)}findCategory(e){return e?s.entertainment.find((t=>e.includes(t)))?i.ENTERTAINMENT:s.work.find((t=>e.includes(t)))?i.WORK:s.gaming.find((t=>e.includes(t)))?i.GAMING:s.travel.find((t=>e.includes(t)))?i.TRAVEL:s.sport.find((t=>e.includes(t)))?i.SPORT:s.shopping.find((t=>e.includes(t)))?i.SHOPPING:i.OTHER:i.OTHER}async listenerUpdate(e,t,r){if(this.state!==a.State.Active||void 0===t.status||"loading"!==t.status)return;const s=this.findCategory(r.url),o=this.tabsWithCategory.get(e);if(void 0!==o&&this.categoryCounters.get(o)){const e=this.categoryCounters.get(o);e&&this.categoryCounters.set(o,Math.max(e-1,0))}const c=this.categoryCounters.get(s)?this.categoryCounters.get(s)+1:1;if(this.categoryCounters.set(s,c),this.tabsWithCategory.set(e,s),c>=n.NUMBER_OF_TABS_TO_TRIGGER_EVENT&&s!==i.OTHER){this.categoryCounters.set(s,0),this.variableStore.setString("category",s);try{this.fireEvent({eventName:n.EVENT_SOURCE_NAME,windowId:r.windowId})}catch(e){opr.richHintsAgentPrivate.reportFeedback(opr.richHintsAgentPrivate.FeedbackType.ERROR,"e:category_event_source:"+r.windowId)}}this.storeCategoryCounters.saveMap(this.categoryCounters),this.storeTabsWithCategory.saveMap(this.tabsWithCategory)}async listener(e){if(this.state!==a.State.Active)return;const t=this.tabsWithCategory.get(e);if(void 0!==t){const r=this.categoryCounters.get(t);void 0!==r&&r>0&&(this.categoryCounters.set(t,r-1),this.storeCategoryCounters.saveMap(this.categoryCounters)),this.tabsWithCategory.delete(e),this.storeTabsWithCategory.saveMap(this.tabsWithCategory)}}async activate(){"reactivated"===this.extensionLaunchType&&(this.tabsWithCategory=await this.storeTabsWithCategory.loadMap(),this.categoryCounters=await this.storeCategoryCounters.loadMap()),this.state=a.State.Active}async deactivate(){this.storeTabsWithCategory.removeObject(),this.storeCategoryCounters.removeObject(),this.state=a.State.Inactive}}t.CategoryEventSource=n},310:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ClockEventSource=t.AgentClock=void 0;const a=r(100),i=r(903);class s{variableStore;static ALARM_NAME="minute-passed";static VARIABLES={minutes_since_startup:{default:0,description:"Time since Opera launched"}};sessionStartTime=-1;eventEmitter=new a.EventEmitter;onBeforeMinutePassedBarrier;static registerVariables(e){e.registerIntVariable("minutes_since_startup",this.VARIABLES.minutes_since_startup.default)}constructor(e){this.variableStore=e,this.minutePassedHandler=this.minutePassedHandler.bind(this),this.setOnBeforeMinutePassedBarrier=this.setOnBeforeMinutePassedBarrier.bind(this)}onMinutePassed(e){this.eventEmitter.on(s.ALARM_NAME,e)}setOnBeforeMinutePassedBarrier(e){this.onBeforeMinutePassedBarrier=e}removeCallback(e){chrome.alarms.clear(s.ALARM_NAME),this.eventEmitter.removeListener(s.ALARM_NAME,e)}async init(e){const t=(await chrome.storage.local.get("session_data")).session_data??{};this.sessionStartTime=await(async()=>("extension_update"===e&&"number"==typeof t.sessionStartTime||"reactivated"===e||(t.sessionStartTime=Date.now(),await chrome.storage.local.set({session_data:t})),t.sessionStartTime))(),await chrome.alarms.get(s.ALARM_NAME)||chrome.alarms.create(s.ALARM_NAME,{periodInMinutes:1}),this.calculateMinutesSinceStartup()}getSessionStartTime=()=>this.sessionStartTime;calculateMinutesSinceStartup(){const e=Math.round((Date.now()-this.sessionStartTime)/6e4);this.variableStore.setInt("minutes_since_startup",e)}async minutePassedHandler(){this.calculateMinutesSinceStartup(),this.onBeforeMinutePassedBarrier&&await this.onBeforeMinutePassedBarrier(),this.eventEmitter.emit(s.ALARM_NAME)}}t.AgentClock=s;class n{clock;static EVENT_SOURCE_NAME="minute-passed";minutePassedCallback(){this.fireOnMinutePassedEvent()}constructor(e){this.clock=e,this.minutePassedCallback=this.minutePassedCallback.bind(this),this.fireOnMinutePassedEvent=this.fireOnMinutePassedEvent.bind(this)}state=i.State.Inactive;async listener(e){e.name===s.ALARM_NAME&&this.clock.minutePassedHandler()}async activate(){this.clock.onMinutePassed(this.minutePassedCallback),this.state=i.State.Active}async deactivate(){this.state=i.State.Inactive}fireOnMinutePassedEvent(){try{opr.richHintsAgentPrivate.fireEvent({eventName:n.EVENT_SOURCE_NAME})}catch(e){opr.richHintsAgentPrivate.reportFeedback(opr.richHintsAgentPrivate.FeedbackType.ERROR,"e:clock_event_source")}}}t.ClockEventSource=n},931:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Constants=void 0,t.Constants=class{productType;static AGENT_STARTED="started";static AGENT_ONSTARTUP="onStartup";constructor(e){this.productType=e}static async getProductType(){if(opr.operaBrowserPrivate)switch(await new Promise((e=>opr.operaBrowserPrivate.getProduct(e)))){case"Opera Crypto":return"crypto";case"Opera GX":return"gx";case"Opera":return"opera";default:return}}}},400:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiscordPanelOpenedEventSource=void 0;const a=r(903);class i{fireEvent;static EVENT_SOURCE_NAME="discord-panel-opened";state=a.State.Inactive;constructor(e){this.fireEvent=e}async listener(e){if(this.state===a.State.Active&&"Discord"===e)try{this.fireEvent({eventName:i.EVENT_SOURCE_NAME})}catch(e){opr.richHintsAgentPrivate.reportFeedback(opr.richHintsAgentPrivate.FeedbackType.ERROR,"e:discord_panel_opened_event_source")}}async activate(){this.state=a.State.Active}async deactivate(){this.state=a.State.Inactive}}t.DiscordPanelOpenedEventSource=i},686:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorReporter=void 0,t.ErrorReporter=class{constructor(){opr.richHintsAgentPrivate.reportFeedback&&(self.addEventListener("error",(e=>this.onUncaughtError(e.error))),self.addEventListener("unhandledrejection",(e=>this.onUnhandledRejection(e.reason))))}onUncaughtError(e){this.reportError("string"==typeof e?e:e.message)}onUnhandledRejection(e){this.reportError("string"==typeof e?e:e.message)}reportError(e){e&&opr.richHintsAgentPrivate.reportFeedback(opr.richHintsAgentPrivate.FeedbackType.ERROR,""+e)}}},281:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EventRegistry=void 0,t.EventRegistry=class{provideEvents;eventSourceFactory;activeEventsStore;eventsSources=new Map;static ACTIVE_EVENTS="activeEvents";constructor(e,t,r){this.provideEvents=e,this.eventSourceFactory=t,this.activeEventsStore=r}getEventsSources(){return Array.from(this.eventsSources.keys())}async registerEvents(e){if("reactivated"!==e){const e=await this.provideEvents(this.eventSourceFactory.getSupportedEvents());if(!chrome.runtime.lastError){let t=Array.from(this.eventsSources.keys()),r=e.filter((e=>-1===t.indexOf(e))),a=t.filter((t=>-1===e.indexOf(t)));for(const e of r){let t=this.eventSourceFactory.createEventSource(e);t?(this.eventsSources.set(e,t),await t.activate(this)):console.warn("The event "+t+" is unknown and cannot be handled")}for(const e of a){let t=this.eventsSources.get(e);t&&await t.deactivate(this),this.eventsSources.delete(e)}await this.activeEventsStore.save(this.getEventsSources()?.join(","))}}else{const e=await this.activeEventsStore.load();for(const t of e.split(",")){let e=this.eventSourceFactory.createEventSource(t);e&&(this.eventsSources.set(t,e),await e.activate(this))}}}}},742:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EventSourceFactoryImpl=void 0,t.EventSourceFactoryImpl=class{eventFactories;constructor(e){this.eventFactories=e,this.getSupportedEvents=this.getSupportedEvents.bind(this),this.createEventSource=this.createEventSource.bind(this)}createEventSource(e){let t=this.eventFactories.get(e);return t?t():null}getSupportedEvents(){return Array.from(this.eventFactories.keys())}}},903:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.State=void 0,function(e){e[e.Active=0]="Active",e[e.Inactive=1]="Inactive"}(r||(t.State=r={}))},199:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.checkExtensionLaunchType=async function(){const e=(await chrome.storage.local.get("launch_type_check")).launch_type_check??{},t=Boolean(!(await chrome.storage.session.get(a.Constants.AGENT_STARTED))[a.Constants.AGENT_STARTED]),r=chrome.runtime.getManifest().version,i=t?void 0===e.last_recorded_version?"first_install":e.last_recorded_version===r?"browser_launch":"extension_update":"reactivated";return e.last_recorded_version=r,"extension_update"===i&&opr.richHintsAgentPrivate.reportFeedback(opr.richHintsAgentPrivate.FeedbackType.DIAGNOSTICS,"updated_to:"+r),await chrome.storage.local.set({launch_type_check:e}),t&&await chrome.storage.session.set({[a.Constants.AGENT_STARTED]:[a.Constants.AGENT_ONSTARTUP]}),i};const a=r(931)},70:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ManyTabsEventSource=void 0;const a=r(903);class i{performanceVariableCollector;minNumberOfTabs;timeToFireEvent;static EVENT_SOURCE_NAME="many-tabs-all-windows";static DEFAULT_MIN_NUMBER_OF_TABS=25;static DEFAULT_EVENT_FIRE_DELAY_MINUTES=10;static ALARM_NAME="many-tabs-all-windows-alarm";listenerObject;state=a.State.Inactive;constructor(e,t=i.DEFAULT_MIN_NUMBER_OF_TABS,r=i.DEFAULT_EVENT_FIRE_DELAY_MINUTES){this.performanceVariableCollector=e,this.minNumberOfTabs=t,this.timeToFireEvent=r,this.fireEventCallback=this.fireEventCallback.bind(this),this.onTotalTabNumberChangedListener=this.onTotalTabNumberChangedListener.bind(this)}areManyTabsOpen(){return this.performanceVariableCollector.totalTabNumber>=this.minNumberOfTabs}async fireEventCallback(){if(this.areManyTabsOpen())try{opr.richHintsAgentPrivate.fireEvent({eventName:i.EVENT_SOURCE_NAME})}catch(e){opr.richHintsAgentPrivate.reportFeedback(opr.richHintsAgentPrivate.FeedbackType.ERROR,"e:many_tabs_event_source")}}async onTotalTabNumberChangedListener(){this.state===a.State.Active&&(this.areManyTabsOpen()?await chrome.alarms.get(i.ALARM_NAME)||this.activateClock():await chrome.alarms.get(i.ALARM_NAME)&&chrome.alarms.clear(i.ALARM_NAME))}async listener(e){this.state===a.State.Active&&e.name===i.ALARM_NAME&&await this.fireEventCallback()&&chrome.alarms.clear(i.ALARM_NAME)}async activateClock(){await chrome.alarms.get(i.ALARM_NAME)||chrome.alarms.create(i.ALARM_NAME,{periodInMinutes:this.timeToFireEvent})}async activate(){this.listenerObject=()=>this.onTotalTabNumberChangedListener(),this.performanceVariableCollector.addTotalTabNumberChangedListener(this.listenerObject),this.state=a.State.Active}async deactivate(){this.performanceVariableCollector.removeTotalTabNumberChangedListener(this.listenerObject),delete this.listenerObject,chrome.alarms.clear(i.ALARM_NAME),this.state=a.State.Inactive}}t.ManyTabsEventSource=i},330:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ManyTabsFlowEventSource=void 0;const a=r(903);class i{performanceVariableCollector;minNumberOfTabs;timeToFireEvent;static EVENT_SOURCE_NAME="many-tabs-current-window";static DEFAULT_MIN_NUMBER_OF_TABS=15;static DEFAULT_EVENT_FIRE_DELAY_MINUTES=10;static ALARM_NAME="many-tabs-current-window-alarm";listenerObject;state=a.State.Inactive;constructor(e,t=i.DEFAULT_MIN_NUMBER_OF_TABS,r=i.DEFAULT_EVENT_FIRE_DELAY_MINUTES){this.performanceVariableCollector=e,this.minNumberOfTabs=t,this.timeToFireEvent=r,this.onCurrentWindowTabNumberChangedListener=this.onCurrentWindowTabNumberChangedListener.bind(this)}areManyTabsOpen(){return this.performanceVariableCollector.currentWindowTabNumber>this.minNumberOfTabs}async fireEventCallback(){if(this.areManyTabsOpen())try{opr.richHintsAgentPrivate.fireEvent({eventName:i.EVENT_SOURCE_NAME})}catch(e){opr.richHintsAgentPrivate.reportFeedback(opr.richHintsAgentPrivate.FeedbackType.ERROR,"e:many_tabs_flow_event_source")}}async onCurrentWindowTabNumberChangedListener(e){this.state===a.State.Active&&(this.areManyTabsOpen()?await chrome.alarms.get(i.ALARM_NAME)||this.activateClock():await chrome.alarms.get(i.ALARM_NAME)&&chrome.alarms.clear(i.ALARM_NAME))}async listener(e){this.state===a.State.Active&&e.name===i.ALARM_NAME&&await this.fireEventCallback()&&chrome.alarms.clear(i.ALARM_NAME)}async activateClock(){await chrome.alarms.get(i.ALARM_NAME)||chrome.alarms.create(i.ALARM_NAME,{periodInMinutes:this.timeToFireEvent})}async activate(){this.listenerObject=e=>this.onCurrentWindowTabNumberChangedListener(e),this.performanceVariableCollector.addCurrentWindowTabNumberChangedListener(this.listenerObject),this.state=a.State.Active}async deactivate(){this.performanceVariableCollector.removeCurrentWindowTabNumberChangedListener(this.listenerObject),delete this.listenerObject,chrome.alarms.clear(i.ALARM_NAME),this.state=a.State.Inactive}}t.ManyTabsFlowEventSource=i},455:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PerformanceVariableCollector=void 0;const a=r(100);class i{constants;variableStore;clock;static VARIABLES={total_tab_count:{default:0,description:"Total tabs in all windows"},current_window_tab_count:{default:0,description:"Number of tabs in current window"},ram_usage:{default:0,description:"RAM usage (polled every minute)"},browser_files_size:{default:0,description:"Browser file size (polled every minute)"},battery_status:{default:"UNKNOWN",description:"Battery status: CHARGING, DISCHARGING, UNKNOWN"},battery_level_percent:{default:100,description:"Battery level 0-100"},battery_saver_enabled:{default:0,description:"Whether the battery saver feature is enabled"},battery_saver_is_saving_now:{default:0,description:"Whether the battery saver is saving power"},battery_saver_auto_on_enabled:{default:0,description:"Whether the battery saver turns on automatically"},active_days_count:{default:0,description:"Number of active user days"},incrementDate:{default:"1/1/1970",description:"Date of last active user day"}};static ACTIVE_DAYS_ALARM_NAME="active_days_alarm";eventEmitter=new a.EventEmitter;totalTabNumber_;currentWindowTabNumber_;totalActiveDaysNumber=0;incrementDate="1/1/1970";static isBoosterApiAvailable(e){return"gx"===e.productType}static isLimitersApiAvailable(e){return"gx"===e.productType}static isPowerSaverApiAvailable(){return void 0!==opr.powerSavePrivate&&void 0!==opr.powerSavePrivate.onBatteryStatusChanged&&void 0!==opr.powerSavePrivate.onStatusChanged}static registerVariables(e,t){t.registerIntVariable("total_tab_count",this.VARIABLES.total_tab_count.default),t.registerIntVariable("current_window_tab_count",this.VARIABLES.current_window_tab_count.default),i.isBoosterApiAvailable(e)&&t.registerIntVariable("browser_files_size",this.VARIABLES.browser_files_size.default),i.isLimitersApiAvailable(e)&&t.registerIntVariable("ram_usage",this.VARIABLES.ram_usage.default),i.isPowerSaverApiAvailable()&&(t.registerStringVariable("battery_status",this.VARIABLES.battery_status.default),t.registerIntVariable("battery_level_percent",this.VARIABLES.battery_level_percent.default),t.registerIntVariable("battery_saver_enabled",this.VARIABLES.battery_saver_enabled.default),t.registerIntVariable("battery_saver_is_saving_now",this.VARIABLES.battery_saver_is_saving_now.default),t.registerIntVariable("battery_saver_auto_on_enabled",this.VARIABLES.battery_saver_auto_on_enabled.default),t.registerIntVariable("active_days_count",this.VARIABLES.active_days_count.default),t.registerStringVariable("incrementDate",this.VARIABLES.incrementDate.default))}constructor(e,t,r){this.constants=e,this.variableStore=t,this.clock=r,this.collectPerformanceStats=this.collectPerformanceStats.bind(this)}async init(){this.clock.setOnBeforeMinutePassedBarrier((()=>this.collectPerformanceStats())),await this.collectTabStats(),await this.collectCurrentWindowTabStats(),await this.collectPerformanceStats(),await this.collectBatteryStats(),await this.collectActiveDaysStats()}onPrefsChangedListener(e){e.find((e=>"power_save_mode.feature_enabled"===e.key||"power_save_mode.automatic_enabled"===e.key))&&this.collectPrefs()}get totalTabNumber(){return this.totalTabNumber_}get currentWindowTabNumber(){return this.currentWindowTabNumber_}addTotalTabNumberChangedListener(e){this.eventEmitter.on("total-tab-number-changed",e)}removeTotalTabNumberChangedListener(e){this.eventEmitter.removeListener("total-tab-number-changed",e)}addCurrentWindowTabNumberChangedListener(e){this.eventEmitter.on("current-window-tab-number-changed",e)}removeCurrentWindowTabNumberChangedListener(e){this.eventEmitter.removeListener("current-window-tab-number-changed",e)}async collectTabStats(){const e=await chrome.windows.getAll({populate:!0});this.totalTabNumber_=e.filter((e=>"normal"===e.type)).map((e=>e.tabs?e.tabs.length:0)).reduce(((e,t)=>t+e),0),this.variableStore.setInt("total_tab_count",this.totalTabNumber_),this.eventEmitter.emit("total-tab-number-changed",this.totalTabNumber_)}async collectCurrentWindowTabStats(){this.currentWindowTabNumber_=(await chrome.tabs.query({currentWindow:!0,pinned:!1})).length,this.variableStore.setInt("current_window_tab_count",this.currentWindowTabNumber_),this.eventEmitter.emit("current-window-tab-number-changed",this.currentWindowTabNumber_)}async collectActiveDaysStats(){this.totalActiveDaysNumber=this.variableStore.getInt("active_days_count"),isNaN(this.totalActiveDaysNumber)&&(this.totalActiveDaysNumber=0),this.incrementDate=this.variableStore.getString("incrementDate"),this.incrementDate!==(new Date).toLocaleDateString()&&(this.totalActiveDaysNumber=++this.totalActiveDaysNumber,this.incrementDate=(new Date).toLocaleDateString(),this.variableStore.setString("incrementDate",this.incrementDate));await chrome.alarms.get(i.ACTIVE_DAYS_ALARM_NAME)||chrome.alarms.create(i.ACTIVE_DAYS_ALARM_NAME,{periodInMinutes:(()=>{const e=new Date;return(new Date(e).setHours(24,0,0,0)-e)/6e4})()}),this.variableStore.setInt("active_days_count",this.totalActiveDaysNumber)}allDayPassedAlarm(e){e.name===i.ACTIVE_DAYS_ALARM_NAME&&(this.collectActiveDaysStats(),chrome.alarms.clear(i.ACTIVE_DAYS_ALARM_NAME))}async collectPerformanceStats(){if(i.isBoosterApiAvailable(this.constants)){const e=await new Promise((e=>chrome.boosterPrivate.getTotalUsedDiskSpace(e)));this.variableStore.setInt("browser_files_size",e)}if(i.isLimitersApiAvailable(this.constants)){const e=await new Promise((e=>opr.limitersPrivate.getCurrentMemoryUsage(e)));this.variableStore.setInt("ram_usage",e.memoryUsed)}}async collectPrefs(){const e=await chrome.settingsPrivate.getPref("power_save_mode.automatic_enabled");this.variableStore.setInt("battery_saver_auto_on_enabled",e.value?1:0);const t=await chrome.settingsPrivate.getPref("power_save_mode.feature_enabled");this.variableStore.setInt("battery_saver_enabled",t.value?1:0)}async setBatteryStatusVariables(e){this.variableStore.setString("battery_status",e.dischargingState),this.variableStore.setInt("battery_level_percent",Math.round(100*e.level))}async setBatterySaverIsSavingVariable(e){this.variableStore.setInt("battery_saver_is_saving_now",e.isEnabled?1:0)}async collectBatteryStats(){if(!i.isPowerSaverApiAvailable())return;const e=await new Promise((e=>opr.powerSavePrivate.getStatus(e)));await this.setBatterySaverIsSavingVariable(e);const t=await new Promise((e=>opr.powerSavePrivate.getBatteryStatus(e)));await this.setBatteryStatusVariables(t),await this.collectPrefs()}}t.PerformanceVariableCollector=i},630:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TabChangedEventSource=void 0;const a=r(903);class i{fireEvent;tabsGetFunction;variableStore;static VARIABLES={last_tab_url:{default:"none",description:"Last navigated url"}};static EVENT_SOURCE_NAME="tab-changed";state=a.State.Inactive;constructor(e,t,r){this.fireEvent=e,this.tabsGetFunction=t,this.variableStore=r}static registerVariables(e){e.registerStringVariable("last_tab_url",this.VARIABLES.last_tab_url.default)}async listener(e){if(this.state!==a.State.Active)return;const t=await this.tabsGetFunction(e.tabId);if(t&&t.url&&e.windowId){await this.variableStore.setString("last_tab_url",t.url);try{this.fireEvent({eventName:i.EVENT_SOURCE_NAME,windowId:e.windowId})}catch(e){opr.richHintsAgentPrivate.reportFeedback(opr.richHintsAgentPrivate.FeedbackType.ERROR,"e:tab_changed_event_source")}}}async activate(){this.state=a.State.Active}async deactivate(){this.state=a.State.Inactive}}t.TabChangedEventSource=i},32:(e,t)=>{function r(){return Date.now()}Object.defineProperty(t,"__esModule",{value:!0}),t.UiVariableCollector=void 0,t.UiVariableCollector=class{variableStore;static VARIABLES={vpn_badge_interaction_timestamp:{default:0,description:"Last interaction time with the VPN badge as a timestamp"},vpn_enabled:{default:0,description:"Current state of the VPN badge"},vpn_enabled_timestamp:{default:0,description:"Time when VPN was enabled as a timestamp"}};currentEnabledState;static isAvailable(){return void 0!==opr.uiTrackerPrivate}static registerVariables(e){e.registerIntVariable("vpn_badge_interaction_timestamp",this.VARIABLES.vpn_badge_interaction_timestamp.default),e.registerIntVariable("vpn_enabled",this.VARIABLES.vpn_enabled.default),e.registerIntVariable("vpn_enabled_timestamp",this.VARIABLES.vpn_enabled_timestamp.default)}constructor(e){this.variableStore=e}async onVpnMouseAction(e,t){t.error||"EventType::kMousePressed"===/[^\s]+/.exec(t.actionDetails)[0]&&this.variableStore.setInt("vpn_badge_interaction_timestamp",r())}async onVpnUiStateChanged(e,t){if(t.error)return;const a=this.currentEnabledState;if(this.currentEnabledState="inactive"!==t.propertyValue&&"invisible"!==t.propertyValue,a!=this.currentEnabledState){const e=void 0===a,t=0===this.variableStore.getInt("vpn_enabled_timestamp");!this.currentEnabledState||e&&!t||this.variableStore.setInt("vpn_enabled_timestamp",r(),"dont_flush"),this.variableStore.setInt("vpn_enabled",this.currentEnabledState?1:0)}}}},743:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VariableRegistry=void 0,t.VariableRegistry=class{_variables=new Map;get variables(){return this._variables}registerIntVariable(e,t){this.variables.set(e,t)}registerStringVariable(e,t){this.variables.set(e,t)}}},401:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VariableStore=void 0;class r{storage;settings;constructor(e,t){this.storage=e,this.settings=t}static async saveInternal(e,t){await e.set(t)}async setInt(e,t,r){if(!(e in this.settings.trigger_variables.int))throw new Error("Attempted to set an unregistered int variable: "+e);this.settings.trigger_variables.int[e]=t,void 0!==r&&"flush"!==r||await this.save()}async setString(e,t,r){if(!(e in this.settings.trigger_variables.string))throw new Error("Attempted to set an unregistered int variable: "+e);this.settings.trigger_variables.string[e]=t,void 0!==r&&"flush"!==r||await this.save()}getInt(e){const t=this.settings.trigger_variables.int[e];if(void 0===t)throw new Error("Variable not registered");return t}getString(e){const t=this.settings.trigger_variables.string[e];if(void 0===t)throw new Error("Variable not registered");return t}async save(){await r.saveInternal(this.storage,this.settings)}static async load(e,t){const a={trigger_variables:(await e.get()).trigger_variables??{int:{},string:{}}};return["int","string"].forEach((e=>{const r=new Set;for(const i in a.trigger_variables[e])(()=>{const r=t.variables.get(i);return(void 0===r?"none":"string"==typeof r?"string":"int")!==e})()&&r.add(i);r.forEach((t=>{delete a.trigger_variables[e][t]}))})),t.variables.forEach(((e,t)=>{const r="string"==typeof e?"string":"int",i="string"==typeof e?"int":"string";t in a.trigger_variables[r]||(a.trigger_variables[r][t]=e),t in a.trigger_variables[i]&&delete a.trigger_variables[i][t]})),await r.saveInternal(e,a),new r(e,a)}}t.VariableStore=r},745:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VariableStoreSession=void 0,t.VariableStoreSession=class{key;constructor(e){this.key=e}async save(e){await chrome.storage.session.set({[this.key]:e})}async saveMap(e){const t=Array.from(e.entries()),r=JSON.stringify(t);await chrome.storage.session.set({[this.key]:r})}async load(){return(await chrome.storage.session.get(this.key))[this.key]}async loadMap(){const e=(await chrome.storage.session.get(this.key))[this.key]??0;return e?new Map(JSON.parse(e)):new Map}async removeObject(){await chrome.storage.session.remove(this.key)}}},737:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VpnProEventSource=void 0;const a=r(903);class i{variableStore;static EVENT_SOURCE_NAME="vpn-pro";state=a.State.Inactive;listenerObject;static VARIABLES={vpnpro_subsc_expired:{default:0,description:"Subscription expired: 0 - no/never activated, 1 - expired"},vpnpro_subsc_active:{default:0,description:"Subscription status: 0 - inactive/unknown, 1 - active"}};constructor(e){this.variableStore=e}isSubscriptionValid(e){return Date.now()<new Date(e).getTime()}async listener(e){if(this.state!==a.State.Active)return;if(e===opr.vpnProPrivate.State.SUBSCRIPTION_EXPIRED)return this.variableStore.setInt("vpnpro_subsc_expired",1),this.variableStore.setInt("vpnpro_subsc_active",0),void this.fireEvent();const t=await new Promise((e=>{opr.vpnProPrivate.getSubscriptionDetails((t=>{e(t.expiresAt)}))}));if(this.isSubscriptionValid(t)){const e=this.variableStore.getInt("vpnpro_subsc_active");this.variableStore.setInt("vpnpro_subsc_expired",0),this.variableStore.setInt("vpnpro_subsc_active",1),0===e&&this.fireEvent()}else this.variableStore.setInt("vpnpro_subsc_active",0)}async fireEvent(){try{await opr.richHintsAgentPrivate.fireEvent({eventName:i.EVENT_SOURCE_NAME})}catch(e){opr.richHintsAgentPrivate.reportFeedback(opr.richHintsAgentPrivate.FeedbackType.ERROR,"e:vpn_pro_event_source")}}static registerVariables(e){e.registerIntVariable("vpnpro_subsc_active",this.VARIABLES.vpnpro_subsc_active.default),e.registerIntVariable("vpnpro_subsc_expired",this.VARIABLES.vpnpro_subsc_expired.default)}static isAvailable(){return!!opr.vpnProPrivate}async activate(){this.state=a.State.Active}async deactivate(){this.state=a.State.Inactive}}t.VpnProEventSource=i}},t={};function r(a){var i=t[a];if(void 0!==i)return i.exports;var s=t[a]={exports:{}};return e[a](s,s.exports,r),s.exports}(()=>{const e=r(281),t=r(742),a=r(701),i=r(686),s=r(630),n=r(570),o=r(70),c=r(330),l=r(743),v=r(401),d=r(199),u=r(310),b=r(455),h=r(32),p=r(931),m=r(737),g=r(400),_=r(903),f=r(745);let y;const E=new(r(338).AsyncFlag);let S=()=>{};const A=new Promise((e=>{S=e}));let w=!1;self.errorReporter=new i.ErrorReporter;const T=async()=>{w=!0,E.block(),await A,await self.eventRegistry.registerEvents("specification_update"),L(),E.unblock()},C=async e=>{await A,self.tabChangeEventSource.listener(e)},M=async e=>{await A,self.discordPanelOpenedEventSource.listener(e)},N=async(e,t,r)=>{await A,self.categoryEventSource.listenerUpdate(e,t,r)},P=async e=>{await A,self.categoryEventSource.listener(e)},V=e=>{h.UiVariableCollector.isAvailable()&&(opr.uiTrackerPrivate.onUiElementPropertyChanged.addListener((async(e,t)=>{await A,self.uiVariableCollector.onVpnUiStateChanged(e,t)}),e,"address_bar_vpn","UiState"),opr.uiTrackerPrivate.onUiElementAction.addListener((async(e,t)=>{await A,self.uiVariableCollector.onVpnMouseAction(e,t)}),e,"address_bar_vpn","Mouse"))},L=async()=>{const e=await chrome.windows.getAll({windowTypes:["normal"]});for(const t of e)t.id&&V(t.id);await A,self.tabChangeEventSource.state!==_.State.Active?chrome.tabs.onActivated.removeListener(C):w&&chrome.tabs.onActivated.addListener(C),self.discordPanelOpenedEventSource.state!==_.State.Active?opr.browserSidebarPrivate.onItemExpanded.removeListener(M):w&&opr.browserSidebarPrivate.onItemExpanded.addListener(M),self.categoryEventSource.state!==_.State.Active?(chrome.tabs.onUpdated.removeListener(N),chrome.tabs.onRemoved.removeListener(P)):w&&(chrome.tabs.onUpdated.addListener(N),chrome.tabs.onRemoved.addListener(P))};(async()=>{await A,opr.richHintsAgentPrivate.onSpecificationUpdated.addListener(T)})(),chrome.tabs.onActivated.addListener(C),opr.browserSidebarPrivate.onItemExpanded.addListener(M),chrome.tabs.onUpdated.addListener(N),chrome.tabs.onRemoved.addListener(P),chrome.settingsPrivate.onPrefsChanged.addListener((async e=>{await A,self.adblock.updateVariable(e)})),chrome.alarms.onAlarm.addListener((async e=>{await A,await E.waitIfBlocked(),self.clockEventSource.listener(e),self.manyTabsEventSource.listener(e),self.manyTabsFlowEventSource.listener(e),self.performanceVariableCollector.allDayPassedAlarm(e)})),chrome.tabs.onCreated.addListener((async()=>{await A,self.performanceVariableCollector.collectTabStats(),self.performanceVariableCollector.collectCurrentWindowTabStats()})),chrome.tabs.onRemoved.addListener((async()=>{await A,self.performanceVariableCollector.collectTabStats(),self.performanceVariableCollector.collectCurrentWindowTabStats()})),chrome.windows.onFocusChanged.addListener((async()=>{await A,self.performanceVariableCollector.collectCurrentWindowTabStats()})),chrome.settingsPrivate.onPrefsChanged.addListener((async e=>{await A,self.performanceVariableCollector.onPrefsChangedListener(e)})),b.PerformanceVariableCollector.isPowerSaverApiAvailable()&&(opr.powerSavePrivate.onStatusChanged.addListener((async e=>{await A,self.performanceVariableCollector.setBatterySaverIsSavingVariable(e)})),opr.powerSavePrivate.onBatteryStatusChanged.addListener((async e=>{await A,self.performanceVariableCollector.setBatteryStatusVariables(e)}))),chrome.windows.onCreated.addListener((e=>{(async e=>{await A,"normal"===e.type&&e.id&&V(e.id)})(e)})),m.VpnProEventSource.isAvailable()&&opr.vpnProPrivate.onStateChanged.addListener((async e=>{await A,self.vpnProEventSource.listener(e)})),(async()=>{const r=await(0,d.checkExtensionLaunchType)(),i=new p.Constants(await p.Constants.getProductType()),_=new l.VariableRegistry;s.TabChangedEventSource.registerVariables(_),n.CategoryEventSource.registerVariables(_),m.VpnProEventSource.registerVariables(_),a.Adblock.registerVariables(_),u.AgentClock.registerVariables(_),b.PerformanceVariableCollector.registerVariables(i,_),h.UiVariableCollector.isAvailable()&&h.UiVariableCollector.registerVariables(_),self.variableStore=await v.VariableStore.load(chrome.storage.local,_),self.adblock=new a.Adblock(self.variableStore),y=new u.AgentClock(self.variableStore),await y.init(r),self.performanceVariableCollector=new b.PerformanceVariableCollector(i,self.variableStore,y),self.performanceVariableCollector.init(),h.UiVariableCollector.isAvailable()&&(self.uiVariableCollector=new h.UiVariableCollector(self.variableStore));const E=new Map;self.tabChangeEventSource=new s.TabChangedEventSource(opr.richHintsAgentPrivate.fireEvent,chrome.tabs.get,self.variableStore),E.set(s.TabChangedEventSource.EVENT_SOURCE_NAME,(()=>self.tabChangeEventSource)),self.discordPanelOpenedEventSource=new g.DiscordPanelOpenedEventSource(opr.richHintsAgentPrivate.fireEvent),E.set(g.DiscordPanelOpenedEventSource.EVENT_SOURCE_NAME,(()=>self.discordPanelOpenedEventSource)),self.categoryEventSource=new n.CategoryEventSource(opr.richHintsAgentPrivate.fireEvent,self.variableStore,new f.VariableStoreSession("tabsWithCategory"),new f.VariableStoreSession("categoryCounters"),r),E.set(n.CategoryEventSource.EVENT_SOURCE_NAME,(()=>self.categoryEventSource)),self.manyTabsEventSource=new o.ManyTabsEventSource(self.performanceVariableCollector),E.set(o.ManyTabsEventSource.EVENT_SOURCE_NAME,(()=>self.manyTabsEventSource)),self.manyTabsFlowEventSource=new c.ManyTabsFlowEventSource(self.performanceVariableCollector),E.set(c.ManyTabsFlowEventSource.EVENT_SOURCE_NAME,(()=>self.manyTabsFlowEventSource)),m.VpnProEventSource.isAvailable()&&(self.vpnProEventSource=new m.VpnProEventSource(self.variableStore),E.set(m.VpnProEventSource.EVENT_SOURCE_NAME,(()=>self.vpnProEventSource))),self.clockEventSource=new u.ClockEventSource(y),E.set(u.ClockEventSource.EVENT_SOURCE_NAME,(()=>self.clockEventSource)),self.eventSourceFactory=new t.EventSourceFactoryImpl(E),self.eventRegistry=new e.EventRegistry(opr.richHintsAgentPrivate.provideEvents,self.eventSourceFactory,new f.VariableStoreSession(e.EventRegistry.ACTIVE_EVENTS)),await self.eventRegistry.registerEvents(r),S()})(),L()})()})();