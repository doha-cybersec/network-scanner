import{a_ as p,J as c,aP as n,L as e,X as o,bH as m,H as y,I as u,bJ as j,bA as P,F as v,bc as l,aY as F,bM as x,W as k,aA as C,G as B}from"./87a84c2cf7b4fda35bfcac0640ac264b.js";import{H as h}from"./7afd07c687eb49d39fd77bf78fe5ec25.js";import{M as K,A as G,a as S,_ as T,C as I}from"./8d303f94e93901152d11040290f309bc.js";import"./2736eeee414806ef50a46b2dbb19ce49.js";import{A as M}from"./b6f1195743a79bb5e047efc45e4ec1a8.js";import"./9c387392fdc5bbcf7335d803b777bc34.js";import"./93c5775672b5704373697ce70541c884.js";import"./730ecdbe744cb4a1446d00cb2b3bdbb1.js";import"./ccb02b363d45d8a770185e0773c7b631.js";import"./0811d7a4c39e6078b59d515398ad441d.js";import"./dcea5b6683ffc6e329bf502a60c8c88d.js";import"./b266269d4bacae7ca70e8b4e8fa98e86.js";import"./35a4e9e5b03ce9f6b934005df8651842.js";import"./24f2f391bb30a906fed56b8bff743fcb.js";import"./4d8530bbbd6abd9246d7a47fdf83b94b.js";import"./c63a988018a19bb069147e542d0100cc.js";import"./a1f937a8f2e3868bc093764a98119575.js";import"./2aa242c5d59db38b285a255688e851e9.js";import"./1b8ead64d23fbbfcf48d4652332960c3.js";import"./75b49a1b196983c05948f45215119584.js";import"./4cfe72e6823fa90866abd661c90d1a61.js";import"./c90f206377370d0637b0d1ca16e84cd3.js";import"./85e6709c31dd87565e34195aad62877a.js";import"./ff1c62831b919e645c41cf9dce23d935.js";import"./7efee2cfaa139c0e5c25b42987b40778.js";import"./3b2640d687b5327271e57663b50c251b.js";import"./54e18790c5fc36d3ab2a9cee8314e668.js";import"./aabeb46aa265f5891225553a7beae8bb.js";const V={extends:G,components:{ModelSelector:K},data:()=>({agent:{},botId:null,knowledge:[],personalization:"",isEditingName:!1,isCreateMode:!1,showUploadModal:!1,showFilesModal:!1,showCodeUploadModal:!1,showAddSkillModal:!1,userFiles:[],selectedFiles:[],fileSearchPage:1,hasMoreFiles:!0,isLoadingFiles:!1}),async mounted(){const t=new URLSearchParams(window.location.search);if(this.botId=t.get("id"),this.botId)return await this.loadBotData(this.botId);this.isCreateMode=!0,this.selected_agent={title:"New Agent",detail:"",icon:"fa-solid fa-robot",base_model_id:"GPT-4o Mini",skill_ids:[],status:"Draft",personalization:""},this.selected_agent&&this.changeStorage("selected_agent",this.selected_agent)},methods:{async loadBotData(t){try{const e=await S.get(t);e&&(this.agent=e,this.selected_agent={_listkey:e._listkey,title:e.title||"Untitled Bot",detail:e.detail||"",icon:e.icon||"fa-solid fa-robot",base_model_id:e.base_model_id||"GPT-4o",skill_ids:e.skill_ids||[],status:e.status||"Active",personalization:e.personalization||""},this.personalization=e.personalization||"",this.knowledge=e.files||[],this.changeStorage("selected_agent",this.selected_agent))}catch(e){console.error("Error loading bot data:",e)}},isSkillSelected(t){return!(!this.selected_agent||!this.selected_agent.skill_ids)&&this.selected_agent.skill_ids.includes(t)},toggleSkill(t){this.selected_agent&&(this.selected_agent.skill_ids||(this.selected_agent.skill_ids=[]),this.isSkillSelected(t)?this.selected_agent.skill_ids=this.selected_agent.skill_ids.filter((e=>e!==t)):this.selected_agent.skill_ids.push(t),this.changeStorage("selected_agent",this.selected_agent))},updatePersonalization(){this.selected_agent.personalization=this.personalization},async publishAgent(){try{if(!this.botId&&this.isCreateMode)return void(await this.createNewAgent());if(!this.agent||!this.botId)return;this.updatePersonalization();const t={_listkey:this.botId,title:this.selected_agent.title,detail:this.selected_agent.detail,base_model_id:this.selected_agent.base_model_id,skill_ids:this.selected_agent.skill_ids,personalization:this.selected_agent.personalization,icon:this.selected_agent.icon,share_type:"Public",file_ids:this.knowledge.map((t=>t._listkey))};console.log(t,"updateData");let e=await S.update(this.botId,t.title,t.detail,t.personalization,t.icon,t.base_model_id,t.share_type,t.skill_ids,t.file_ids);console.log(e),!h.notUndefined(e,"_listkey")&&this.botId&&(e._listkey=this.botId),h.notUndefined(e,"_listkey")&&(this.changeStorage("selected_agent",e),this.chat_agents[e._listkey]=e,this.changeStorage("chat_agents",this.chat_agents))}catch(t){console.error("Error publishing agent:",t),this.notify&&this.notify.error?this.notify.error(this.__("Failed to update agent. Please try again.")):alert("Failed to update agent. Please try again.")}},async createNewAgent(){try{this.updatePersonalization();const t=this.selected_agent,e=await S.set(t.title,t.base_model_id,t.detail,t.personalization,t.icon,t.share_type,t.skill_ids,t.file_ids);this.changeStorage("selected_agent",e),e&&e._listkey&&(window.location.href=`${this.constants.extension_main_dir}/agent_manage.html?id=${e._listkey}`)}catch(t){console.error("Error creating agent:",t),this.notify&&this.notify.error?this.notify.error(this.__("Failed to create agent. Please try again.")):alert("Failed to create agent. Please try again.")}},toggleNameEdit(){this.isEditingName=!this.isEditingName,this.isEditingName&&this.$nextTick((()=>{const t=document.getElementById("agent-name-input");t&&t.focus()}))},updateAgentName(t){this.selected_agent&&(this.selected_agent.title=t.target.value)},handleNameKeyPress(t){"Enter"===t.key&&this.toggleNameEdit()},toggleUploadModal(){this.showUploadModal=!this.showUploadModal},toggleFilesModal(){this.showFilesModal=!this.showFilesModal,this.showFilesModal&&0===this.userFiles.length&&this.loadUserFiles()},async loadUserFiles(t=!1){if(!this.isLoadingFiles){this.isLoadingFiles=!0;try{const e=await this.Files.search("",this.fileSearchPage);console.log(e,"files fetched"),e&&0!==e.length?(this.userFiles=t?[...this.userFiles,...e]:e,this.fileSearchPage++):this.hasMoreFiles=!1}catch(e){console.error("Error loading files:",e)}finally{this.isLoadingFiles=!1}}},loadMoreFiles(){this.hasMoreFiles&&!this.isLoadingFiles&&this.loadUserFiles(!0)},toggleFileSelection(t){console.log(t,"fileeeee");const e=this.selectedFiles.findIndex((e=>e._listkey===t._listkey));e>=0?this.selectedFiles.splice(e,1):this.selectedFiles.push(t)},isFileSelected(t){return console.log(t,"fileId1"),this.selectedFiles.some((e=>e._listkey===t))},saveSelectedFiles(){console.log(this.selectedFiles,"selectedFiles"),this.knowledge=[...new Set([...this.knowledge,...this.selectedFiles])],console.log(this.knowledge,"after update knowledge"),this.selectedFiles=[],this.toggleFilesModal()},handleFileUpload(t){const e=t.target.files[0];e&&(this.uploadFile(e),this.notify.success(this.__("We will process and will let you know when it is ready soon.")),this.toggleUploadModal())},async uploadFile(t){try{const e=await this.Files.set(t,null,null);e&&e.id}catch(e){console.error("Error uploading file:",e),this.notify&&this.notify.error&&this.notify.error(this.__("Failed to upload file. Please try again."))}},removeKnowledgeFile(t){this.knowledge=this.knowledge.filter((e=>e!==t.id))},getFileName:t=>(console.log(t,"for filenameeee"),t.title||t._listkey||t.id||"Untitled"),async uploadCode(){this.showCodeUploadModal=!this.showCodeUploadModal},handleCodeFileUpload(t){t.target.files[0]&&(this.showCodeUploadModal=!1)},toggleAddSkillModal(){this.showAddSkillModal=!this.showAddSkillModal},triggerFileSelection(){typeof this.$refs<"u"&&typeof this.$refs.imageFileInput<"u"&&this.$refs.imageFileInput.click()},async handleFile(t){const e=t.target.files[0];await this.processFile(e),t.target.value=null},async processFile(t){if(this.inputImageFile=t,!t||!t.type.match("image.*"))return void(this.errorMessage=this.__("Please upload a valid image file."));this.errorMessage="";const e=this.createPreviewImageURL(t);this.selected_agent.icon=e,this.uploadImageFile(t)},createPreviewImageURL:t=>URL.createObjectURL(t),uploadImageFile(t){this.ai_wait=this.isUploadingImage=!0,this.Uploader.upload(t,41943040,["image/jpeg","image/jpg","image/png","image/svg+xml"],(e=>{this.files||(this.files={});let a=h.SHA1(t.name+t.size).toString(),i=this.files[a];h.notUndefined(i,"url")&&(this.selected_agent.icon=h.notUndefined(i,"url"),console.log(i),this.changeStorage("selected_agent",this.selected_agent,!1)),this.files[a]=i,null!=document.querySelector("#imageFileInput")&&(document.querySelector("#imageFileInput").value=null),this.inputImageFile=null,this.ai_wait=this.isUploadingImage=!1}),{type:"agent_icon",key:h.notUndefined(this.selected_agent,"_listkey")}),setTimeout((()=>{this.inputImageFile=null,this.ai_wait=this.isUploadingImage=!1}),3e4)}}},H={id:"aitopia-container",class:"full-screen ait-block ait-overflow-y-hidden"},R={class:"ait-w-full ait-bg-[var(--ait-option-card-bg-color)] ait-border-b ait-border-neutral-200 dark:ait-border-neutral-700 ait-px-4 ait-py-2.5 ait-flex ait-items-center ait-justify-between"},q={class:"ait-flex ait-items-center ait-gap-4"},W={class:"ait-flex ait-items-center ait-gap-3"},Y=["title"],O=["disabled"],Z={class:"ait-flex ait-items-center ait-gap-1.5"},J=["placeholder"],X={class:"ait-text-base ait-font-medium"},Q={class:"ait-flex ait-items-center ait-gap-4"},$={key:0,class:"ait-text-sm ait-text-neutral-600 dark:ait-text-neutral-400"},tt={key:1,class:"ait-text-sm ait-text-neutral-600 dark:ait-text-neutral-400"},et={class:"ait-flex ait-items-center ait-gap-2"},it={class:"ait-text-sm ait-font-medium"},at={class:"ait-text-sm ait-font-medium"},st={class:"ait-w-full"},lt={class:"ait-container ait-align-top ait-container-md ait-w-full ait-max-w-full"},ot={class:"ait-grid lg:ait-grid-cols-12 ait-grid-cols-2 ait-gap-4 ait-h-[var(--ait-height-94)] ait-h-dvh lg:ait-h-[94vh]"},rt={class:"ait-col-span-4 ait-bg-[var(--ait-option-card-bg-color)] ait-rounded-lg ait-shadow-sm ait-p-4 ait-overflow-y-auto ait-flex ait-flex-col"},nt={class:"ait-flex ait-flex-col ait-gap-4 ait-h-full"},dt={class:"ait-flex ait-flex-col ait-gap-2 ait-h-full ait-flex-grow"},ct={class:"ait-flex ait-items-center ait-gap-2"},ut={class:"ait-text-lg ait-font-medium"},ht={class:"ait-text-sm ait-text-neutral-600 dark:ait-text-neutral-400"},gt=["placeholder"],pt={class:"ait-col-span-4 ait-bg-[var(--ait-option-card-bg-color)] ait-rounded-lg ait-shadow-sm ait-p-4 ait-overflow-y-auto"},ft={class:"ait-flex ait-flex-col ait-gap-2"},_t={class:"ait-flex ait-items-center ait-justify-between ait-mb-2"},mt={class:"ait-text-lg ait-font-medium"},bt={class:"ait-flex ait-items-center ait-gap-1.5 ait-rounded-md ait-px-2.5 ait-py-1 ait-cursor-pointer ait-transition-colors"},vt={class:"ait-flex ait-flex-col ait-gap-3.5"},xt={class:"ait-flex ait-items-center ait-gap-2 ait-cursor-pointer ait-py-1 ait-px-1.5 hover:ait-bg-neutral-100 dark:hover:ait-bg-neutral-800 ait-rounded-md ait-transition-colors ait-group"},kt={class:"ait-text-sm ait-font-medium"},yt={class:"ait-pl-5 ait-flex ait-flex-col ait-gap-3"},wt={class:"ait-text-xs ait-font-medium ait-text-neutral-500 dark:ait-text-neutral-400"},Ft={class:"ait-flex ait-items-start ait-gap-2.5 ait-p-1.5 ait-rounded-md hover:ait-bg-neutral-50 dark:hover:ait-bg-neutral-800 ait-transition-colors"},Ct={class:"ait-flex ait-flex-col"},St={class:"ait-flex ait-items-center ait-gap-1.5"},Mt={class:"ait-flex ait-items-center ait-justify-center ait-w-5 ait-h-5 ait-rounded-full ait-bg-purple-100 dark:ait-bg-purple-900"},Ut={class:"ait-text-sm"},At={class:"ait-pl-5 ait-flex ait-flex-col ait-gap-2 ait-mt-1"},jt={class:"ait-text-xs ait-font-medium ait-text-neutral-500 dark:ait-text-neutral-400"},Pt={class:"ait-flex ait-items-center ait-justify-between ait-group ait-px-1.5 ait-py-1 ait-rounded-md hover:ait-bg-neutral-50 dark:hover:ait-bg-neutral-800 ait-transition-colors"},It=["onClick"],zt={class:"ait-flex ait-items-center ait-justify-center ait-w-5 ait-h-5 ait-rounded"},Nt=["checked"],Et={class:"ait-text-sm ait-font-medium"},Lt={class:"ait-flex ait-items-center ait-gap-1 ait-opacity-0 group-hover:ait-opacity-100 ait-transition-opacity"},Dt={class:"ait-flex ait-justify-center ait-mt-2"},Bt={class:"ait-font-medium"},Kt={class:"ait-flex ait-flex-col ait-gap-3.5 ait-mt-2"},Gt={class:"ait-flex ait-items-center ait-gap-2 ait-cursor-pointer ait-py-1 ait-px-1.5 hover:ait-bg-neutral-100 dark:hover:ait-bg-neutral-800 ait-rounded-md ait-transition-colors ait-group"},Tt={class:"ait-text-sm ait-font-medium"},Vt={class:"ait-pl-5 ait-flex ait-flex-col ait-gap-3"},Ht={class:"ait-mt-4 ait-space-y-2"},Rt={key:0,class:"ait-text-center ait-text-sm ait-text-neutral-500 ait-py-3"},qt={class:"ait-flex ait-items-center ait-gap-2"},Wt={class:"ait-flex ait-items-center ait-justify-center ait-w-5 ait-h-5 ait-rounded ait-bg-blue-100 dark:ait-bg-blue-900"},Yt={class:"ait-text-sm ait-font-medium ait-truncate ait-max-w-[150px]"},Ot=["onClick"],Zt={class:"ait-flex ait-items-center ait-justify-center ait-mt-1"},Jt={class:"ait-font-medium"},Xt={class:"ait-font-medium"},Qt={class:"ait-col-span-4 ait-bg-[var(--ait-option-card-bg-color)] ait-rounded-lg ait-shadow-sm ait-p-4 ait-pt-0 ait-overflow-hidden"},$t={key:0,class:"ait-fixed ait-inset-0 ait-z-50 ait-flex ait-items-center ait-justify-center ait-bg-black ait-bg-opacity-50"},te={class:"ait-bg-[var(--ait-switchbar-bg-color)] ait-rounded-lg ait-shadow-lg ait-w-full ait-max-w-md ait-mx-4"},ee={class:"ait-flex ait-justify-between ait-items-center ait-p-5 ait-border-b ait-border-[var(--ait-border-color)]"},ie={class:"ait-text-xl ait-font-semibold"},ae={class:"ait-p-5 ait-space-y-6"},se={class:"ait-mb-2"},le={class:"ait-text-xs ait-text-neutral-500 ait-mb-4"},oe={class:"ait-cursor-pointer ait-text-white ait-px-6 ait-py-3 ait-rounded-lg ait-bg-[var(--ait-link-color)] hover:ait-opacity-80 ait-transition-colors"},re={class:"ait-text-xs ait-text-neutral-500 ait-mt-4"},ne={key:1,class:"ait-fixed ait-inset-0 ait-z-50 ait-flex ait-items-center ait-justify-center ait-bg-black ait-bg-opacity-50"},de={class:"ait-bg-[var(--ait-switchbar-bg-color)] ait-rounded-lg ait-shadow-lg ait-w-full ait-max-w-2xl ait-mx-4"},ce={class:"ait-flex ait-justify-between ait-items-center ait-p-5 ait-border-b ait-border-[var(--ait-border-color)]"},ue={class:"ait-text-xl ait-font-semibold"},he={class:"ait-p-5"},ge={class:"ait-h-96 ait-overflow-y-auto ait-border ait-border-neutral-200 dark:ait-border-neutral-700 ait-rounded-md ait-p-2"},pe={key:0,class:"ait-flex ait-items-center ait-justify-center ait-h-full"},fe={key:1,class:"ait-flex ait-flex-col ait-items-center ait-justify-center ait-h-full"},_e={class:"ait-text-neutral-500"},me={key:2,class:"ait-space-y-2"},be=["onClick"],ve={class:"ait-flex ait-shrink-0 ait-items-center ait-justify-center ait-h-10 ait-w-10 ait-rounded-md ait-bg-blue-100 dark:ait-bg-blue-800"},xe={class:"ait-flex ait-flex-col"},ke={class:"ait-text-sm ait-font-medium ait-truncate ait-max-w-[300px]"},ye={class:"ait-text-xs ait-text-neutral-500"},we=["onClick"],Fe={key:0,class:"ait-flex ait-justify-center ait-py-2"},Ce=["disabled"],Se={key:0},Me={key:1},Ue={class:"ait-flex ait-items-center ait-justify-end ait-gap-3 ait-p-5 ait-border-t ait-border-[var(--ait-border-color)]"},Ae=["disabled"],je={key:2,class:"ait-fixed ait-inset-0 ait-z-50 ait-flex ait-items-center ait-justify-center ait-bg-black ait-bg-opacity-50"},Pe={class:"ait-bg-[var(--ait-switchbar-bg-color)] ait-rounded-lg ait-shadow-lg ait-w-full ait-max-w-md ait-mx-4"},Ie={class:"ait-flex ait-justify-between ait-items-center ait-p-5 ait-border-b ait-border-[var(--ait-border-color)]"},ze={class:"ait-text-xl ait-font-semibold"},Ne={class:"ait-p-5 ait-space-y-6"},Ee={class:"ait-mb-2"},Le={class:"ait-text-xs ait-text-neutral-500 ait-mb-4"},De={class:"ait-cursor-pointer ait-text-white ait-px-6 ait-py-3 ait-rounded-lg ait-bg-[var(--ait-link-color)] hover:ait-opacity-80 ait-transition-colors"},Be={class:"ait-text-xs ait-text-neutral-500 ait-mt-4"},Ke={key:3,class:"ait-fixed ait-inset-0 ait-z-50 ait-flex ait-items-center ait-justify-center ait-bg-black ait-bg-opacity-50"},Ge={class:"ait-bg-[var(--ait-switchbar-bg-color)] ait-rounded-lg ait-shadow-lg ait-w-full ait-max-w-2xl ait-mx-4 ait-max-h-[90vh] ait-overflow-y-auto"},Te={class:"ait-flex ait-justify-between ait-items-center ait-p-5 ait-border-b ait-border-[var(--ait-border-color)]"},Ve={class:"ait-flex ait-items-center ait-gap-3"},He={class:"ait-text-[var(--ait-text-color-secondary)]"},Re={class:"ait-text-xl ait-font-semibold"},qe={class:"ait-flex ait-items-center ait-gap-3"},We={class:"ait-text-[var(--ait-text-color-secondary)] hover:ait-text-[var(--ait-text-color)]"},Ye={class:"ait-p-5 ait-space-y-6"},Oe={class:"ait-text-sm ait-font-medium ait-block ait-mb-2"},Ze=["placeholder"],Je={class:"ait-text-sm ait-font-medium ait-block ait-mb-2"},Xe=["placeholder"],Qe={class:"ait-text-sm ait-font-medium ait-block ait-mb-2"},$e={class:"ait-flex ait-items-center ait-justify-between ait-p-3 ait-rounded-lg ait-bg-neutral-50 dark:ait-bg-neutral-800 ait-border ait-border-neutral-200 dark:ait-border-neutral-700"},ti={class:"ait-flex ait-items-center ait-justify-between ait-mb-2"},ei={class:"ait-text-sm ait-font-medium ait-flex ait-items-center ait-gap-2"},ii={class:"ait-text-sm ait-text-[var(--ait-link-color)]"},ai={class:"ait-text-sm ait-font-medium ait-block ait-mb-2"},si={class:"ait-border ait-border-neutral-200 dark:ait-border-neutral-700 ait-rounded-lg ait-overflow-hidden"},li={class:"ait-grid ait-grid-cols-3 ait-bg-neutral-100 dark:ait-bg-neutral-700 ait-p-2 ait-font-medium ait-text-sm"},oi={class:"ait-flex ait-items-center ait-justify-end ait-gap-3 ait-p-5 ait-border-t ait-border-[var(--ait-border-color)]"};function ri(t,a,i,s,r,d){var g,h;const f=p("font-awesome-icon"),b=p("HoverPopover"),_=p("AgentLogo"),w=p("ModelSelector"),S=p("FullScreenChatSectionForAgents"),M=p("HistorySideBar"),U=p("MakeAReviewModal");return n(),c(v,null,[a[35]||(a[35]=e("link",{href:"https://fonts.googleapis.com/css2?family=Changa:wght@200..800&display=swap",rel:"stylesheet"},null,-1)),e("div",H,[e("div",R,[e("div",q,[o(b,{"popover-text":t.__("Go back")},{default:m((()=>[e("button",{class:"ait-p-1.5 ait-rounded-md hover:ait-bg-neutral-100 dark:hover:ait-bg-neutral-800 ait-transition-colors",onClick:a[0]||(a[0]=e=>t.navigateTo("agents"))},[o(f,{icon:"fa-solid fa-arrow-left",class:"ait-w-5 ait-h-5 ait-text-neutral-600 dark:ait-text-neutral-400"})])])),_:1},8,["popover-text"]),e("div",W,[e("div",{class:"ait-h-8 ait-w-8 ait-bg-neutral-800 ait-rounded-full ait-flex ait-items-center ait-justify-center ait-text-white ait-cursor-pointer",title:t.__("Upload icon"),onClick:a[2]||(a[2]=(...t)=>d.triggerFileSelection&&d.triggerFileSelection(...t))},[t.selected_agent?(n(),y(_,{key:0,agent:t.selected_agent},null,8,["agent"])):u("",!0),e("input",{type:"file",ref:"imageFileInput",id:"imageFileInput",onChange:a[1]||(a[1]=(...t)=>d.handleFile&&d.handleFile(...t)),disabled:t.isUploadingImage,style:{display:"none"},accept:"image/jpeg,image/png,image/svg+xml"},null,40,O)],8,Y),e("div",Z,[r.isEditingName?j((n(),c("input",{key:0,id:"agent-name-input",type:"text","onUpdate:modelValue":a[3]||(a[3]=e=>t.selected_agent.title=e),onBlur:a[4]||(a[4]=(...t)=>d.toggleNameEdit&&d.toggleNameEdit(...t)),onKeypress:a[5]||(a[5]=(...t)=>d.handleNameKeyPress&&d.handleNameKeyPress(...t)),class:"ait-text-base ait-font-medium ait-bg-transparent ait-border-b ait-border-[var(--ait-link-color)] ait-outline-none ait-w-full",placeholder:t.__("Enter agent name")},null,40,J)),[[P,t.selected_agent.title]]):(n(),c(v,{key:1},[e("h1",X,l((null==(g=t.selected_agent)?void 0:g.title)||"Example Agent"),1),o(b,{"popover-text":t.__("Edit agent name")},{default:m((()=>[o(f,{icon:"fa-solid fa-pen",class:"ait-w-3.5 ait-h-3.5 ait-text-neutral-500 hover:ait-text-[var(--ait-link-color)] ait-cursor-pointer",onClick:d.toggleNameEdit},null,8,["onClick"])])),_:1},8,["popover-text"])],64))])])]),e("div",Q,["Active"===(null==(h=t.selected_agent)?void 0:h.status)||r.isCreateMode?u("",!0):(n(),c("div",$,l(t.__("Changes are not published")),1)),r.isCreateMode?(n(),c("div",tt,l(t.__("Creating new agent")),1)):u("",!0),e("div",et,[e("button",{onClick:a[6]||(a[6]=(...t)=>d.uploadCode&&d.uploadCode(...t)),class:"ait-flex ait-items-center ait-gap-1.5 ait-px-3.5 ait-py-1.5 ait-rounded-md ait-bg-[var(--ait-link-color)] hover:ait-bg-opacity-90 ait-text-white ait-transition-colors"},[e("span",it,l(t.__("Upload Your Code")),1)]),e("button",{onClick:a[7]||(a[7]=(...t)=>d.publishAgent&&d.publishAgent(...t)),class:"ait-flex ait-items-center ait-gap-1.5 ait-px-3.5 ait-py-1.5 ait-rounded-md ait-bg-[var(--ait-link-color)] hover:ait-bg-opacity-90 ait-text-white ait-transition-colors"},[e("span",at,l(r.isCreateMode?t.__("Create Agent"):t.__("Publish")),1)])])])]),e("div",st,[e("div",lt,[e("div",ot,[e("div",rt,[e("div",nt,[e("div",dt,[e("div",ct,[e("h2",ut,l(t.__("Personalization")),1),o(b,{"popover-text":t.__("Configure how your assistant behaves and responds")},{default:m((()=>[o(f,{icon:"fa-solid fa-circle-info",class:"ait-w-3.5 ait-h-3.5 ait-text-neutral-400 ait-cursor-help"})])),_:1},8,["popover-text"])]),e("div",ht,l(t.__("Describe your bot's personality and behavior...")),1),j(e("textarea",{class:"ait-w-full ait-flex-grow ait-min-h-[200px] ait-p-3 ait-text-sm ait-rounded-md ait-bg-neutral-50 dark:ait-bg-neutral-800 ait-border ait-border-neutral-200 dark:ait-border-neutral-700 focus:ait-outline-none focus:ait-ring-1 focus:ait-ring-[var(--ait-link-color)]","onUpdate:modelValue":a[8]||(a[8]=t=>r.personalization=t),onInput:a[9]||(a[9]=(...t)=>d.updatePersonalization&&d.updatePersonalization(...t)),placeholder:t.__("Describe your bot's personality and behavior...")},null,40,gt),[[P,r.personalization]])])])]),e("div",pt,[e("div",ft,[e("div",_t,[e("h2",mt,l(t.__("Capabilities")),1),e("div",bt,[t.selected_agent?(n(),y(w,{key:0,modelValue:t.selected_agent.base_model_id,"onUpdate:modelValue":a[10]||(a[10]=e=>t.selected_agent.base_model_id=e),type:"text"},null,8,["modelValue"])):u("",!0)])]),e("div",vt,[e("div",xt,[o(f,{icon:"fa-solid fa-chevron-down",class:"ait-w-3 ait-h-3 ait-text-neutral-500 group-hover:ait-text-[var(--ait-link-color)]"}),e("h3",kt,l(t.__("Skills")),1)]),e("div",yt,[e("div",wt,l(t.__("Built-in skills")),1),e("div",Ft,[a[28]||(a[28]=e("input",{type:"checkbox",disabled:"",checked:"",class:"ait-mt-0.5 ait-accent-[var(--ait-link-color)] ait-h-4 ait-w-4"},null,-1)),e("div",Ct,[e("div",St,[e("span",Mt,[o(f,{icon:"fa-solid fa-brain",class:"ait-w-3 ait-h-3 ait-text-purple-600 dark:ait-text-purple-400"})]),e("span",Ut,l(t.__("General Intelligence")),1),o(b,{"popover-text":t.__("Basic reasoning capabilities for conversation and problem-solving")},{default:m((()=>[o(f,{icon:"fa-solid fa-circle-info",class:"ait-w-3.5 ait-h-3.5 ait-text-neutral-400 ait-cursor-help hover:ait-text-neutral-600 dark:hover:ait-text-neutral-300"})])),_:1},8,["popover-text"])])])])]),e("div",At,[e("div",jt,l(t.__("Custom skills")),1),(n(!0),c(v,null,F(this.skills,((a,i)=>(n(),c("div",{class:"ait-flex ait-flex-col ait-gap-2 ait-border-b ait-border-neutral-200 dark:ait-border-neutral-700 ait-pb-3.5",key:i},[e("div",Pt,[e("div",{class:"ait-flex ait-items-center ait-gap-2 ait-cursor-pointer",onClick:t=>d.toggleSkill(a.__listkey||i)},[e("span",zt,[e("input",{type:"checkbox",checked:d.isSkillSelected(a._listkey||i),class:"ait-mt-0.5 ait-accent-[var(--ait-link-color)] ait-h-4 ait-w-4"},null,8,Nt)]),e("span",Et,l(t.__(a.title)),1)],8,It),e("div",Lt,[o(b,{"popover-text":t.__("Delete this skill")},{default:m((()=>[o(f,{icon:"fa-solid fa-trash",class:"ait-w-3.5 ait-h-3.5 ait-text-neutral-400 ait-cursor-pointer hover:ait-text-red-500"})])),_:1},8,["popover-text"])])])])))),128)),e("div",Dt,[e("button",{onClick:a[11]||(a[11]=(...t)=>d.toggleAddSkillModal&&d.toggleAddSkillModal(...t)),class:"ait-flex ait-items-center ait-gap-1.5 ait-text-xs ait-text-[var(--ait-link-color)] ait-px-3.5 ait-py-2 ait-rounded-md ait-bg-neutral-100 dark:ait-bg-neutral-800 hover:ait-bg-neutral-200 dark:hover:ait-bg-neutral-700 ait-transition-colors ait-shadow-sm"},[o(f,{icon:"fa-solid fa-plus",class:"ait-w-3 ait-h-3"}),e("span",Bt,l(t.__("Add Skill")),1)])])])]),e("div",Kt,[e("div",Gt,[o(f,{icon:"fa-solid fa-chevron-down",class:"ait-w-3 ait-h-3 ait-text-neutral-500 group-hover:ait-text-[var(--ait-link-color)]"}),e("h3",Tt,l(t.__("Knowledge")),1),o(b,{"popover-text":t.__("Add documents and websites for your assistant to reference")},{default:m((()=>[o(f,{icon:"fa-solid fa-circle-info",class:"ait-w-3.5 ait-h-3.5 ait-text-neutral-400 ait-cursor-help hover:ait-text-neutral-600 dark:hover:ait-text-neutral-300"})])),_:1},8,["popover-text"])]),e("div",Vt,[e("div",Ht,[0===r.knowledge.length?(n(),c("div",Rt,l(t.__("No knowledge files added yet")),1)):u("",!0),(n(!0),c(v,null,F(r.knowledge,(t=>(n(),c("div",{key:t,class:"ait-flex ait-items-center ait-justify-between ait-p-2 ait-rounded-md ait-bg-neutral-50 dark:ait-bg-neutral-800 ait-border ait-border-neutral-200 dark:ait-border-neutral-700 ait-group"},[e("div",qt,[e("span",Wt,[o(f,{icon:"fa-solid fa-file",class:"ait-w-3 ait-h-3 ait-text-blue-600 dark:ait-text-blue-400"})]),e("span",Yt,l(d.getFileName(t)),1)]),e("button",{onClick:e=>d.removeKnowledgeFile(t),class:"ait-text-neutral-400 hover:ait-text-red-500 ait-transition-colors"},[o(f,{icon:"fa-solid fa-trash",class:"ait-w-3.5 ait-h-3.5"})],8,Ot)])))),128))]),e("div",Zt,[e("button",{onClick:a[12]||(a[12]=(...t)=>d.toggleUploadModal&&d.toggleUploadModal(...t)),class:"ait-flex ait-items-center ait-gap-1.5 ait-text-xs ait-text-[var(--ait-link-color)] ait-px-3.5 ait-py-2 ait-rounded-md ait-bg-neutral-100 dark:ait-bg-neutral-800 hover:ait-bg-neutral-200 dark:hover:ait-bg-neutral-700 ait-transition-colors ait-shadow-sm"},[o(f,{icon:"fa-solid fa-plus",class:"ait-w-3 ait-h-3"}),e("span",Jt,l(t.__("Add Knowledge")),1)]),e("button",{onClick:a[13]||(a[13]=(...t)=>d.toggleFilesModal&&d.toggleFilesModal(...t)),class:"ait-flex ait-items-center ait-gap-1.5 ait-text-xs ait-text-[var(--ait-link-color)] ait-px-3.5 ait-py-2 ait-ml-2 ait-rounded-md ait-bg-neutral-100 dark:ait-bg-neutral-800 hover:ait-bg-neutral-200 dark:hover:ait-bg-neutral-700 ait-transition-colors ait-shadow-sm"},[o(f,{icon:"fa-solid fa-folder-open",class:"ait-w-3 ait-h-3"}),e("span",Xt,l(t.__("Select From Your Files")),1)])])])])])]),e("div",Qt,[o(S,{selected_agent:t.selected_agent},null,8,["selected_agent"])]),this.show_history_sidebar?(n(),y(M,{key:0,id:"full-screen-history-sidebar"})):u("",!0)])]),r.showUploadModal?(n(),c("div",$t,[e("div",te,[e("div",ee,[e("h3",ie,l(t.__("Upload Knowledge File")),1),e("button",{onClick:a[14]||(a[14]=(...t)=>d.toggleUploadModal&&d.toggleUploadModal(...t)),class:"ait-text-[var(--ait-text-color-secondary)] hover:ait-text-[var(--ait-text-color)]"},[o(f,{icon:"fa-solid fa-times",class:"ait-w-5 ait-h-5"})])]),e("div",ae,[e("div",{class:"ait-border-2 ait-border-dashed ait-rounded-lg ait-p-10 ait-text-center ait-border-neutral-300 dark:ait-border-neutral-700",onDragover:a[16]||(a[16]=x((()=>{}),["prevent"])),onDrop:a[17]||(a[17]=x((t=>{d.uploadFile(t.dataTransfer.files[0]),d.toggleUploadModal()}),["prevent"]))},[o(f,{icon:"fa-solid fa-cloud-upload-alt",class:"ait-w-10 ait-h-10 ait-mb-4 ait-text-neutral-400 ait-mx-auto"}),e("p",se,l(t.__("Drag and drop your file here")),1),e("p",le,l(t.__("or")),1),e("label",oe,[k(l(t.__("Choose File"))+" ",1),e("input",{type:"file",accept:".pdf,.doc,.docx,.xlsx,.xls,.ppt,.pptx",class:"ait-hidden",onChange:a[15]||(a[15]=(...t)=>d.handleFileUpload&&d.handleFileUpload(...t))},null,32)]),e("p",re,l(t.__("Supported formats: PDF, Word, Excel, PowerPoint")),1)],32)])])])):u("",!0),r.showFilesModal?(n(),c("div",ne,[e("div",de,[e("div",ce,[e("h3",ue,l(t.__("Select Knowledge Files")),1),e("button",{onClick:a[18]||(a[18]=(...t)=>d.toggleFilesModal&&d.toggleFilesModal(...t)),class:"ait-text-[var(--ait-text-color-secondary)] hover:ait-text-[var(--ait-text-color)]"},[o(f,{icon:"fa-solid fa-times",class:"ait-w-5 ait-h-5"})])]),e("div",he,[e("div",ge,[r.isLoadingFiles&&0===r.userFiles.length?(n(),c("div",pe,a[29]||(a[29]=[e("div",{class:"ait-animate-spin ait-rounded-full ait-h-10 ait-w-10 ait-border-t-2 ait-border-b-2 ait-border-[var(--ait-link-color)]"},null,-1)]))):0===r.userFiles.length?(n(),c("div",fe,[o(f,{icon:"fa-solid fa-folder-open",class:"ait-w-16 ait-h-16 ait-text-neutral-300 ait-mb-4"}),e("p",_e,l(t.__("No files found")),1)])):(n(),c("div",me,[(n(!0),c(v,null,F(r.userFiles,(t=>(n(),c("div",{key:t.id,class:C(["ait-flex ait-items-center ait-justify-between ait-p-3 ait-rounded-md ait-cursor-pointer ait-transition-colors",d.isFileSelected(t._listkey)?"ait-bg-blue-50 dark:ait-bg-blue-900":"ait-bg-neutral-50 dark:ait-bg-neutral-800 hover:ait-bg-neutral-100 dark:hover:ait-bg-neutral-700"])},[e("div",{class:"ait-flex ait-items-center ait-gap-3 ait-flex-1",onClick:e=>d.toggleFileSelection(t)},[e("div",ve,[o(f,{icon:"fa-solid fa-file",class:"ait-w-5 ait-h-5 ait-text-blue-600 dark:ait-text-blue-300"})]),e("div",xe,[e("span",ke,l(t.title||t._listkey),1),e("span",ye,l(t.size?(t.size/1024).toFixed(1)+" KB":""),1)])],8,be),e("div",{class:"ait-flex-shrink-0",onClick:e=>d.toggleFileSelection(t)},[e("div",{class:C(["ait-w-6 ait-h-6 ait-rounded-full ait-border-2 ait-flex ait-items-center ait-justify-center",d.isFileSelected(t._listkey)?"ait-border-blue-500 ait-bg-blue-500":"ait-border-neutral-300 dark:ait-border-neutral-600"])},[d.isFileSelected(t._listkey)?(n(),y(f,{key:0,icon:"fa-solid fa-check",class:"ait-w-3 ait-h-3 ait-text-white"})):u("",!0)],2)],8,we)],2)))),128)),r.hasMoreFiles?(n(),c("div",Fe,[e("button",{onClick:a[19]||(a[19]=x(((...t)=>d.loadMoreFiles&&d.loadMoreFiles(...t)),["stop"])),class:"ait-px-4 ait-py-2 ait-text-sm ait-bg-neutral-100 dark:ait-bg-neutral-800 ait-rounded-md hover:ait-bg-neutral-200 dark:hover:ait-bg-neutral-700 ait-transition-colors",disabled:r.isLoadingFiles},[r.isLoadingFiles?(n(),c("span",Se,l(t.__("Loading...")),1)):(n(),c("span",Me,l(t.__("Load More")),1))],8,Ce)])):u("",!0)]))])]),e("div",Ue,[e("button",{onClick:a[20]||(a[20]=(...t)=>d.toggleFilesModal&&d.toggleFilesModal(...t)),class:"ait-bg-neutral-100 dark:ait-bg-neutral-800 ait-rounded-lg ait-px-6 ait-py-2 ait-text-sm hover:ait-bg-neutral-200 dark:hover:ait-bg-neutral-700 ait-transition-colors"},l(t.__("Cancel")),1),e("button",{onClick:a[21]||(a[21]=(...t)=>d.saveSelectedFiles&&d.saveSelectedFiles(...t)),type:"button",class:C(["ait-bg-[var(--ait-link-color)] ait-rounded-lg ait-px-6 ait-py-2 ait-text-sm ait-text-white hover:ait-opacity-90 ait-transition-opacity",0===r.selectedFiles.length?"ait-opacity-50 ait-cursor-not-allowed":""]),disabled:0===r.selectedFiles.length},l(t.__("Add Selected Files")),11,Ae)])])])):u("",!0),r.showCodeUploadModal?(n(),c("div",je,[e("div",Pe,[e("div",Ie,[e("h3",ze,l(t.__("Upload Your Agent Code")),1),e("button",{onClick:a[22]||(a[22]=(...t)=>d.uploadCode&&d.uploadCode(...t)),class:"ait-text-[var(--ait-text-color-secondary)] hover:ait-text-[var(--ait-text-color)]"},[o(f,{icon:"fa-solid fa-times",class:"ait-w-5 ait-h-5"})])]),e("div",Ne,[e("div",{class:"ait-border-2 ait-border-dashed ait-rounded-lg ait-p-10 ait-text-center ait-border-neutral-300 dark:ait-border-neutral-700",onDragover:a[24]||(a[24]=x((()=>{}),["prevent"])),onDrop:a[25]||(a[25]=x((t=>{r.showCodeUploadModal=!1}),["prevent"]))},[o(f,{icon:"fa-solid fa-code",class:"ait-w-10 ait-h-10 ait-mb-4 ait-text-neutral-400 ait-mx-auto"}),e("p",Ee,l(t.__("Drag and drop your code file here")),1),e("p",Le,l(t.__("or")),1),e("label",De,[k(l(t.__("Choose File"))+" ",1),e("input",{type:"file",accept:".js,.ts,.py,.html,.css,.php,.java,.c,.cpp,.json",class:"ait-hidden",onChange:a[23]||(a[23]=(...t)=>d.handleCodeFileUpload&&d.handleCodeFileUpload(...t))},null,32)]),e("p",Be,l(t.__("Supported formats: ZIP, TAR, GZ")),1)],32)])])])):u("",!0),r.showAddSkillModal?(n(),c("div",Ke,[e("div",Ge,[e("div",Te,[e("div",Ve,[e("button",He,[o(f,{icon:"fa-solid fa-arrow-left",class:"ait-w-5 ait-h-5"})]),e("h3",Re,l(t.__("Create Skill")),1)]),e("div",qe,[e("button",We,[o(f,{icon:"fa-solid fa-circle-question",class:"ait-w-5 ait-h-5"})]),e("button",{onClick:a[26]||(a[26]=(...t)=>d.toggleAddSkillModal&&d.toggleAddSkillModal(...t)),class:"ait-text-[var(--ait-text-color-secondary)] hover:ait-text-[var(--ait-text-color)]"},[o(f,{icon:"fa-solid fa-times",class:"ait-w-5 ait-h-5"})])])]),e("div",Ye,[e("div",null,[e("label",Oe,l(t.__("Skill name")),1),e("input",{type:"text",class:"ait-w-full ait-p-3 ait-text-sm ait-rounded-lg ait-bg-neutral-50 dark:ait-bg-neutral-800 ait-border ait-border-neutral-200 dark:ait-border-neutral-700 focus:ait-outline-none focus:ait-ring-1 focus:ait-ring-[var(--ait-link-color)]",placeholder:t.__("Skill name")},null,8,Ze)]),e("div",null,[e("label",Je,[k(l(t.__("Description"))+" ",1),a[30]||(a[30]=e("span",{class:"ait-text-red-500"},"*",-1))]),e("textarea",{class:"ait-w-full ait-p-3 ait-text-sm ait-rounded-lg ait-bg-neutral-50 dark:ait-bg-neutral-800 ait-border ait-border-neutral-200 dark:ait-border-neutral-700 focus:ait-outline-none focus:ait-ring-1 focus:ait-ring-[var(--ait-link-color)] ait-min-h-[100px]",placeholder:t.__("Describe the skill's functions and purpose")},null,8,Xe)]),e("div",null,[e("label",Qe,l(t.__("Auth")),1),e("div",$e,[a[31]||(a[31]=e("span",null,"None",-1)),o(f,{icon:"fa-solid fa-sliders-h",class:"ait-w-5 ait-h-5 ait-text-neutral-400"})])]),e("div",null,[e("div",ti,[e("label",ei,[k(l(t.__("Schema"))+" ",1),o(f,{icon:"fa-solid fa-circle-info",class:"ait-w-4 ait-h-4 ait-text-neutral-400"})]),e("button",ii,[k(l(t.__("Example"))+" ",1),o(f,{icon:"fa-solid fa-chevron-down",class:"ait-w-3 ait-h-3"})])]),a[32]||(a[32]=e("textarea",{class:"ait-w-full ait-bg-neutral-50 dark:ait-bg-neutral-800 ait-border ait-border-neutral-200 dark:ait-border-neutral-700 ait-rounded-lg ait-p-3 ait-font-mono ait-text-sm ait-whitespace-pre ait-overflow-auto ait-max-h-[200px]",rows:"6"},'            {\n            "openapi": "3.1.0",\n            "info": {\n            "title": "GetWeather",\n            "description": "Retrieve current weather information based on location name, postal code, coordinates, or IP\n            address",\n            "version": "v1.0.0"\n            },\n            "servers": [\n            {\n            "url": "https://a.gapier.com"\n            }\n            ],\n            "paths": {\n            "/api/v1/weather": {\n            "get": {\n            "operationId": "GetWeather",\n            "description": "GetWeather",\n            "deprecated": false,\n            "parameters": [\n            {\n            "name": "query",\n            "in": "query",\n            "required": true,\n            "description": "The query parameter. Can be a location name (e.g., \'New York\'), UK/Canada/US ZIP code (e.g.,\n            \'99501\'), coordinates (latitude/longitude, e.g., \'40.7831,-73.9712\').",\n            "schema": {\n            "type": "string"\n            }\n            }\n            ]\n            }\n            }\n            }\n            }',-1))]),e("div",null,[e("label",ai,l(t.__("Available Actions")),1),e("div",si,[e("div",li,[e("div",null,l(t.__("Name")),1),e("div",null,l(t.__("Method")),1),e("div",null,l(t.__("Path")),1)]),a[33]||(a[33]=e("div",{class:"ait-grid ait-grid-cols-3 ait-p-2 ait-text-sm ait-border-t ait-border-neutral-200 dark:ait-border-neutral-700"},[e("div",null,"GetWeather"),e("div",null,"GET"),e("div",null,"/api/v1/weather")],-1))])])]),e("div",oi,[e("button",{class:"ait-bg-[var(--ait-link-color)] ait-rounded-lg ait-px-6 ait-py-2 ait-text-sm ait-text-white hover:ait-opacity-90 ait-transition-opacity ait-ml-auto",onClick:a[27]||(a[27]=(...t)=>d.toggleAddSkillModal&&d.toggleAddSkillModal(...t))},l(t.__("Create")),1)])])])):u("",!0),a[34]||(a[34]=e("textarea",{id:"ait_clipboard",style:{position:"fixed",bottom:"-10px","z-index":"-1",height:"1px",width:"1px","font-size":"0.1px"}},null,-1)),o(U)])])],64)}const ni=T(V,[["render",ri]]);h.setSidebar(),h.addLoading();const w=B(ni,{type:"FullScreen"});if(Object.keys(I).forEach((t=>{w.component(t,I[t])})),window.aiVueApp=w,w.mount("#aitopia-full"),M){let t=Object.keys(M);t&&t.forEach((t=>{w.component(t,M[t])}))}let di=null==document?void 0:document.querySelector("#aitopia-sidebar");h.resizeBorder(di,440);