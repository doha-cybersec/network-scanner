import{a_ as f,J as c,aP as d,L as t,X as l,bH as b,bJ as U,bA as D,F as _,bc as o,I as u,bM as h,aA as m,H as w,aY as y,W as v,G as I}from"./87a84c2cf7b4fda35bfcac0640ac264b.js";import{H as M}from"./7afd07c687eb49d39fd77bf78fe5ec25.js";import{M as B,A as T,a as F,_ as K,C as j}from"./8d303f94e93901152d11040290f309bc.js";import"./2736eeee414806ef50a46b2dbb19ce49.js";import{A as C}from"./b6f1195743a79bb5e047efc45e4ec1a8.js";import"./9c387392fdc5bbcf7335d803b777bc34.js";import"./93c5775672b5704373697ce70541c884.js";import"./730ecdbe744cb4a1446d00cb2b3bdbb1.js";import"./ccb02b363d45d8a770185e0773c7b631.js";import"./0811d7a4c39e6078b59d515398ad441d.js";import"./dcea5b6683ffc6e329bf502a60c8c88d.js";import"./b266269d4bacae7ca70e8b4e8fa98e86.js";import"./35a4e9e5b03ce9f6b934005df8651842.js";import"./24f2f391bb30a906fed56b8bff743fcb.js";import"./4d8530bbbd6abd9246d7a47fdf83b94b.js";import"./c63a988018a19bb069147e542d0100cc.js";import"./a1f937a8f2e3868bc093764a98119575.js";import"./2aa242c5d59db38b285a255688e851e9.js";import"./1b8ead64d23fbbfcf48d4652332960c3.js";import"./75b49a1b196983c05948f45215119584.js";import"./4cfe72e6823fa90866abd661c90d1a61.js";import"./c90f206377370d0637b0d1ca16e84cd3.js";import"./85e6709c31dd87565e34195aad62877a.js";import"./ff1c62831b919e645c41cf9dce23d935.js";import"./7efee2cfaa139c0e5c25b42987b40778.js";import"./3b2640d687b5327271e57663b50c251b.js";import"./54e18790c5fc36d3ab2a9cee8314e668.js";import"./aabeb46aa265f5891225553a7beae8bb.js";const O={extends:T,components:{ModelSelector:B},data:()=>({agent:{},publishStatus:"private",isPublishDropdownOpen:!1,botId:null,knowledge:[],personalization:"",isEditingName:!1,isCreateMode:!1,showUploadModal:!1,showFilesModal:!1,showCodeUploadModal:!1,showAddSkillModal:!1,userFiles:[],selectedFiles:[],fileSearchPage:1,hasMoreFiles:!0,isLoadingFiles:!1}),async mounted(){const t=new URLSearchParams(window.location.search);this.botId=t.get("bot"),this.botId?await this.loadBotData(this.botId):(this.isCreateMode=!0,this.selected_agent={name:"New Agent",description:"",icon:"fa-solid fa-robot",model:"GPT-4o Mini",skill_ids:[],status:"Draft",personalization:""}),this.selected_agent,document.addEventListener("click",this.handleClickOutsidePublishDropdown)},beforeUnmount(){document.removeEventListener("click",this.handleClickOutsidePublishDropdown)},methods:{async loadBotData(t){try{const a=await F.get(t);a&&(this.agent=a,this.selected_agent=a,this.personalization=a.personalization||"",this.knowledge=a.files||[])}catch(a){console.error("Error loading bot data:",a)}},isSkillSelected(t){return!(!this.selected_agent||!this.selected_agent.skill_ids)&&this.selected_agent.skill_ids.includes(t)},toggleSkill(t){this.selected_agent&&(this.selected_agent.skill_ids||(this.selected_agent.skill_ids=[]),this.isSkillSelected(t)?this.selected_agent.skill_ids=this.selected_agent.skill_ids.filter((a=>a!==t)):this.selected_agent.skill_ids.push(t))},updatePersonalization(){this.selected_agent.personalization=this.personalization},async publishAgent(){try{if(!this.botId&&this.isCreateMode)return void(await this.createNewAgent());if(!this.agent||!this.botId)return;this.updatePersonalization();const t={_listkey:this.botId,title:this.selected_agent.title,detail:this.selected_agent.detail,base_model_id:this.selected_agent.base_model_id,skill_ids:this.selected_agent.skill_ids,personalization:this.selected_agent.personalization,icon:this.selected_agent.icon,share_type:this.publishStatus,file_ids:this.knowledge.map((t=>t._listkey))};console.log(t,"updateData"),await F.update(this.botId,t.title,t.detail,t.personalization,t.icon,t.base_model_id,t.share_type,t.skill_ids,t.file_ids),"Market Place"===this.publishStatus&&this.navigateTo("agent_publish_details",{id:this.botId})}catch(t){console.error("Error publishing agent:",t),this.notify&&this.notify.error?this.notify.error(this.__("Failed to update agent. Please try again.")):alert("Failed to update agent. Please try again.")}},async createNewAgent(){try{this.updatePersonalization();const t={title:this.selected_agent.title,base_model_id:this.selected_agent.base_model_id,detail:this.selected_agent.detail,personalization:this.selected_agent.personalization,icon:this.selected_agent.icon,share_type:"Market Place",skill_ids:this.selected_agent.skill_ids||[],file_ids:this.knowledge.map((t=>t._listkey))||[]},a=await F.set(t.title,t.base_model_id,t.detail,t.personalization,t.icon,t.share_type,t.skill_ids,t.file_ids);console.log(a,"result"),a&&a._listkey&&"Market Place"===this.publishStatus&&this.navigateTo("agent_publish_details",{id:a._listkey})}catch(t){console.error("Error creating agent:",t),this.notify&&this.notify.error?this.notify.error(this.__("Failed to create agent. Please try again.")):alert("Failed to create agent. Please try again.")}},toggleNameEdit(){this.isEditingName=!this.isEditingName,this.isEditingName&&this.$nextTick((()=>{const t=document.getElementById("agent-name-input");t&&t.focus()}))},updateAgentName(t){this.selected_agent&&(this.selected_agent.title=t.target.value)},handleNameKeyPress(t){"Enter"===t.key&&this.toggleNameEdit()},toggleUploadModal(){this.showUploadModal=!this.showUploadModal},toggleFilesModal(){this.showFilesModal=!this.showFilesModal,this.showFilesModal&&0===this.userFiles.length&&this.loadUserFiles()},async loadUserFiles(t=!1){if(!this.isLoadingFiles){this.isLoadingFiles=!0;try{const a=await this.Files.search("",this.fileSearchPage);console.log(a,"files fetched"),a&&0!==a.length?(this.userFiles=t?[...this.userFiles,...a]:a,this.fileSearchPage++):this.hasMoreFiles=!1}catch(a){console.error("Error loading files:",a)}finally{this.isLoadingFiles=!1}}},loadMoreFiles(){this.hasMoreFiles&&!this.isLoadingFiles&&this.loadUserFiles(!0)},toggleFileSelection(t){console.log(t,"fileeeee");const a=this.selectedFiles.findIndex((a=>a._listkey===t._listkey));a>=0?this.selectedFiles.splice(a,1):this.selectedFiles.push(t)},isFileSelected(t){return console.log(t,"fileId1"),this.selectedFiles.some((a=>a._listkey===t))},saveSelectedFiles(){console.log(this.selectedFiles,"selectedFiles"),this.knowledge=[...new Set([...this.knowledge,...this.selectedFiles])],console.log(this.knowledge,"after update knowledge"),this.selectedFiles=[],this.toggleFilesModal()},handleFileUpload(t){const a=t.target.files[0];a&&(this.uploadFile(a),this.notify.success(this.__("We will process and will let you know when it is ready soon.")),this.toggleUploadModal())},async uploadFile(t){try{const a=await this.Files.set(t,null,null);a&&a.id}catch(a){console.error("Error uploading file:",a),this.notify&&this.notify.error&&this.notify.error(this.__("Failed to upload file. Please try again."))}},removeKnowledgeFile(t){this.knowledge=this.knowledge.filter((a=>a!==t.id))},getFileName:t=>(console.log(t,"for filenameeee"),t.title||t._listkey||t.id||"Untitled"),async uploadCode(){this.showCodeUploadModal=!this.showCodeUploadModal},handleCodeFileUpload(t){t.target.files[0]&&(this.showCodeUploadModal=!1)},toggleAddSkillModal(){this.showAddSkillModal=!this.showAddSkillModal},togglePublishDropdown(t){t.stopPropagation(),this.isPublishDropdownOpen=!this.isPublishDropdownOpen},selectPublishStatus(t){this.publishStatus=t,this.isPublishDropdownOpen=!1},handleClickOutsidePublishDropdown(t){const a=this.$refs.publishDropdownContainer;a&&!a.contains(t.target)&&(this.isPublishDropdownOpen=!1)},publishToMarketplace(){this.publishStatus="Market Place",this.publishAgent()}}},G={id:"aitopia-container",class:"full-screen ait-block ait-overflow-y-hidden"},V={class:"ait-w-full ait-bg-[var(--ait-option-card-bg-color)] ait-border-b ait-border-neutral-200 dark:ait-border-neutral-700 ait-px-4 ait-py-2.5 ait-flex ait-items-center ait-justify-between"},H={class:"ait-flex ait-items-center ait-gap-4"},W={class:"ait-flex ait-items-center ait-gap-3"},q={class:"ait-h-8 ait-w-8 ait-bg-neutral-800 ait-rounded-full ait-flex ait-items-center ait-justify-center ait-text-white"},R={class:"ait-flex ait-items-center ait-gap-1.5"},Y=["placeholder"],Z={class:"ait-text-base ait-font-medium"},J={class:"ait-flex ait-items-center ait-gap-4"},X={key:0,class:"ait-text-sm ait-text-neutral-600 dark:ait-text-neutral-400"},Q={class:"ait-relative",ref:"publishDropdownContainer"},$={class:"ait-text-sm ait-font-medium"},tt={key:0,class:"ait-absolute ait-right-0 ait-mt-2 ait-w-40 ait-rounded-md ait-shadow-lg ait-bg-white dark:ait-bg-neutral-800 ait-ring-1 ait-ring-black ait-ring-opacity-5 ait-z-50"},it={class:"ait-py-1"},et={class:"ait-flex ait-items-center ait-gap-2"},at={class:"ait-text-sm ait-font-medium"},st={class:"ait-text-sm ait-font-medium"},ot={class:"ait-text-sm ait-font-medium"},lt={class:"ait-w-full"},rt={class:"ait-container ait-align-top ait-container-md ait-w-full ait-max-w-full"},nt={class:"ait-grid lg:ait-grid-cols-12 ait-grid-cols-2 ait-gap-4 ait-h-[var(--ait-height-94)] ait-h-dvh lg:ait-h-[94vh]"},dt={class:"ait-col-span-4 ait-bg-[var(--ait-option-card-bg-color)] ait-rounded-lg ait-shadow-sm ait-p-4 ait-overflow-y-auto ait-flex ait-flex-col"},ct={class:"ait-flex ait-flex-col ait-gap-4 ait-h-full"},ut={class:"ait-flex ait-flex-col ait-gap-2 ait-h-full ait-flex-grow"},ht={class:"ait-flex ait-items-center ait-gap-2"},pt={class:"ait-text-lg ait-font-medium"},gt={class:"ait-text-sm ait-text-neutral-600 dark:ait-text-neutral-400"},ft=["placeholder"],bt={class:"ait-col-span-4 ait-bg-[var(--ait-option-card-bg-color)] ait-rounded-lg ait-shadow-sm ait-p-4 ait-overflow-y-auto"},_t={class:"ait-flex ait-flex-col ait-gap-2"},mt={class:"ait-flex ait-items-center ait-justify-between ait-mb-2"},vt={class:"ait-text-lg ait-font-medium"},xt={class:"ait-flex ait-items-center ait-gap-1.5 ait-rounded-md ait-px-2.5 ait-py-1 ait-cursor-pointer ait-transition-colors"},kt={class:"ait-flex ait-flex-col ait-gap-3.5"},wt={class:"ait-flex ait-items-center ait-gap-2 ait-cursor-pointer ait-py-1 ait-px-1.5 hover:ait-bg-neutral-100 dark:hover:ait-bg-neutral-800 ait-rounded-md ait-transition-colors ait-group"},yt={class:"ait-text-sm ait-font-medium"},Ft={class:"ait-pl-5 ait-flex ait-flex-col ait-gap-3"},Ct={class:"ait-text-xs ait-font-medium ait-text-neutral-500 dark:ait-text-neutral-400"},Mt={class:"ait-flex ait-items-start ait-gap-2.5 ait-p-1.5 ait-rounded-md hover:ait-bg-neutral-50 dark:hover:ait-bg-neutral-800 ait-transition-colors"},St={class:"ait-flex ait-flex-col"},Pt={class:"ait-flex ait-items-center ait-gap-1.5"},At={class:"ait-flex ait-items-center ait-justify-center ait-w-5 ait-h-5 ait-rounded-full ait-bg-purple-100 dark:ait-bg-purple-900"},Ut={class:"ait-text-sm"},Dt={class:"ait-pl-5 ait-flex ait-flex-col ait-gap-2 ait-mt-1"},jt={class:"ait-text-xs ait-font-medium ait-text-neutral-500 dark:ait-text-neutral-400"},zt={class:"ait-flex ait-items-center ait-justify-between ait-group ait-px-1.5 ait-py-1 ait-rounded-md hover:ait-bg-neutral-50 dark:hover:ait-bg-neutral-800 ait-transition-colors"},Et=["onClick"],Nt={class:"ait-flex ait-items-center ait-justify-center ait-w-5 ait-h-5 ait-rounded"},Lt=["checked"],It={class:"ait-text-sm ait-font-medium"},Bt={class:"ait-flex ait-items-center ait-gap-1 ait-opacity-0 group-hover:ait-opacity-100 ait-transition-opacity"},Tt={class:"ait-flex ait-justify-center ait-mt-2"},Kt={class:"ait-font-medium"},Ot={class:"ait-flex ait-flex-col ait-gap-3.5 ait-mt-2"},Gt={class:"ait-flex ait-items-center ait-gap-2 ait-cursor-pointer ait-py-1 ait-px-1.5 hover:ait-bg-neutral-100 dark:hover:ait-bg-neutral-800 ait-rounded-md ait-transition-colors ait-group"},Vt={class:"ait-text-sm ait-font-medium"},Ht={class:"ait-pl-5 ait-flex ait-flex-col ait-gap-3"},Wt={class:"ait-mt-4 ait-space-y-2"},qt={key:0,class:"ait-text-center ait-text-sm ait-text-neutral-500 ait-py-3"},Rt={class:"ait-flex ait-items-center ait-gap-2"},Yt={class:"ait-flex ait-items-center ait-justify-center ait-w-5 ait-h-5 ait-rounded ait-bg-blue-100 dark:ait-bg-blue-900"},Zt={class:"ait-text-sm ait-font-medium ait-truncate ait-max-w-[150px]"},Jt=["onClick"],Xt={class:"ait-flex ait-items-center ait-justify-center ait-mt-1"},Qt={class:"ait-font-medium"},$t={class:"ait-font-medium"},ti={class:"ait-col-span-4 ait-bg-[var(--ait-option-card-bg-color)] ait-rounded-lg ait-shadow-sm ait-p-4 ait-pt-0 ait-overflow-hidden"},ii={key:0,class:"ait-fixed ait-inset-0 ait-z-50 ait-flex ait-items-center ait-justify-center ait-bg-black ait-bg-opacity-50"},ei={class:"ait-bg-[var(--ait-switchbar-bg-color)] ait-rounded-lg ait-shadow-lg ait-w-full ait-max-w-md ait-mx-4"},ai={class:"ait-flex ait-justify-between ait-items-center ait-p-5 ait-border-b ait-border-[var(--ait-border-color)]"},si={class:"ait-text-xl ait-font-semibold"},oi={class:"ait-p-5 ait-space-y-6"},li={class:"ait-mb-2"},ri={class:"ait-text-xs ait-text-neutral-500 ait-mb-4"},ni={class:"ait-cursor-pointer ait-text-white ait-px-6 ait-py-3 ait-rounded-lg ait-bg-[var(--ait-link-color)] hover:ait-opacity-80 ait-transition-colors"},di={class:"ait-text-xs ait-text-neutral-500 ait-mt-4"},ci={key:1,class:"ait-fixed ait-inset-0 ait-z-50 ait-flex ait-items-center ait-justify-center ait-bg-black ait-bg-opacity-50"},ui={class:"ait-bg-[var(--ait-switchbar-bg-color)] ait-rounded-lg ait-shadow-lg ait-w-full ait-max-w-2xl ait-mx-4"},hi={class:"ait-flex ait-justify-between ait-items-center ait-p-5 ait-border-b ait-border-[var(--ait-border-color)]"},pi={class:"ait-text-xl ait-font-semibold"},gi={class:"ait-p-5"},fi={class:"ait-h-96 ait-overflow-y-auto ait-border ait-border-neutral-200 dark:ait-border-neutral-700 ait-rounded-md ait-p-2"},bi={key:0,class:"ait-flex ait-items-center ait-justify-center ait-h-full"},_i={key:1,class:"ait-flex ait-flex-col ait-items-center ait-justify-center ait-h-full"},mi={class:"ait-text-neutral-500"},vi={key:2,class:"ait-space-y-2"},xi=["onClick"],ki={class:"ait-flex ait-shrink-0 ait-items-center ait-justify-center ait-h-10 ait-w-10 ait-rounded-md ait-bg-blue-100 dark:ait-bg-blue-800"},wi={class:"ait-flex ait-flex-col"},yi={class:"ait-text-sm ait-font-medium ait-truncate ait-max-w-[300px]"},Fi={class:"ait-text-xs ait-text-neutral-500"},Ci=["onClick"],Mi={key:0,class:"ait-flex ait-justify-center ait-py-2"},Si=["disabled"],Pi={key:0},Ai={key:1},Ui={class:"ait-flex ait-items-center ait-justify-end ait-gap-3 ait-p-5 ait-border-t ait-border-[var(--ait-border-color)]"},Di=["disabled"],ji={key:2,class:"ait-fixed ait-inset-0 ait-z-50 ait-flex ait-items-center ait-justify-center ait-bg-black ait-bg-opacity-50"},zi={class:"ait-bg-[var(--ait-switchbar-bg-color)] ait-rounded-lg ait-shadow-lg ait-w-full ait-max-w-md ait-mx-4"},Ei={class:"ait-flex ait-justify-between ait-items-center ait-p-5 ait-border-b ait-border-[var(--ait-border-color)]"},Ni={class:"ait-text-xl ait-font-semibold"},Li={class:"ait-p-5 ait-space-y-6"},Ii={class:"ait-mb-2"},Bi={class:"ait-text-xs ait-text-neutral-500 ait-mb-4"},Ti={class:"ait-cursor-pointer ait-text-white ait-px-6 ait-py-3 ait-rounded-lg ait-bg-[var(--ait-link-color)] hover:ait-opacity-80 ait-transition-colors"},Ki={class:"ait-text-xs ait-text-neutral-500 ait-mt-4"},Oi={key:3,class:"ait-fixed ait-inset-0 ait-z-50 ait-flex ait-items-center ait-justify-center ait-bg-black ait-bg-opacity-50"},Gi={class:"ait-bg-[var(--ait-switchbar-bg-color)] ait-rounded-lg ait-shadow-lg ait-w-full ait-max-w-2xl ait-mx-4 ait-max-h-[90vh] ait-overflow-y-auto"},Vi={class:"ait-flex ait-justify-between ait-items-center ait-p-5 ait-border-b ait-border-[var(--ait-border-color)]"},Hi={class:"ait-flex ait-items-center ait-gap-3"},Wi={class:"ait-text-[var(--ait-text-color-secondary)]"},qi={class:"ait-text-xl ait-font-semibold"},Ri={class:"ait-flex ait-items-center ait-gap-3"},Yi={class:"ait-text-[var(--ait-text-color-secondary)] hover:ait-text-[var(--ait-text-color)]"},Zi={class:"ait-p-5 ait-space-y-6"},Ji={class:"ait-text-sm ait-font-medium ait-block ait-mb-2"},Xi=["placeholder"],Qi={class:"ait-text-sm ait-font-medium ait-block ait-mb-2"},$i=["placeholder"],te={class:"ait-text-sm ait-font-medium ait-block ait-mb-2"},ie={class:"ait-flex ait-items-center ait-justify-between ait-p-3 ait-rounded-lg ait-bg-neutral-50 dark:ait-bg-neutral-800 ait-border ait-border-neutral-200 dark:ait-border-neutral-700"},ee={class:"ait-flex ait-items-center ait-justify-between ait-mb-2"},ae={class:"ait-text-sm ait-font-medium ait-flex ait-items-center ait-gap-2"},se={class:"ait-text-sm ait-text-[var(--ait-link-color)]"},oe={class:"ait-text-sm ait-font-medium ait-block ait-mb-2"},le={class:"ait-border ait-border-neutral-200 dark:ait-border-neutral-700 ait-rounded-lg ait-overflow-hidden"},re={class:"ait-grid ait-grid-cols-3 ait-bg-neutral-100 dark:ait-bg-neutral-700 ait-p-2 ait-font-medium ait-text-sm"},ne={class:"ait-flex ait-items-center ait-justify-end ait-gap-3 ait-p-5 ait-border-t ait-border-[var(--ait-border-color)]"};function de(a,i,e,s,r,n){var p,g,x;const k=f("font-awesome-icon"),F=f("HoverPopover"),C=f("ModelSelector"),M=f("FullScreenChatSectionForAgents"),S=f("HistorySideBar"),j=f("MakeAReviewModal");return d(),c(_,null,[i[37]||(i[37]=t("link",{href:"https://fonts.googleapis.com/css2?family=Changa:wght@200..800&display=swap",rel:"stylesheet"},null,-1)),t("div",G,[t("div",V,[t("div",H,[l(F,{"popover-text":a.__("Go back")},{default:b((()=>[t("button",{class:"ait-p-1.5 ait-rounded-md hover:ait-bg-neutral-100 dark:hover:ait-bg-neutral-800 ait-transition-colors",onClick:i[0]||(i[0]=t=>this.navigateTo("agents"))},[l(k,{icon:"fa-solid fa-arrow-left",class:"ait-w-5 ait-h-5 ait-text-neutral-600 dark:ait-text-neutral-400"})])])),_:1},8,["popover-text"]),t("div",W,[t("div",q,[l(k,{icon:(null==(p=a.selected_agent)?void 0:p.icon)||"fa-solid fa-robot",class:"ait-w-4 ait-h-4"},null,8,["icon"])]),t("div",R,[r.isEditingName?U((d(),c("input",{key:0,id:"agent-name-input",type:"text","onUpdate:modelValue":i[1]||(i[1]=t=>a.selected_agent.title=t),onBlur:i[2]||(i[2]=(...t)=>n.toggleNameEdit&&n.toggleNameEdit(...t)),onKeypress:i[3]||(i[3]=(...t)=>n.handleNameKeyPress&&n.handleNameKeyPress(...t)),class:"ait-text-base ait-font-medium ait-bg-transparent ait-border-b ait-border-[var(--ait-link-color)] ait-outline-none ait-w-full",placeholder:a.__("Enter agent name")},null,40,Y)),[[D,a.selected_agent.title]]):(d(),c(_,{key:1},[t("h1",Z,o((null==(g=a.selected_agent)?void 0:g.title)||"Example Agent"),1),l(F,{"popover-text":a.__("Edit agent name")},{default:b((()=>[l(k,{icon:"fa-solid fa-pen",class:"ait-w-3.5 ait-h-3.5 ait-text-neutral-500 hover:ait-text-[var(--ait-link-color)] ait-cursor-pointer",onClick:n.toggleNameEdit},null,8,["onClick"])])),_:1},8,["popover-text"])],64))])])]),t("div",J,["Active"===(null==(x=a.selected_agent)?void 0:x.status)||r.isCreateMode?u("",!0):(d(),c("div",X,o(a.__("Changes are not published")),1)),t("div",Q,[t("button",{onClick:i[4]||(i[4]=(...t)=>n.togglePublishDropdown&&n.togglePublishDropdown(...t)),class:"ait-flex ait-items-center ait-gap-2 ait-px-3 ait-py-1.5 ait-rounded-md ait-border ait-border-neutral-300 dark:ait-border-neutral-600 hover:ait-bg-neutral-100 dark:hover:ait-bg-neutral-700 ait-transition-colors"},[t("span",$,o(a.__(r.publishStatus.charAt(0).toUpperCase()+r.publishStatus.slice(1))),1),l(k,{icon:r.isPublishDropdownOpen?"fa-solid fa-chevron-up":"fa-solid fa-chevron-down",class:"ait-w-3 ait-h-3 ait-text-neutral-500"},null,8,["icon"])]),r.isPublishDropdownOpen?(d(),c("div",tt,[t("div",it,[t("a",{href:"#",class:m(["ait-block ait-px-4 ait-py-2 ait-text-sm hover:ait-bg-neutral-100 dark:hover:ait-bg-neutral-700","private"===r.publishStatus?"ait-font-semibold ait-text-[var(--ait-link-color)]":"ait-text-neutral-700 dark:ait-text-neutral-300"]),onClick:i[5]||(i[5]=h((t=>n.selectPublishStatus("private")),["prevent"]))},o(a.__("Private")),3),t("a",{href:"#",class:m(["ait-block ait-px-4 ait-py-2 ait-text-sm hover:ait-bg-neutral-100 dark:hover:ait-bg-neutral-700","public"===r.publishStatus?"ait-font-semibold ait-text-[var(--ait-link-color)]":"ait-text-neutral-700 dark:ait-text-neutral-300"]),onClick:i[6]||(i[6]=h((t=>n.selectPublishStatus("public")),["prevent"]))},o(a.__("Public")),3)])])):u("",!0)],512),t("div",et,[t("button",{onClick:i[7]||(i[7]=(...t)=>n.publishToMarketplace&&n.publishToMarketplace(...t)),class:"ait-flex ait-items-center ait-gap-1.5 ait-px-3.5 ait-py-1.5 ait-rounded-md ait-bg-[var(--ait-link-color)] hover:ait-bg-opacity-90 ait-text-white ait-transition-colors"},[t("span",at,o(a.__("Publish in Marketplace")),1)]),t("button",{onClick:i[8]||(i[8]=(...t)=>n.uploadCode&&n.uploadCode(...t)),class:"ait-flex ait-items-center ait-gap-1.5 ait-px-3.5 ait-py-1.5 ait-rounded-md ait-bg-[var(--ait-link-color)] hover:ait-bg-opacity-90 ait-text-white ait-transition-colors"},[t("span",st,o(a.__("Upload Your Code")),1)]),t("button",{onClick:i[9]||(i[9]=(...t)=>n.publishAgent&&n.publishAgent(...t)),class:"ait-flex ait-items-center ait-gap-1.5 ait-px-3.5 ait-py-1.5 ait-rounded-md ait-bg-[var(--ait-link-color)] hover:ait-bg-opacity-90 ait-text-white ait-transition-colors"},[t("span",ot,o(r.isCreateMode?a.__("Create Agent"):a.__("Publish")),1)])])])]),t("div",lt,[t("div",rt,[t("div",nt,[t("div",dt,[t("div",ct,[t("div",ut,[t("div",ht,[t("h2",pt,o(a.__("Personalization")),1),l(F,{"popover-text":a.__("Configure how your assistant behaves and responds")},{default:b((()=>[l(k,{icon:"fa-solid fa-circle-info",class:"ait-w-3.5 ait-h-3.5 ait-text-neutral-400 ait-cursor-help"})])),_:1},8,["popover-text"])]),t("div",gt,o(a.__("Describe your bot's personality and behavior...")),1),U(t("textarea",{class:"ait-w-full ait-flex-grow ait-min-h-[200px] ait-p-3 ait-text-sm ait-rounded-md ait-bg-neutral-50 dark:ait-bg-neutral-800 ait-border ait-border-neutral-200 dark:ait-border-neutral-700 focus:ait-outline-none focus:ait-ring-1 focus:ait-ring-[var(--ait-link-color)]","onUpdate:modelValue":i[10]||(i[10]=t=>r.personalization=t),onInput:i[11]||(i[11]=(...t)=>n.updatePersonalization&&n.updatePersonalization(...t)),placeholder:a.__("Describe your bot's personality and behavior...")},null,40,ft),[[D,r.personalization]])])])]),t("div",bt,[t("div",_t,[t("div",mt,[t("h2",vt,o(a.__("Capabilities")),1),t("div",xt,[a.selected_agent?(d(),w(C,{key:0,modelValue:a.selected_agent.base_model_id,"onUpdate:modelValue":i[12]||(i[12]=t=>a.selected_agent.base_model_id=t),type:"text"},null,8,["modelValue"])):u("",!0)])]),t("div",kt,[t("div",wt,[l(k,{icon:"fa-solid fa-chevron-down",class:"ait-w-3 ait-h-3 ait-text-neutral-500 group-hover:ait-text-[var(--ait-link-color)]"}),t("h3",yt,o(a.__("Skills")),1)]),t("div",Ft,[t("div",Ct,o(a.__("Built-in skills")),1),t("div",Mt,[i[30]||(i[30]=t("input",{type:"checkbox",disabled:"",checked:"",class:"ait-mt-0.5 ait-accent-[var(--ait-link-color)] ait-h-4 ait-w-4"},null,-1)),t("div",St,[t("div",Pt,[t("span",At,[l(k,{icon:"fa-solid fa-brain",class:"ait-w-3 ait-h-3 ait-text-purple-600 dark:ait-text-purple-400"})]),t("span",Ut,o(a.__("General Intelligence")),1),l(F,{"popover-text":a.__("Basic reasoning capabilities for conversation and problem-solving")},{default:b((()=>[l(k,{icon:"fa-solid fa-circle-info",class:"ait-w-3.5 ait-h-3.5 ait-text-neutral-400 ait-cursor-help hover:ait-text-neutral-600 dark:hover:ait-text-neutral-300"})])),_:1},8,["popover-text"])])])])]),t("div",Dt,[t("div",jt,o(a.__("Custom skills")),1),(d(!0),c(_,null,y(this.skills,((i,e)=>(d(),c("div",{class:"ait-flex ait-flex-col ait-gap-2 ait-border-b ait-border-neutral-200 dark:ait-border-neutral-700 ait-pb-3.5",key:e},[t("div",zt,[t("div",{class:"ait-flex ait-items-center ait-gap-2 ait-cursor-pointer",onClick:t=>n.toggleSkill(i.__listkey||e)},[t("span",Nt,[t("input",{type:"checkbox",checked:n.isSkillSelected(i._listkey||e),class:"ait-mt-0.5 ait-accent-[var(--ait-link-color)] ait-h-4 ait-w-4"},null,8,Lt)]),t("span",It,o(a.__(i.title)),1)],8,Et),t("div",Bt,[l(F,{"popover-text":a.__("Delete this skill")},{default:b((()=>[l(k,{icon:"fa-solid fa-trash",class:"ait-w-3.5 ait-h-3.5 ait-text-neutral-400 ait-cursor-pointer hover:ait-text-red-500"})])),_:1},8,["popover-text"])])])])))),128)),t("div",Tt,[t("button",{onClick:i[13]||(i[13]=(...t)=>n.toggleAddSkillModal&&n.toggleAddSkillModal(...t)),class:"ait-flex ait-items-center ait-gap-1.5 ait-text-xs ait-text-[var(--ait-link-color)] ait-px-3.5 ait-py-2 ait-rounded-md ait-bg-neutral-100 dark:ait-bg-neutral-800 hover:ait-bg-neutral-200 dark:hover:ait-bg-neutral-700 ait-transition-colors ait-shadow-sm"},[l(k,{icon:"fa-solid fa-plus",class:"ait-w-3 ait-h-3"}),t("span",Kt,o(a.__("Add Skill")),1)])])])]),t("div",Ot,[t("div",Gt,[l(k,{icon:"fa-solid fa-chevron-down",class:"ait-w-3 ait-h-3 ait-text-neutral-500 group-hover:ait-text-[var(--ait-link-color)]"}),t("h3",Vt,o(a.__("Knowledge")),1),l(F,{"popover-text":a.__("Add documents and websites for your assistant to reference")},{default:b((()=>[l(k,{icon:"fa-solid fa-circle-info",class:"ait-w-3.5 ait-h-3.5 ait-text-neutral-400 ait-cursor-help hover:ait-text-neutral-600 dark:hover:ait-text-neutral-300"})])),_:1},8,["popover-text"])]),t("div",Ht,[t("div",Wt,[0===r.knowledge.length?(d(),c("div",qt,o(a.__("No knowledge files added yet")),1)):u("",!0),(d(!0),c(_,null,y(r.knowledge,(a=>(d(),c("div",{key:a,class:"ait-flex ait-items-center ait-justify-between ait-p-2 ait-rounded-md ait-bg-neutral-50 dark:ait-bg-neutral-800 ait-border ait-border-neutral-200 dark:ait-border-neutral-700 ait-group"},[t("div",Rt,[t("span",Yt,[l(k,{icon:"fa-solid fa-file",class:"ait-w-3 ait-h-3 ait-text-blue-600 dark:ait-text-blue-400"})]),t("span",Zt,o(n.getFileName(a)),1)]),t("button",{onClick:t=>n.removeKnowledgeFile(a),class:"ait-text-neutral-400 hover:ait-text-red-500 ait-transition-colors"},[l(k,{icon:"fa-solid fa-trash",class:"ait-w-3.5 ait-h-3.5"})],8,Jt)])))),128))]),t("div",Xt,[t("button",{onClick:i[14]||(i[14]=(...t)=>n.toggleUploadModal&&n.toggleUploadModal(...t)),class:"ait-flex ait-items-center ait-gap-1.5 ait-text-xs ait-text-[var(--ait-link-color)] ait-px-3.5 ait-py-2 ait-rounded-md ait-bg-neutral-100 dark:ait-bg-neutral-800 hover:ait-bg-neutral-200 dark:hover:ait-bg-neutral-700 ait-transition-colors ait-shadow-sm"},[l(k,{icon:"fa-solid fa-plus",class:"ait-w-3 ait-h-3"}),t("span",Qt,o(a.__("Add Knowledge")),1)]),t("button",{onClick:i[15]||(i[15]=(...t)=>n.toggleFilesModal&&n.toggleFilesModal(...t)),class:"ait-flex ait-items-center ait-gap-1.5 ait-text-xs ait-text-[var(--ait-link-color)] ait-px-3.5 ait-py-2 ait-ml-2 ait-rounded-md ait-bg-neutral-100 dark:ait-bg-neutral-800 hover:ait-bg-neutral-200 dark:hover:ait-bg-neutral-700 ait-transition-colors ait-shadow-sm"},[l(k,{icon:"fa-solid fa-folder-open",class:"ait-w-3 ait-h-3"}),t("span",$t,o(a.__("Select From Your Files")),1)])])])])])]),t("div",ti,[l(M,{selected_agent:a.selected_agent},null,8,["selected_agent"])]),this.show_history_sidebar?(d(),w(S,{key:0,id:"full-screen-history-sidebar"})):u("",!0)])]),r.showUploadModal?(d(),c("div",ii,[t("div",ei,[t("div",ai,[t("h3",si,o(a.__("Upload Knowledge File")),1),t("button",{onClick:i[16]||(i[16]=(...t)=>n.toggleUploadModal&&n.toggleUploadModal(...t)),class:"ait-text-[var(--ait-text-color-secondary)] hover:ait-text-[var(--ait-text-color)]"},[l(k,{icon:"fa-solid fa-times",class:"ait-w-5 ait-h-5"})])]),t("div",oi,[t("div",{class:"ait-border-2 ait-border-dashed ait-rounded-lg ait-p-10 ait-text-center ait-border-neutral-300 dark:ait-border-neutral-700",onDragover:i[18]||(i[18]=h((()=>{}),["prevent"])),onDrop:i[19]||(i[19]=h((t=>{n.uploadFile(t.dataTransfer.files[0]),n.toggleUploadModal()}),["prevent"]))},[l(k,{icon:"fa-solid fa-cloud-upload-alt",class:"ait-w-10 ait-h-10 ait-mb-4 ait-text-neutral-400 ait-mx-auto"}),t("p",li,o(a.__("Drag and drop your file here")),1),t("p",ri,o(a.__("or")),1),t("label",ni,[v(o(a.__("Choose File"))+" ",1),t("input",{type:"file",accept:".pdf,.doc,.docx,.xlsx,.xls,.ppt,.pptx",class:"ait-hidden",onChange:i[17]||(i[17]=(...t)=>n.handleFileUpload&&n.handleFileUpload(...t))},null,32)]),t("p",di,o(a.__("Supported formats: PDF, Word, Excel, PowerPoint")),1)],32)])])])):u("",!0),r.showFilesModal?(d(),c("div",ci,[t("div",ui,[t("div",hi,[t("h3",pi,o(a.__("Select Knowledge Files")),1),t("button",{onClick:i[20]||(i[20]=(...t)=>n.toggleFilesModal&&n.toggleFilesModal(...t)),class:"ait-text-[var(--ait-text-color-secondary)] hover:ait-text-[var(--ait-text-color)]"},[l(k,{icon:"fa-solid fa-times",class:"ait-w-5 ait-h-5"})])]),t("div",gi,[t("div",fi,[r.isLoadingFiles&&0===r.userFiles.length?(d(),c("div",bi,i[31]||(i[31]=[t("div",{class:"ait-animate-spin ait-rounded-full ait-h-10 ait-w-10 ait-border-t-2 ait-border-b-2 ait-border-[var(--ait-link-color)]"},null,-1)]))):0===r.userFiles.length?(d(),c("div",_i,[l(k,{icon:"fa-solid fa-folder-open",class:"ait-w-16 ait-h-16 ait-text-neutral-300 ait-mb-4"}),t("p",mi,o(a.__("No files found")),1)])):(d(),c("div",vi,[(d(!0),c(_,null,y(r.userFiles,(a=>(d(),c("div",{key:a.id,class:m(["ait-flex ait-items-center ait-justify-between ait-p-3 ait-rounded-md ait-cursor-pointer ait-transition-colors",n.isFileSelected(a._listkey)?"ait-bg-blue-50 dark:ait-bg-blue-900":"ait-bg-neutral-50 dark:ait-bg-neutral-800 hover:ait-bg-neutral-100 dark:hover:ait-bg-neutral-700"])},[t("div",{class:"ait-flex ait-items-center ait-gap-3 ait-flex-1",onClick:t=>n.toggleFileSelection(a)},[t("div",ki,[l(k,{icon:"fa-solid fa-file",class:"ait-w-5 ait-h-5 ait-text-blue-600 dark:ait-text-blue-300"})]),t("div",wi,[t("span",yi,o(a.title||a._listkey),1),t("span",Fi,o(a.size?(a.size/1024).toFixed(1)+" KB":""),1)])],8,xi),t("div",{class:"ait-flex-shrink-0",onClick:t=>n.toggleFileSelection(a)},[t("div",{class:m(["ait-w-6 ait-h-6 ait-rounded-full ait-border-2 ait-flex ait-items-center ait-justify-center",n.isFileSelected(a._listkey)?"ait-border-blue-500 ait-bg-blue-500":"ait-border-neutral-300 dark:ait-border-neutral-600"])},[n.isFileSelected(a._listkey)?(d(),w(k,{key:0,icon:"fa-solid fa-check",class:"ait-w-3 ait-h-3 ait-text-white"})):u("",!0)],2)],8,Ci)],2)))),128)),r.hasMoreFiles?(d(),c("div",Mi,[t("button",{onClick:i[21]||(i[21]=h(((...t)=>n.loadMoreFiles&&n.loadMoreFiles(...t)),["stop"])),class:"ait-px-4 ait-py-2 ait-text-sm ait-bg-neutral-100 dark:ait-bg-neutral-800 ait-rounded-md hover:ait-bg-neutral-200 dark:hover:ait-bg-neutral-700 ait-transition-colors",disabled:r.isLoadingFiles},[r.isLoadingFiles?(d(),c("span",Pi,o(a.__("Loading...")),1)):(d(),c("span",Ai,o(a.__("Load More")),1))],8,Si)])):u("",!0)]))])]),t("div",Ui,[t("button",{onClick:i[22]||(i[22]=(...t)=>n.toggleFilesModal&&n.toggleFilesModal(...t)),class:"ait-bg-neutral-100 dark:ait-bg-neutral-800 ait-rounded-lg ait-px-6 ait-py-2 ait-text-sm hover:ait-bg-neutral-200 dark:hover:ait-bg-neutral-700 ait-transition-colors"},o(a.__("Cancel")),1),t("button",{onClick:i[23]||(i[23]=(...t)=>n.saveSelectedFiles&&n.saveSelectedFiles(...t)),type:"button",class:m(["ait-bg-[var(--ait-link-color)] ait-rounded-lg ait-px-6 ait-py-2 ait-text-sm ait-text-white hover:ait-opacity-90 ait-transition-opacity",0===r.selectedFiles.length?"ait-opacity-50 ait-cursor-not-allowed":""]),disabled:0===r.selectedFiles.length},o(a.__("Add Selected Files")),11,Di)])])])):u("",!0),r.showCodeUploadModal?(d(),c("div",ji,[t("div",zi,[t("div",Ei,[t("h3",Ni,o(a.__("Upload Your Agent Code")),1),t("button",{onClick:i[24]||(i[24]=(...t)=>n.uploadCode&&n.uploadCode(...t)),class:"ait-text-[var(--ait-text-color-secondary)] hover:ait-text-[var(--ait-text-color)]"},[l(k,{icon:"fa-solid fa-times",class:"ait-w-5 ait-h-5"})])]),t("div",Li,[t("div",{class:"ait-border-2 ait-border-dashed ait-rounded-lg ait-p-10 ait-text-center ait-border-neutral-300 dark:ait-border-neutral-700",onDragover:i[26]||(i[26]=h((()=>{}),["prevent"])),onDrop:i[27]||(i[27]=h((t=>{r.showCodeUploadModal=!1}),["prevent"]))},[l(k,{icon:"fa-solid fa-code",class:"ait-w-10 ait-h-10 ait-mb-4 ait-text-neutral-400 ait-mx-auto"}),t("p",Ii,o(a.__("Drag and drop your code file here")),1),t("p",Bi,o(a.__("or")),1),t("label",Ti,[v(o(a.__("Choose File"))+" ",1),t("input",{type:"file",accept:".js,.ts,.py,.html,.css,.php,.java,.c,.cpp,.json",class:"ait-hidden",onChange:i[25]||(i[25]=(...t)=>n.handleCodeFileUpload&&n.handleCodeFileUpload(...t))},null,32)]),t("p",Ki,o(a.__("Supported formats: ZIP, TAR, GZ")),1)],32)])])])):u("",!0),r.showAddSkillModal?(d(),c("div",Oi,[t("div",Gi,[t("div",Vi,[t("div",Hi,[t("button",Wi,[l(k,{icon:"fa-solid fa-arrow-left",class:"ait-w-5 ait-h-5"})]),t("h3",qi,o(a.__("Create Skill")),1)]),t("div",Ri,[t("button",Yi,[l(k,{icon:"fa-solid fa-circle-question",class:"ait-w-5 ait-h-5"})]),t("button",{onClick:i[28]||(i[28]=(...t)=>n.toggleAddSkillModal&&n.toggleAddSkillModal(...t)),class:"ait-text-[var(--ait-text-color-secondary)] hover:ait-text-[var(--ait-text-color)]"},[l(k,{icon:"fa-solid fa-times",class:"ait-w-5 ait-h-5"})])])]),t("div",Zi,[t("div",null,[t("label",Ji,o(a.__("Skill name")),1),t("input",{type:"text",class:"ait-w-full ait-p-3 ait-text-sm ait-rounded-lg ait-bg-neutral-50 dark:ait-bg-neutral-800 ait-border ait-border-neutral-200 dark:ait-border-neutral-700 focus:ait-outline-none focus:ait-ring-1 focus:ait-ring-[var(--ait-link-color)]",placeholder:a.__("Skill name")},null,8,Xi)]),t("div",null,[t("label",Qi,[v(o(a.__("Description"))+" ",1),i[32]||(i[32]=t("span",{class:"ait-text-red-500"},"*",-1))]),t("textarea",{class:"ait-w-full ait-p-3 ait-text-sm ait-rounded-lg ait-bg-neutral-50 dark:ait-bg-neutral-800 ait-border ait-border-neutral-200 dark:ait-border-neutral-700 focus:ait-outline-none focus:ait-ring-1 focus:ait-ring-[var(--ait-link-color)] ait-min-h-[100px]",placeholder:a.__("Describe the skill's functions and purpose")},null,8,$i)]),t("div",null,[t("label",te,o(a.__("Auth")),1),t("div",ie,[i[33]||(i[33]=t("span",null,"None",-1)),l(k,{icon:"fa-solid fa-sliders-h",class:"ait-w-5 ait-h-5 ait-text-neutral-400"})])]),t("div",null,[t("div",ee,[t("label",ae,[v(o(a.__("Schema"))+" ",1),l(k,{icon:"fa-solid fa-circle-info",class:"ait-w-4 ait-h-4 ait-text-neutral-400"})]),t("button",se,[v(o(a.__("Example"))+" ",1),l(k,{icon:"fa-solid fa-chevron-down",class:"ait-w-3 ait-h-3"})])]),i[34]||(i[34]=t("textarea",{class:"ait-w-full ait-bg-neutral-50 dark:ait-bg-neutral-800 ait-border ait-border-neutral-200 dark:ait-border-neutral-700 ait-rounded-lg ait-p-3 ait-font-mono ait-text-sm ait-whitespace-pre ait-overflow-auto ait-max-h-[200px]",rows:"6"},'            {\n            "openapi": "3.1.0",\n            "info": {\n            "title": "GetWeather",\n            "description": "Retrieve current weather information based on location name, postal code, coordinates, or IP\n            address",\n            "version": "v1.0.0"\n            },\n            "servers": [\n            {\n            "url": "https://a.gapier.com"\n            }\n            ],\n            "paths": {\n            "/api/v1/weather": {\n            "get": {\n            "operationId": "GetWeather",\n            "description": "GetWeather",\n            "deprecated": false,\n            "parameters": [\n            {\n            "name": "query",\n            "in": "query",\n            "required": true,\n            "description": "The query parameter. Can be a location name (e.g., \'New York\'), UK/Canada/US ZIP code (e.g.,\n            \'99501\'), coordinates (latitude/longitude, e.g., \'40.7831,-73.9712\').",\n            "schema": {\n            "type": "string"\n            }\n            }\n            ]\n            }\n            }\n            }\n            }',-1))]),t("div",null,[t("label",oe,o(a.__("Available Actions")),1),t("div",le,[t("div",re,[t("div",null,o(a.__("Name")),1),t("div",null,o(a.__("Method")),1),t("div",null,o(a.__("Path")),1)]),i[35]||(i[35]=t("div",{class:"ait-grid ait-grid-cols-3 ait-p-2 ait-text-sm ait-border-t ait-border-neutral-200 dark:ait-border-neutral-700"},[t("div",null,"GetWeather"),t("div",null,"GET"),t("div",null,"/api/v1/weather")],-1))])])]),t("div",ne,[t("button",{class:"ait-bg-[var(--ait-link-color)] ait-rounded-lg ait-px-6 ait-py-2 ait-text-sm ait-text-white hover:ait-opacity-90 ait-transition-opacity ait-ml-auto",onClick:i[29]||(i[29]=(...t)=>n.toggleAddSkillModal&&n.toggleAddSkillModal(...t))},o(a.__("Create")),1)])])])):u("",!0),i[36]||(i[36]=t("textarea",{id:"ait_clipboard",style:{position:"fixed",bottom:"-10px","z-index":"-1",height:"1px",width:"1px","font-size":"0.1px"}},null,-1)),l(j)])])],64)}const ce=K(O,[["render",de]]);M.setSidebar(),M.addLoading();const k=I(ce,{type:"FullScreen"});if(Object.keys(j).forEach((t=>{k.component(t,j[t])})),window.aiVueApp=k,k.mount("#aitopia-full"),C){let t=Object.keys(C);t&&t.forEach((t=>{k.component(t,C[t])}))}let ue=null==document?void 0:document.querySelector("#aitopia-sidebar");M.resizeBorder(ue,440);