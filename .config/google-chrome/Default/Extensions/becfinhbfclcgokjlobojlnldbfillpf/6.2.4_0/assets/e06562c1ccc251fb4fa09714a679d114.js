function X(t){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function N2(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}var P2=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],g2=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function q2(t,r,n,a,e){if("string"==typeof t&&(t=document.getElementById(t)),!t||"object"!==X(t)||!("getContext"in t))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var o=t.getContext("2d");try{return o.getImageData(r,n,a,e)}catch(f){throw new Error("unable to access image data: "+f)}}function H2(t,r,n,a,e,o){if(!(isNaN(o)||o<1)){o|=0;var f=q2(t,r,n,a,e);f=z2(f,r,n,a,e,o),t.getContext("2d").putImageData(f,r,n)}}function z2(t,r,n,a,e,o){for(var f=t.data,i=2*o+1,c=a-1,g=e-1,s=o+1,u=s*(s+1)/2,v=new F2,l=v,b,y=1;y<i;y++)l=l.next=new F2,y===s&&(b=l);l.next=v;for(var x=null,p=null,m=0,h=0,w=P2[o],d=g2[o],C=0;C<e;C++){l=v;for(var E=f[h],S=f[h+1],N=f[h+2],F=f[h+3],I=0;I<s;I++)l.r=E,l.g=S,l.b=N,l.a=F,l=l.next;for(var X=0,q=0,z=0,B=0,D=s*E,H=s*S,P=s*N,T=s*F,j=u*E,A=u*S,G=u*N,R=u*F,k=1;k<s;k++){var J=h+((c<k?c:k)<<2),K=f[J],L=f[J+1],M=f[J+2],O=f[J+3],Q=s-k;j+=(l.r=K)*Q,A+=(l.g=L)*Q,G+=(l.b=M)*Q,R+=(l.a=O)*Q,X+=K,q+=L,z+=M,B+=O,l=l.next}x=v,p=b;for(var U=0;U<a;U++){var V=R*w>>>d;if(f[h+3]=V,0!==V){var W=255/V;f[h]=(j*w>>>d)*W,f[h+1]=(A*w>>>d)*W,f[h+2]=(G*w>>>d)*W}else f[h]=f[h+1]=f[h+2]=0;j-=D,A-=H,G-=P,R-=T,D-=x.r,H-=x.g,P-=x.b,T-=x.a;var Y=U+o+1;Y=m+(Y<c?Y:c)<<2,j+=X+=x.r=f[Y],A+=q+=x.g=f[Y+1],G+=z+=x.b=f[Y+2],R+=B+=x.a=f[Y+3],x=x.next;var Z=p,$=Z.r,_=Z.g,tt=Z.b,rt=Z.a;D+=$,H+=_,P+=tt,T+=rt,X-=$,q-=_,z-=tt,B-=rt,p=p.next,h+=4}m+=a}for(var nt=0;nt<a;nt++){var at=f[h=nt<<2],et=f[h+1],ot=f[h+2],ft=f[h+3],it=s*at,ct=s*et,gt=s*ot,st=s*ft,ut=u*at,vt=u*et,lt=u*ot,bt=u*ft;l=v;for(var yt=0;yt<s;yt++)l.r=at,l.g=et,l.b=ot,l.a=ft,l=l.next;for(var xt=a,pt=0,mt=0,ht=0,wt=0,dt=1;dt<=o;dt++){h=xt+nt<<2;var Ct=s-dt;ut+=(l.r=at=f[h])*Ct,vt+=(l.g=et=f[h+1])*Ct,lt+=(l.b=ot=f[h+2])*Ct,bt+=(l.a=ft=f[h+3])*Ct,wt+=at,pt+=et,mt+=ot,ht+=ft,l=l.next,dt<g&&(xt+=a)}h=nt,x=v,p=b;for(var Et=0;Et<e;Et++){var St=h<<2;f[St+3]=ft=bt*w>>>d,ft>0?(ft=255/ft,f[St]=(ut*w>>>d)*ft,f[St+1]=(vt*w>>>d)*ft,f[St+2]=(lt*w>>>d)*ft):f[St]=f[St+1]=f[St+2]=0,ut-=it,vt-=ct,lt-=gt,bt-=st,it-=x.r,ct-=x.g,gt-=x.b,st-=x.a,St=nt+((St=Et+s)<g?St:g)*a<<2,ut+=wt+=x.r=f[St],vt+=pt+=x.g=f[St+1],lt+=mt+=x.b=f[St+2],bt+=ht+=x.a=f[St+3],x=x.next,it+=at=p.r,ct+=et=p.g,gt+=ot=p.b,st+=ft=p.a,wt-=at,pt-=et,mt-=ot,ht-=ft,p=p.next,h+=a}}return t}var F2=function t(){N2(this,t),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null};export{H2 as p};